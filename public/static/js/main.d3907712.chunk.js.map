{"version":3,"sources":["services/users.js","components/SignIn.jsx","components/SignUp.jsx","services/albums.js","components/Album/Get.jsx","components/Album/Tags.jsx","components/Album/Find.jsx","services/photos.js","components/Album/Create.jsx","components/Album/Me.jsx","services/friends.js","services/requests.js","components/User/Add.jsx","components/User/Me.jsx","components/User/Get.jsx","components/User/Friends.jsx","components/Photos.jsx","components/Dashboard.jsx","components/Homepage.jsx","App.jsx","serviceWorker.js","index.js"],"names":["headers","login","email","password","a","axios","post","logout","localStorage","clear","signup","nom","prenom","isAuth","getItem","then","rep","data","err","upload","file","formData","FormData","append","updatePicture","picture","get","id","getMe","getAll","getInvitation","validEmail","find","value","sendMail","text","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","SignIn","props","classes","history","useHistory","location","useLocation","React","useState","state","setState","setEmail","emailInvalid","setEmailInvalid","setPassword","passwordInvalid","setPasswordInvalid","auth","push","Container","component","maxWidth","className","Avatar","Typography","variant","noValidate","onSubmit","event","preventDefault","userService","setProfile","user","setAuth","pathname","response","status","toastr","warning","error","Grid","container","item","xs","TextField","required","fullWidth","label","onInput","target","test","name","autoComplete","disabled","type","Button","color","CircularProgress","to","SignUp","firstName","setFirstName","firstNameInvalid","setFirstNameInvalid","lastName","setLastName","lastNameInvalid","setLastNameInvalid","sm","autoFocus","justify","getDashboard","findTag","tag","ajout","description","dateCreated","tags","banned","photos","update","remove","show","unShow","getBanned","album_id","addBanned","user_id","delBanned","moment","require","root","content","flexGrow","height","overflow","icon","marginRight","heroContent","background","padding","heroButtons","cardGrid","paddingTop","paddingBottom","card","cardMedia","cardContent","gridContent","small","large","Album","useParams","loading","setLoading","setBanned","setError","errorRequest","setErrorRequest","album","setAlbum","setPhotos","useEffect","albumService","isBanned","Backdrop","backdrop","open","align","author","alt","src","style","fontSize","displayInline","gutterBottom","now","Date","last","seconds","diff","minutes","hours","days","weeks","months","years","getTimeDiff","alignContent","map","Chip","clickable","photo","key","_id","md","Card","CardMedia","image","CardActions","size","nbLikes","nbCommentaires","nbVues","classNames","zIndex","drawer","media","flexWrap","justifyContent","gridList","orange","getContrastText","deepOrange","purple","deepPurple","albums","setAlbums","setSearch","length","CardHeader","textDecoration","aria-label","charAt","toUpperCase","title","subheader","CardContent","autoHide","autoHeight","GridList","cellHeight","GridListTile","cols","search","InputProps","startAdornment","InputAdornment","position","photo_id","getFromUser","files","i","addComment","updateComment","comment_id","delComment","addLike","delLike","boxInput_dashed","marginBottom","border","boxInput_dashed_2","boxInput","boxInput_end","boxInput_end_button","btnSteps","paddingRight","stepper","marginLeft","input","inputTag","inputDate","button","instructions","cardFriend","cursor","activeStep","setActiveStep","Set","skipped","setSkipped","toISOString","split","selectedDate","setSelectedDate","selectedDateError","setSelectedDateError","steps","setSubmit","btnNext","setBtnNext","btnPrev","setBtnPrev","setTitle","titleError","setTitleError","setDescription","usersBanned","setUsersBanned","setTags","pictures","setPictures","previews","setPreviews","isStepSkipped","step","has","isRequested","pos","profile","friendRequests_send","r","indexOf","request","vue","accepted","Stepper","index","stepProps","labelProps","completed","Step","StepLabel","onClick","Fragment","accept","multiple","onChange","picts","p","URL","createObjectURL","Box","m","bgcolor","htmlFor","multiline","rows","onAdd","nTags","handleTagsAdd","onDelete","splice","handleTagsDelete","defaultValue","InputLabelProps","shrink","friends","borderColor","borderSize","users","handleDelBanned","handleAddBanned","validated","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","ListSubheader","photosService","str","path","albumsService","direction","prevActiveStep","newSkipped","values","delete","usersAlbum","setUsersAlbum","anchorEl","setAnchorEl","Boolean","openDelete","setOpenDelete","openRestrict","setOpenRestrict","openEdit","setOpenEdit","loadEdit","setLoadEdit","setLoadRestrict","albumId","setAlbumId","handleDeleteClose","handleRestrictClose","handleEditClose","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","success","Menu","keepMounted","MenuItem","t","ListItemIcon","action","IconButton","aria-haspopup","aria-controls","currentTarget","handleMenu","message","add","refused","setVue","setVueAll","isEmail","setIsEmail","messageEmail","setMessageEmail","setUsers","handleDelFriend","friendService","u","includes","handleAddFriend","isFriend","setIsFriend","setIsRequested","setUser","createdAt","setFriends","requestSend","setRequestSend","requestReceive","setRequestReceive","setNewRequestReceive","tabValue","setTabValue","requestService","receive","send","filter","setNewRequest","TabPanel","children","other","role","hidden","Tabs","indicatorColor","textColor","newValue","centered","Tab","friendRequests_receive","from","handleAcceptedRequest","handleRefusedRequest","handleRemoveRequest","inline","overlay","top","left","listCommentaires","setPhoto","nextPhoto","setNextPhoto","commentaires","setCommentaires","commentaire","setCommentaire","IsLiked","setIsLiked","next","likes","l","Divider","List","comment","ListItem","ListItemAvatar","ListItemText","updatedAt","ListItemSecondaryAction","handleDeleteCom","edge","cPointer","mainFeaturedPost","grey","common","white","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","bottom","right","mainFeaturedPostContent","breakpoints","up","userId","invitId","openCommentaires","setOpenCommentaires","openLikes","setOpenLikes","setLikes","startIcon","photoClick","slice","Collapse","in","timeout","unmountOnExit","primary","like","ListItemLink","renderLink","useMemo","forwardRef","itemProps","ref","menuButton","toolbar","toolbarIcon","mixins","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","drawerPaper","whiteSpace","drawerPaperClose","overflowX","dNone","App","newRequest","setOpenBackdrop","openBackdrop","openMenu","setOpenMenu","openFriends","setOpenFriends","openAlbums","setOpenAlbums","openMenuProfile","handleOpenFriends","handleOpenAlbums","CssBaseline","console","log","AppBar","Toolbar","noWrap","pict","window","reload","transformOrigin","Drawer","clsx","anchor","Math","floor","random","list","exact","Dashboard","Homepage","Photos","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.d3907712.chunk.js","sourcesContent":["import axios from \"axios\";\nconst headers = {\n  \"X-Requested-With\": \"XMLHttpRequest\",\n  \"Content-Type\": \"application/json\"\n};\n\nexport default {\n    login: async function(email, password) {\n        return axios.post('/api/users/login',{email,password},{headers: headers});\n    },\n\n    logout: async function() {\n        localStorage.clear();\n        return axios.post('/api/users/logout',{},{headers: headers});\n    },\n\n    signup: async function(nom, prenom, email, password) {\n        return axios.post('/api/users/register', {nom, prenom, email, password}, { headers: headers });\n    },\n\n    isAuth: async function() {\n        if(localStorage.getItem(\"token\") == null){\n            return axios.post('/api/users/connected',{},{headers: headers}).then((rep) => {\n                // localStorage.setItem(\"token\", rep.data.token);\n                // localStorage.setItem(\"user\", rep.data.user);\n                return rep.data;\n            }, (err) => {\n                // localStorage.removeItem('token');\n                // localStorage.removeItem('user');\n                return false;\n            });\n        }\n        return true;\n    },\n\n    upload: async function(file){\n        let formData = new FormData();\n        formData.append(\"file\", file);\n        return axios.post(\"/api/users/upload\", formData, {headers:{'Content-Type': 'multipart/form-data'}});\n    },\n\n    updatePicture: async function(picture) {\n        return axios.post('/api/users/updatePicture',{picture},{headers: headers});\n    },\n\n    get: async function(id) {\n        return axios.post('/api/users/get',{id},{headers: headers});\n    },\n\n    getMe: async function() {\n        return axios.post('/api/users/getMe',{},{headers: headers});\n    },\n\n    getAll: async function() {\n        return axios.post('/api/users/getAll',{},{headers: headers});\n    },\n\n    getInvitation: async function(id) {\n        return axios.post('/api/users/getInvitation',{id},{headers: headers});\n    },\n\n    validEmail: async function(id) {\n        return axios.post('/api/users/validEmail',{id},{headers: headers});\n    },\n\n    find: async function(value) {\n        return axios.post('/api/users/find',{value},{headers: headers});\n    },\n\n    sendMail: async function(email, text) {\n        return axios.post('/api/users/sendMail',{email, text},{headers: headers});\n    }\n};","import React from 'react';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\n// import CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\n// import Checkbox from '@material-ui/core/Checkbox';\nimport { Link } from 'react-router-dom'\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport userService from '../services/users.js';\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignIn(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const location = useLocation();\n\n  const [state, setState] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [emailInvalid, setEmailInvalid] = React.useState(false);\n  const [password, setPassword] = React.useState('');\n  const [passwordInvalid, setPasswordInvalid] = React.useState(false);\n\n  if(props.auth)\n    history.push(\"/\");\n\n  const handleSubmit = (event) => {\n\n    event.preventDefault();\n\n    if(!email)\n      setEmailInvalid(true);\n\n    if(!password)\n      setPasswordInvalid(true);\n    else\n      setPasswordInvalid(false);\n\n    if(!email || !password)\n      setState(false);\n    else{\n      setState(true);\n      userService.login(email, password).then(rep => {\n        // localStorage.setItem(\"token\", rep.data.token);\n        // localStorage.setItem(\"user\", rep.data.user);\n        setState(false);\n        props.setProfile(rep.data.user);\n        props.setAuth(true);\n        if(location.pathname !== \"/SignIn\" && location.pathname !== \"/\")\n          history.push(location.pathname);\n        else\n          history.push(\"/\");\n      }, err => {\n        setState(false);\n        props.setAuth(false);\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      });\n    }\n\n  };\n\n  const handleSetEmail = (event) => {\n    const email = event.target.value;\n    setEmail(email);\n    if (/^[a-zA-Z0-9,.'-]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/.test(email))\n      setEmailInvalid(false);\n    else\n      setEmailInvalid(true);\n  };\n\n  const handlePassword = (event) => {\n    setPassword(event.target.value);\n    if(!event.target.value)\n      setPasswordInvalid(true);\n    else\n      setPasswordInvalid(false);\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Connection\n        </Typography>\n        <form className={classes.form} noValidate onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <TextField\n                error={emailInvalid}\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Adresse email\"\n                value={email}\n                onInput={handleSetEmail}\n                name=\"email\"\n                autoComplete=\"Adresse email\"\n                disabled={state}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                error={passwordInvalid}\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Mot de passe\"\n                value={password}\n                onInput={handlePassword}\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"Mot de passe\"\n                disabled={state}\n              />\n    {/*          <FormControlLabel\n                control={<Checkbox value=\"remember\" color=\"primary\" />}\n                label=\"Remember me\"\n              />*/}\n            </Grid>\n            <Grid item xs={12}>\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.submit}\n              >\n                {state ? (<CircularProgress color=\"inherit\" />) : \"Se connecter\"}\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid container>\n            {/* <Grid item xs>\n              <Link href=\"/ForgotPassword\" variant=\"body2\">\n                Forgot password?\n              </Link>\n            </Grid> */}\n            <Grid item>\n              <Link to=\"/SignUp\" className=\"MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-body2 MuiTypography-colorPrimary\">\n                {\"Vous n'avez pas de compte ? Enregistrer vous\"}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n    </Container>\n  );\n}","import React from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\n// import Checkbox from '@material-ui/core/Checkbox';\nimport { Link } from 'react-router-dom'\nimport Grid from '@material-ui/core/Grid';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nimport userService from '../services/users.js';\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignUp(props) {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [state, setState] = React.useState(false);\n  const [firstName, setFirstName] = React.useState('');\n  const [firstNameInvalid, setFirstNameInvalid] = React.useState(false);\n  const [lastName, setLastName] = React.useState('');\n  const [lastNameInvalid, setLastNameInvalid] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [emailInvalid, setEmailInvalid] = React.useState(false);\n  const [password, setPassword] = React.useState('');\n  const [passwordInvalid, setPasswordInvalid] = React.useState(false);\n\n  if(props.auth)\n    history.push(\"/\");\n\n  const handleSubmit = (event) => {\n\n    event.preventDefault();\n\n    if(!firstName)\n      setFirstNameInvalid(true);\n    else\n      setFirstNameInvalid(false);\n\n    if(!lastName)\n      setLastNameInvalid(true);\n    else\n      setLastNameInvalid(false);\n\n    if(!email)\n      setEmailInvalid(true);\n\n    if(!password)\n      setPasswordInvalid(true);\n    else\n      setPasswordInvalid(false);\n\n    if(!email || !firstName || !lastName || !email || !password)\n      setState(false);\n    else{\n      setState(true);\n      userService.signup(firstName, lastName, email, password).then(rep => {\n        // localStorage.setItem(\"token\", rep.data.token);\n        // localStorage.setItem(\"user\", rep.data.user);\n        setState(false);\n        props.setProfile(rep.data.user);\n        props.setAuth(true);\n        history.push(\"/\");\n      }, err => {\n        setState(false);\n        props.setAuth(false);\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      });\n    }\n\n  };\n\n  const handleSetEmail = (event) => {\n    const email = event.target.value;\n    setEmail(email);\n    if (/^[a-zA-Z0-9,.'-]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/.test(email))\n      setEmailInvalid(false);\n    else\n      setEmailInvalid(true);\n  };\n\n  const handleFirstName = (event) => {\n    setFirstName(event.target.value);\n    if(!event.target.value)\n      setFirstNameInvalid(true);\n    else\n      setFirstNameInvalid(false);\n  }\n\n  const handleLastName = (event) => {\n    setLastName(event.target.value);\n    if(!event.target.value)\n      setLastNameInvalid(true);\n    else\n      setLastNameInvalid(false);\n  }\n\n  const handlePassword = (event) => {\n    setPassword(event.target.value);\n    if(!event.target.value)\n      setPasswordInvalid(true);\n    else\n      setPasswordInvalid(false);\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <MeetingRoomIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign up\n        </Typography>\n        <form className={classes.form} noValidate onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                error={firstNameInvalid}\n                autoComplete=\"Prénom\"\n                name=\"firstName\"\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"firstName\"\n                label=\"Prénom\"\n                value={firstName}\n                onInput={handleFirstName}\n                disabled={state}\n                autoFocus\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                error={lastNameInvalid}\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"lastName\"\n                label=\"Nom\"\n                value={lastName}\n                onInput={handleLastName}\n                name=\"lastName\"\n                autoComplete=\"Nom de famille\"\n                disabled={state}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                error={emailInvalid}\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Adresse email\"\n                value={email}\n                onInput={handleSetEmail}\n                name=\"email\"\n                autoComplete=\"Adresse email\"\n                disabled={state}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                error={passwordInvalid}\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Mot de passe\"\n                value={password}\n                onInput={handlePassword}\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"Mot de passe\"\n                disabled={state}\n              />\n            </Grid>\n{/*            <Grid item xs={12}>\n              <FormControlLabel\n                control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\n                label=\"I want to receive inspiration, marketing promotions and updates via email.\"\n              />\n            </Grid>*/}\n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            {state ? (<CircularProgress color=\"inherit\" />) : \"S'enregistrer\"}\n          </Button>\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Link to=\"/SignIn\" className=\"MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-body2 MuiTypography-colorPrimary\">\n                Vous avez un compte ? Connectez vous\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n    </Container>\n  );\n}","import axios from \"axios\";\nconst headers = {\n  \"Content-Type\": \"application/json\"\n};\n\nexport default {\n\tget: async function(id) {\n        return axios.post('/api/albums/get',{id},{headers: headers});\n    },\n\n    getMe: async function() {\n        return axios.post('/api/albums/getMe',{},{headers: headers});\n    },\n\n    getDashboard: async function() {\n        return axios.post('/api/albums/getDashboard',{},{headers: headers});\n    },\n\n    find: async function(value) {\n        return axios.post('/api/albums/find',{value},{headers: headers});\n    },\n\n    findTag: async function(tag) {\n        return axios.post('/api/albums/findTag',{tag},{headers: headers});\n    },\n\n\tajout: async function(name, description, dateCreated, tags, banned, photos) {\n        return axios.post('/api/albums/ajout',{name, description, dateCreated, tags, banned, photos},{headers: headers});\n    },\n\n    update: async function(id, name, description, dateCreated, tags) {\n        return axios.post('/api/albums/update',{id, name, description, dateCreated, tags},{headers: headers});\n    },\n\n    remove: async function(id) {\n        return axios.post('/api/albums/remove',{id},{headers: headers});\n    },\n\n    show: async function(id) {\n        return axios.post('/api/albums/show',{id},{headers: headers});\n    },\n\n    unShow: async function(id) {\n        return axios.post('/api/albums/unShow',{id},{headers: headers});\n    },\n\n    getBanned : async function(album_id){\n        return axios.post('/api/albums/getBanned',{album_id},{headers: headers});\n    },\n\n    addBanned: async function(album_id, user_id){\n        return axios.post('/api/albums/addBanned',{album_id, user_id},{headers: headers});\n    },\n\n    delBanned: async function(album_id, user_id){\n        return axios.post('/api/albums/delBanned',{album_id, user_id},{headers: headers});\n    }\n}","import React from 'react';\nimport {useParams} from \"react-router-dom\";\n\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardMedia from '@material-ui/core/CardMedia';\n\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Chip from '@material-ui/core/Chip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport { Link } from 'react-router-dom'\n\nimport Button from '@material-ui/core/Button';\n// import IconButton from '@material-ui/core/IconButton';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n// import FavoriteIcon from '@material-ui/icons/Favorite';\n\n// import toastr from 'toastr'\n// import 'toastr/build/toastr.min.css'\n\nimport albumService from \"../../services/albums\";\n\nconst moment = require(\"moment\");\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // flexGrow: 1,\n    display: 'flex',\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto',\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    paddingTop: '56.25%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  gridContent: {\n    paddingTop: theme.spacing(2),\n  },\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let seconds = now.diff(last, 'seconds'),\n      minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    if((seconds-minutes*60)>0)\n      return minutes+\" minutes et \"+(seconds-minutes*60)+\" secondes\";\n    else\n      return minutes+\" minutes\";\n  if(seconds>0)\n    return seconds+\" secondes\";\n}\n\n\n\nexport default function Album(props) {\n  const classes = useStyles();\n  let { id } = useParams();\n\n  const [loading, setLoading] = React.useState(true);\n  const [banned, setBanned] = React.useState(false);\n  const [error, setError] = React.useState(false);\n  const [errorRequest, setErrorRequest] = React.useState(false);\n  const [album, setAlbum] = React.useState(false);\n  const [photos, setPhotos] = React.useState([]);\n\n  React.useEffect(() => {\n    setLoading(true);\n    if(!id){\n      setLoading(false);\n      setError(\"Pas d'identifiant\");\n    }else{\n      albumService.get(id).then(rep => {\n        if(rep.data.error){\n          setAlbum(rep.data.album);\n          setErrorRequest(rep.data.error);\n        }else{\n          setBanned(rep.data.isBanned);\n          setAlbum(rep.data);\n          setPhotos(rep.data.photos);\n        }\n        setLoading(false);\n      }, err => {\n        setError(\"Erreur \"+err.response.status+\" : \"+err.response.data);\n        setLoading(false);\n      })\n    }\n  }, [id]);\n\n  return (\n    <Container className={classes.cardGrid} maxWidth={false}>\n      {loading ? (\n        <Backdrop className={classes.backdrop} open={true}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        ) : (error ? (\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{error}</Typography>\n          ) : (banned ? (\n              <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Vous n'avez pas acces à cet album</Typography>\n            ) : (\n          <div>\n            <Grid container spacing={3}>\n              <Grid item>\n                {album.author.picture !== \"false\" ? (\n                    <Avatar className={classes.large} alt={album.author.prenom+\" \"+album.author.nom} src={\"/images/users/small/\"+album.author.picture} />\n                  ) : (\n                    <Avatar className={classes.large}><AccountCircle style={{ fontSize: 50 }} /></Avatar>\n                  )\n                }\n              </Grid>\n              <Grid item>\n                <Typography variant=\"h6\" displayInline>\n                  {album.name}\n                </Typography>\n                <Typography variant=\"caption\" gutterBottom displayInline>\n                    {\"il y a \"+getTimeDiff(album.dateCreated)}\n                </Typography>\n              </Grid>\n              <Grid item alignContent=\"center\" alignItems=\"center\">\n                <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{album.description}</Typography>\n              </Grid>\n              <Grid item alignContent=\"flex-end\" alignItems=\"flex-end\">\n                {album.tags.map(tag => (\n                  <Link to={\"/Album/Tag/\"+tag.value} style={{padding:6}}><Chip label={tag.value} clickable color=\"primary\" /></Link>\n                ))}\n              </Grid>\n            </Grid>\n            {errorRequest ? (\n              <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{errorRequest}</Typography>\n            ) : (\n            <Grid container spacing={4} className={classes.gridContent}>\n              {photos.map(photo => (\n                <Grid item key={photo._id} xs={12} sm={6} md={3}>\n                  <Card className={classes.card}>\n                    <Link to={\"/Photos/\"+photo._id}>\n                      <CardMedia\n                        className={classes.cardMedia}\n                        image={\"/images/photos/medium/\"+photo.src}\n                      />\n                    </Link>\n                    <CardActions>\n                      <Link to={\"/Photos/\"+photo._id}>\n                        <Button size=\"small\" color=\"primary\">{photo.nbLikes} Likes</Button>\n                      </Link>\n                      <Link to={\"/Photos/\"+photo._id}>\n                        <Button size=\"small\" color=\"primary\">{photo.nbCommentaires} Commentaires</Button>\n                      </Link>  \n                      <Link to={\"/Photos/\"+photo._id}>\n                        <Button size=\"small\" color=\"primary\">{photo.nbVues} Vues</Button>\n                      </Link>                  \n                    </CardActions>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n            )}\n          </div>\n          ))\n        )}\n      </Container>\n  );\n}","import React from 'react';\nimport {useParams} from \"react-router-dom\";\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\n// import Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport InputAdornment from '@material-ui/core/InputAdornment';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SearchIcon from '@material-ui/icons/Search';\n// import IconButton from '@material-ui/core/IconButton';\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\n// import CreateIcon from '@material-ui/icons/Create';\n// import DeleteIcon from '@material-ui/icons/Delete';\n// import PersonIcon from '@material-ui/icons/Person';\n// import AccountCircle from '@material-ui/icons/AccountCircle';\n\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n// import GridListTileBar from '@material-ui/core/GridListTileBar';\n// import ListSubheader from '@material-ui/core/ListSubheader';\n\n// import Menu from '@material-ui/core/Menu';\n// import MenuItem from '@material-ui/core/MenuItem';\n// import ListItemIcon from '@material-ui/core/ListItemIcon';\n\n// import Dialog from '@material-ui/core/Dialog';\n// import DialogActions from '@material-ui/core/DialogActions';\n// import DialogContent from '@material-ui/core/DialogContent';\n// import DialogContentText from '@material-ui/core/DialogContentText';\n// import DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\n\nimport { Scrollbars } from 'react-custom-scrollbars';\n\n// import toastr from 'toastr'\n// import 'toastr/build/toastr.min.css'\n\nimport albumService from \"../../services/albums\";\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst classNames = require(\"classnames\");\nconst moment = require(\"moment\");\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      maxWidth: 345,\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n    orange: {\n      color: theme.palette.getContrastText(deepOrange[500]),\n      backgroundColor: deepOrange[500],\n    },\n    purple: {\n      color: theme.palette.getContrastText(deepPurple[500]),\n      backgroundColor: deepPurple[500],\n    },\n}));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    return minutes+\" minutes\";\n}\n\n\n\nexport default function (props) {\n  const classes = useStyles();\n  let { tag } = useParams();\n\n  const [error, setError] = React.useState(false);\n  const [loading, setLoading] = React.useState(true);\n  const [albums, setAlbums] = React.useState([]);\n  const [search, setSearch] = React.useState('');\n\n  const handleSearch = (event) => {\n    event.preventDefault();\n    setSearch(event.target.value);\n    if(search !== \"\"){\n      albumService.findTag(event.target.value).then(rep =>{\n        setAlbums(rep.data);\n        if(rep.data.length===0)\n          setError(\"Aucuns résultats\");\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      });\n    };\n  }\n\n\n  React.useEffect(() => {\n    if(!tag){\n      setLoading(false);\n      // setError(\"Pas de tag\");\n    }else{\n      setSearch(tag);\n      albumService.findTag(tag).then(rep => {\n        setAlbums(rep.data);\n        if(rep.data.length===0)\n          setError(\"Aucuns résultats\");\n        setLoading(false);\n      }, err => {\n        setLoading(false);\n        setError(\"Erreur \"+err.response.status+\" : \"+err.response.data);\n      });\n    }\n  }, [tag]);\n\n\n  return (\n    <Container className={classes.cardGrid} maxWidth={false}>\n      {loading ? (\n        <Backdrop className={classes.backdrop} open={true}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        ) : (error ? (\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{error}</Typography>\n          ) : (\n          <div>\n\n{/*          <Card>\n            <CardContent>\n              <TextField\n                        variant=\"outlined\"\n                        required\n                        fullWidth\n                        autoFocus\n                        id=\"email\"\n                        label=\"Rechercher un album\"\n                        value={search}\n                        onInput={handleSearch}\n                        name=\"email\"\n                        autoComplete=\"Email, nom, prenom\"\n                        InputProps={{\n                          startAdornment: (<InputAdornment position=\"start\"><SearchIcon color=\"textSecondary\" /></InputAdornment>)\n                        }}\n                    />\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"right\" style={{paddingTop:6}}>{albums.length>0 ? albums.length : \"Aucuns\"} albums trouvés</Typography>\n                  </CardContent>\n            </Card>*/}\n\n\n          <Grid container spacing={4}>\n            {albums.map((album) => (\n              <Grid item key={album._id} xs={12} sm={6} md={4} >\n                <Card className={classes.card}>\n                  <CardHeader \n                      avatar={\n                        <Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                          <Avatar aria-label=\"recipe\" className={classes.purple}>\n                            {album.name.charAt(0).toUpperCase()}\n                          </Avatar>\n                        </Link>\n                      }\n\n                      title={<Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}><Typography variant=\"h6\" displayInline>{album.name}</Typography></Link>}\n                      subheader={<Typography variant=\"caption\" gutterBottom displayInline>{\"il y a \"+getTimeDiff(album.dateCreated)}</Typography>}\n                  />\n                  <CardContent className={classNames(classes.cardContent, classes.gridContent)}>\n                    <Scrollbars autoHide autoHeight>\n                      <GridList cellHeight={150}>\n                        {album.photos.map((photo) => (\n                          <GridListTile key={photo._id} cols={1}>\n                            <img src={\"/images/photos/medium/\"+photo.src} alt={photo.src} />\n                          </GridListTile>\n                        ))}\n                      </GridList>\n                    </Scrollbars>\n                </CardContent>\n\n                <CardActions>\n                    <Link to={\"/Album/\"+album._id}>\n                        <Button size=\"small\" color=\"primary\">{album.nbLikes} Likes</Button>\n                    </Link>\n                    <Link to={\"/Album/\"+album._id}>\n                        <Button size=\"small\" color=\"primary\">{album.nbCommentaires} Commentaires</Button>\n                    </Link>\n                    <Link to={\"/Album/\"+album._id}>\n                        <Button size=\"small\" color=\"primary\">{album.nbVues} Vues</Button>\n                    </Link>\n                </CardActions>\n              </Card>\n            </Grid>\n          ))}\n          </Grid>\n          </div>\n        )\n      )}\n    </Container>\n  );\n};","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\n// import Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport InputAdornment from '@material-ui/core/InputAdornment';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SearchIcon from '@material-ui/icons/Search';\n// import IconButton from '@material-ui/core/IconButton';\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\n// import CreateIcon from '@material-ui/icons/Create';\n// import DeleteIcon from '@material-ui/icons/Delete';\n// import PersonIcon from '@material-ui/icons/Person';\n// import AccountCircle from '@material-ui/icons/AccountCircle';\n\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n// import GridListTileBar from '@material-ui/core/GridListTileBar';\n// import ListSubheader from '@material-ui/core/ListSubheader';\n\n// import Menu from '@material-ui/core/Menu';\n// import MenuItem from '@material-ui/core/MenuItem';\n// import ListItemIcon from '@material-ui/core/ListItemIcon';\n\n// import Dialog from '@material-ui/core/Dialog';\n// import DialogActions from '@material-ui/core/DialogActions';\n// import DialogContent from '@material-ui/core/DialogContent';\n// import DialogContentText from '@material-ui/core/DialogContentText';\n// import DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\n\nimport { Scrollbars } from 'react-custom-scrollbars';\n\n// import toastr from 'toastr'\n// import 'toastr/build/toastr.min.css'\n\nimport albumService from \"../../services/albums\";\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst classNames = require(\"classnames\");\nconst moment = require(\"moment\");\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      maxWidth: 345,\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n    orange: {\n      color: theme.palette.getContrastText(deepOrange[500]),\n      backgroundColor: deepOrange[500],\n    },\n    purple: {\n      color: theme.palette.getContrastText(deepPurple[500]),\n      backgroundColor: deepPurple[500],\n    },\n}));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    return minutes+\" minutes\";\n}\n\n\n\nexport default function (props) {\n  const classes = useStyles();\n\n  const [error, setError] = React.useState(false);\n  const [loading, setLoading] = React.useState(false);\n  const [albums, setAlbums] = React.useState([]);\n  const [search, setSearch] = React.useState('');\n\n  const handleSearch = (event) => {\n    event.preventDefault();\n    setSearch(event.target.value);\n    if(search !== \"\"){\n      albumService.find(event.target.value).then(rep =>{\n        setAlbums(rep.data);\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      });\n    };\n  }\n\n\n  return (\n    <Container className={classes.cardGrid} maxWidth={false}>\n      <Card>\n        <CardContent>\n          <TextField\n                    variant=\"outlined\"\n                    required\n                    fullWidth\n                    autoFocus\n                    id=\"email\"\n                    label=\"Rechercher un album\"\n                    value={search}\n                    onInput={handleSearch}\n                    name=\"email\"\n                    autoComplete=\"Email, nom, prenom\"\n                    InputProps={{\n                      startAdornment: (<InputAdornment position=\"start\"><SearchIcon color=\"textSecondary\" /></InputAdornment>)\n                    }}\n                />\n                <Typography variant=\"body2\" color=\"textSecondary\" align=\"right\" style={{paddingTop:6}}>{albums.length>0 ? albums.length : \"Aucuns\"} albums trouvés</Typography>\n              </CardContent>\n        </Card>\n      {loading ? (\n        <Backdrop className={classes.backdrop} open={true}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        ) : (\n          <Grid container spacing={4} style={{paddingTop: \"16px\"}}>\n            {albums.map((album) => (\n              <Grid item key={album._id} xs={12} sm={6} md={4} >\n                <Card className={classes.card}>\n                  <CardHeader \n                      avatar={\n                        <Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                          <Avatar aria-label=\"recipe\" className={classes.purple}>\n                            {album.name.charAt(0).toUpperCase()}\n                          </Avatar>\n                        </Link>\n                      }\n\n                      title={<Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}><Typography variant=\"h6\" displayInline>{album.name}</Typography></Link>}\n                      subheader={<Typography variant=\"caption\" gutterBottom displayInline>{\"il y a \"+getTimeDiff(album.dateCreated)}</Typography>}\n                  />\n                  <CardContent className={classNames(classes.cardContent, classes.gridContent)}>\n                    <Scrollbars autoHide autoHeight>\n                      <GridList cellHeight={150}>\n                        {album.photos.map((photo) => (\n                          <GridListTile key={photo._id} cols={1}>\n                            <img src={\"/images/photos/medium/\"+photo.src} alt={photo.src} />\n                          </GridListTile>\n                        ))}\n                      </GridList>\n                    </Scrollbars>\n                </CardContent>\n\n                <CardActions>\n                    <Link to={\"/Album/\"+album._id}>\n                        <Button size=\"small\" color=\"primary\">{album.nbLikes} Likes</Button>\n                    </Link>\n                    <Link to={\"/Album/\"+album._id}>\n                        <Button size=\"small\" color=\"primary\">{album.nbCommentaires} Commentaires</Button>\n                    </Link>\n                    <Link to={\"/Album/\"+album._id}>\n                        <Button size=\"small\" color=\"primary\">{album.nbVues} Vues</Button>\n                    </Link>\n                </CardActions>\n              </Card>\n            </Grid>\n          ))}\n          </Grid>\n      )}\n    </Container>\n  );\n};","import axios from \"axios\";\nconst headers = {\n  \"Content-Type\": \"application/json\"\n};\n\nexport default {\n\tget: function(photo_id) {\n        return axios.post('/api/photos/get',{photo_id},{headers: headers});\n    },\n\n    getFromUser: function(user_id) {\n        return axios.post('/api/photos/getFromUser',{user_id},{headers: headers});\n    },\n\n    upload: async function(files){\n        let formData = new FormData();\n        for(let i in files){\n            formData.append(\"file\", files[i]);\n        }\n        return axios.post(\"/api/photos/upload\", formData, {headers:{'Content-Type': 'multipart/form-data'}});\n    },\n\n\taddComment: function(text, photo_id) {\n        return axios.post('/api/photos/comment/add',{text, photo_id},{headers: headers});\n    },\n\n    updateComment: function(text, photo_id, comment_id) {\n        return axios.post('/api/photos/comment/update',{text, photo_id, comment_id},{headers: headers});\n    },\n\n    delComment: function(comment_id, photo_id) {\n        return axios.post('/api/photos/comment/del',{comment_id, photo_id},{headers: headers});\n    },\n\n    addLike: function(photo_id) {\n        return axios.post('/api/photos/like/add',{photo_id},{headers: headers});\n    },\n\n    delLike: function(photo_id) {\n        return axios.post('/api/photos/like/del',{photo_id},{headers: headers});\n    },\n\n}","import React from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\n\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport TextField from '@material-ui/core/TextField';\n// import DateFnsUtils from '@date-io/date-fns';\n// import {KeyboardDatePicker} from '@material-ui/pickers';\n\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\n\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ChipInput from 'material-ui-chip-input'\n\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport EmailIcon from '@material-ui/icons/Email';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nimport photosService from '../../services/photos';\nimport albumsService from '../../services/albums';\n\nconst classNames = require(\"classnames\");\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      maxWidth: 345,\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    boxInput_dashed: {\n    \tmargin:theme.spacing(20),\n    \tmarginTop:theme.spacing(5),\n    \tmarginBottom:theme.spacing(3),\n    \tpadding:theme.spacing(20),\n    \tborder:'2px dashed #CCC',\n    },\n    boxInput_dashed_2: {\n    \tmargin:theme.spacing(20),\n    \tmarginTop:theme.spacing(5),\n    \tmarginBottom:theme.spacing(3),\n    \tpadding:theme.spacing(3),\n    \t// paddingTop:theme.spacing(3),\n    \t// paddingBottom:theme.spacing(3),\n    \tborder:'2px dashed #CCC',\n    },\n    boxInput: {\n    \tmargin:theme.spacing(20),\n    \tmarginTop:theme.spacing(5),\n    \tmarginBottom:theme.spacing(3),\n    \tpadding:theme.spacing(20),\n    \tpaddingTop:theme.spacing(0),\n    \tpaddingBottom:theme.spacing(5),\n    },\n    boxInput_end: {\n    \tmargin:theme.spacing(20),\n    \tmarginTop:theme.spacing(5),\n    \tmarginBottom:theme.spacing(3),\n    \tpadding:theme.spacing(20),\n    \tpaddingTop:theme.spacing(5),\n    \tpaddingBottom:theme.spacing(5),\n    },\n    boxInput_end_button: {\n    \tmarginTop:theme.spacing(10),\n    },\n    btnSteps: {\n    \t// marginLeft:theme.spacing(20),\n    \tmarginTop:theme.spacing(5),\n    \tpaddingRight:theme.spacing(30),\n    },\n    stepper: {\n    \tmarginLeft:theme.spacing(15),\n    \tmarginRight:theme.spacing(15),\n    },\n    input: {\n\t\tdisplay: 'none',\n\t},\n\tinputTag: {\n\t\twidth:\"80%\",\n\t},\n\tinputDate: {\n\t\twidth:\"15%\",\n\t},\n\tbutton: {\n\t\tmarginRight: theme.spacing(1),\n\t},\n\tinstructions: {\n\t\tmarginTop: theme.spacing(1),\n\t\tmarginBottom: theme.spacing(1),\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardFriend: {\n    \theight: '100%',\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n    \tcursor: 'pointer',\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n}));\n\n\nfunction getSteps(){\n\treturn ['Transfert des photos', 'Informations sur l\\'album', 'Restriction d\\'amis', 'Sauvegarde'];\n}\n\n\nexport default function (props) {\n\tconst classes = useStyles();\n\tconst history = useHistory();\n\n\tconst [activeStep, setActiveStep] = React.useState(0);\n\tconst [skipped, setSkipped] = React.useState(new Set());\n\tconst [selectedDate, setSelectedDate] = React.useState(new Date(Date.now()).toISOString().split('T')[0]);\n\tconst [selectedDateError, setSelectedDateError] = React.useState(false);\n\tconst steps = getSteps();\n\n\tconst [submit, setSubmit] = React.useState(false);\n\tconst [btnNext, setBtnNext] = React.useState(true);\n\tconst [btnPrev, setBtnPrev] = React.useState(false);\n\n\tconst [title, setTitle] = React.useState(\"\");\n\tconst [titleError, setTitleError] = React.useState(false);\n\tconst [description, setDescription] = React.useState(\"\");\n\tconst [usersBanned, setUsersBanned] = React.useState([]);\n\tconst [tags, setTags] = React.useState([]);\n\tconst [pictures, setPictures] = React.useState([]);\n\t// const [picturesError, setPicturesError] = React.useState(false);\n\tconst [previews, setPreviews] = React.useState([]);\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tsetBtnPrev(true);\n\t\tsetSubmit(true);\n\n\t\t// console.log(title, description, tags, selectedDate)\n\t\t// console.log(pictures);\n\n\t\tphotosService.upload(pictures).then(rep => {\n\t\t\tlet photos = rep.data.map(p => {\n\t\t\t\tlet str = p.path.split(\"/\");\n\t\t\t\treturn str[str.length-1];\n\t\t\t});\n\n\t\t\talbumsService.ajout(title, description, selectedDate, tags, usersBanned, photos).then(rep => {\n\t\t\t\tsetSubmit(false);\n\t\t\t\tsetBtnPrev(false);\n\t\t\t\tlet p = {...props.profile};\n\t\t\t\tp.albums.push(rep.data);\n\t\t\t\tprops.setProfile(p);\n\t\t\t\thistory.push(\"/Album/\"+rep.data._id);\n\t\t\t}, err => {\n\t\t\t\tsetSubmit(false);\n\t\t\t\tsetBtnPrev(false);\n\t\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t        else\n\t\t          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t});\n\t\t}, err => {\n\t\t\tsetSubmit(false);\n\t\t\tsetBtnPrev(false);\n\t\t\tif(err.response.status>400 && err.response.status<500)\n\t          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t        else\n\t          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t})\n\t}\n\n\tconst handleTitle = (event) => {\n\t\tsetTitle(event.target.value);\n\t\tif(!event.target.value)\n\t\t\tsetTitleError(true);\n\t\telse\n\t\t\tsetTitleError(false);\n\t\tif(title && selectedDate)\n\t\t\tsetBtnNext(false);\n\t\telse\n\t\t\tsetBtnNext(true);\n\t}\n\n\tconst handleDescription = (event) => {\n\t\tsetDescription(event.target.value);\n\t}\n\n\tconst handleTagsAdd = (tag) => {\n\t\tconst nTags = [...tags]\n\t\tnTags.push(tag);\n\t\tsetTags(nTags);\n\t}\n\n\tconst handleTagsDelete = (tag, index) => {\n\t\tconst nTags = [...tags]\n\t\tnTags.splice(index, 1);\n\t\tsetTags(nTags);\n\t}\n\n\tconst handleAddBanned = (event, user) => {\n\t\tconst users = [...usersBanned];\n\t\tusers.push(user._id);\n\t\tuser.banned = true;\n\t\tsetUsersBanned(users);\n\t}\n\n\tconst handleDelBanned = (event, user) => {\n\t\tconst users = [...usersBanned];\n\t\tconst pos = users.indexOf(user._id);\n\t\tif(pos !== -1){\n\t\t\tuser.banned = false;\n\t\t\tusers.splice(pos, 1);\n\t\t\tsetUsersBanned(users);\n\t\t}\n\t}\n\n\tconst handleDate = (event) => {\n\t\tsetSelectedDate(event.target.value);\n\t\tif(!event.target.value)\n\t\t\tsetSelectedDateError(true);\n\t\telse\n\t\t\tsetSelectedDateError(false);\n\n\t\tif(title && selectedDate)\n\t\t\tsetBtnNext(false);\n\t\telse\n\t\t\tsetBtnNext(true);\n\t}\n\n\tconst handlePictures = (event) => {\n\t\tlet files = event.target.files;\n\t\tlet picts = [...pictures];\n\t\tfor (let i = 0; i < files.length; i++)\n\t\t\tpicts.push(files[i]);\n\t\tsetPreviews(picts.map((p) => {return URL.createObjectURL(p);}));\n\t\tsetPictures(picts);\n\t\tsetBtnNext(false);\n\t}\n\n\n\n\tconst isStepOptional = (step) => {\n\t\treturn false;\n\t};\n\n\tconst isStepSkipped = (step) => {\n\t\treturn skipped.has(step);\n\t};\n\n\tconst handleNext = () => {\n\t\tlet newSkipped = skipped;\n\t\tif (isStepSkipped(activeStep)) {\n\t\t\tnewSkipped = new Set(newSkipped.values());\n\t\t\tnewSkipped.delete(activeStep);\n\t\t}\n\t\tsetActiveStep((prevActiveStep) => prevActiveStep + 1);\n\t\tsetSkipped(newSkipped);\n\t\tif(activeStep===0){\n\t\t\tif(title && selectedDate)\n\t\t\t\tsetBtnNext(false);\n\t\t\telse\n\t\t\t\tsetBtnNext(true);\n\t\t}else\n\t\t\tsetBtnNext(false);\n\t};\n\n\tconst handleBack = () => {\n\t\tsetActiveStep((prevActiveStep) => prevActiveStep - 1);\n\t\tif(activeStep===1){\n\t\t\tif(pictures.length>0)\n\t\t\t\tsetBtnNext(false);\n\t\t\telse\n\t\t\t\tsetBtnNext(true);\n\t\t}\n\t\tif(activeStep===2){\n\t\t\tif(title && selectedDate)\n\t\t\t\tsetBtnNext(false);\n\t\t\telse\n\t\t\t\tsetBtnNext(true);\n\t\t}\n\t};\n\n\tconst handleSkip = () => {\n\t\tif (!isStepOptional(activeStep)) {\n\t\t\t// You probably want to guard against something like this,\n\t\t\t// it should never occur unless someone's actively trying to break something.\n\t\t\tthrow new Error(\"You can't skip a step that isn't optional.\");\n\t\t}\n\t\tsetActiveStep((prevActiveStep) => prevActiveStep + 1);\n\t\tsetSkipped((prevSkipped) => {\n\t\t\tconst newSkipped = new Set(prevSkipped.values());\n\t\t\tnewSkipped.add(activeStep);\n\t\t\treturn newSkipped;\n\t\t});\n\t};\n\n\tconst handleReset = () => {\n\t\tsetTitle(\"\");\n\t\tsetDescription(\"\");\n\t\tsetTags(\"\");\n\t\tsetUsersBanned([]);\n\t\tsetSelectedDate(new Date(\"now\"));\n\t\tsetPictures([])\n\t\tsetActiveStep(0);\n\t};\n\n\n\tconst isRequested = (user) => {\n\t\tlet pos = props.profile.friendRequests_send.map(r => r.to._id).indexOf(user._id);\n\t\tlet request = props.profile.friendRequests_send[pos];\n\t\tif(request.vue)\n\t\t\treturn request.accepted;\n\t\treturn request.vue;\n\t};\n\n\treturn (\n\t\t<Container className={classes.cardGrid} maxWidth={false}>\n\t\t\t<Stepper activeStep={activeStep} className={classes.stepper} >\n\t\t\t\t{steps.map((label, index) => {\n\t\t\t\t\tconst stepProps = {};\n\t\t\t\t\tconst labelProps = {};\n\t\t\t\t\tif (isStepOptional(index)) {\n\t\t\t\t\t\tlabelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n\t\t\t\t\t}\n\t\t\t\t\tif (isStepSkipped(index)) {\n\t\t\t\t\t\tstepProps.completed = false;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Step key={label} {...stepProps}>\n\t\t\t\t\t\t\t<StepLabel {...labelProps}>{label}</StepLabel>\n\t\t\t\t\t\t</Step>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Stepper>\n\t\t\t<div>\n\t\t\t\t{activeStep === steps.length ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography className={classes.instructions}>\n\t\t\t\t\t\t\tAll steps completed - you&apos;re finished\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Button onClick={handleReset} className={classes.button}>\n\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{activeStep === 0 && (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t\t\tid=\"contained-button-multiple-files\"\n\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\tonChange={handlePictures}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{previews.length > 0 ? (\n\t\t\t\t\t\t\t\t<Box display=\"block\" justifyContent=\"center\" m={1} p={1} bgcolor=\"background.paper\" className={classes.boxInput_dashed_2}>\n\t\t\t\t\t\t\t\t\t<Grid container spacing={3} justify='center' alignItems='center' alignContent='center'>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={12} container justify='center' alignItems='center' alignContent='center'>\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"contained-button-multiple-files\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button component=\"span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tAjouter d'autres photos\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t\t<Scrollbars autoHide style={{ height: 220 }}>\n\t\t\t                                    <GridList cellHeight={200} cols={3}>\n\t\t\t                                        {previews.map((photo) => (\n\t\t\t                                            <GridListTile key={photo} cols={1}>\n\t\t\t                                                <img src={photo} alt={photo} />\n\t\t\t                                            </GridListTile>\n\t\t\t                                        ))}\n\t\t\t                                    </GridList>\n\t\t\t                                </Scrollbars>\n\t\t\t                            </Grid>\n\t\t\t                        </Grid>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" m={1} p={1} bgcolor=\"background.paper\" className={classes.boxInput_dashed}>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"contained-button-multiple-files\">\n\t\t\t\t\t\t\t\t\t\t<Button component=\"span\">\n\t\t\t\t\t\t\t\t\t\t\tCliquer ici pour télécharger vos photos.\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{activeStep === 1 && (\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" m={1} p={1} bgcolor=\"background.paper\" className={classes.boxInput}>\n\t\t\t\t\t\t\t\t<form className={classes.form} noValidate>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\terror={titleError}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tid=\"title\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Titre de l'album\"\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"title\"\n\t\t\t\t\t\t\t\t\t\tonInput={handleTitle}\n\t\t\t\t\t\t\t\t\t\tvalue={title}\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Desription de l'album\"\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"description\"\n\t\t\t\t\t\t\t\t\t\tonInput={handleDescription}\n\t\t\t\t\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<ChipInput\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\tid=\"tags\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tags de l'album\"\n\t\t\t\t\t\t\t\t\t\tname=\"tags\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"tags\"\n\t\t\t\t\t\t\t\t\t\tonAdd={(tag) => handleTagsAdd(tag)}\n\t\t\t\t\t\t\t\t\t\tonDelete={(tag, index) => handleTagsDelete(tag, index)}\n\t\t\t\t\t\t\t\t\t\tvalue={tags}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputTag}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\terror={selectedDateError}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\tid=\"date\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Date de l'album\"\n\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={selectedDate}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.TextField}\n\t\t\t\t\t\t\t\t\t\tonInput={handleDate}\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t  shrink: true,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{activeStep === 2 && (\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" m={1} p={1} bgcolor=\"background.paper\" className={classes.boxInput}>\n\t\t\t\t\t\t\t{props.profile.friends.length === 0 ? (\n\t\t\t\t                <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucuns amis à restreindre</Typography>\n\t\t\t\t            ) : (\n\t\t\t\t\t\t\t\t<Grid container spacing={4} className={classes.gridContent}>\n\t\t\t\t                    {props.profile.friends.map((user) => (\n\t\t\t\t                      <Grid item key={user._id} >\n\t\t\t\t                        <Card className={classes.cardFriend} \n\t\t\t\t                        \tstyle={user.banned ? {backgroundColor:\"#3f51b5\"} : {borderColor:\"#3f51b5\", borderSize:2}}\n\t\t\t\t                        \tonClick={user.banned ? (event) => handleDelBanned(event, user) : (event) => handleAddBanned(event, user)}>\n\t\t\t\t                          <CardHeader\n\t\t\t\t                            avatar={\n\t\t\t\t                              user.validated ? (\n\t\t\t\t                                (isRequested(user) ? (\n\t\t\t\t                                  (user.picture !== \"false\" ? (\n\t\t\t\t                                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n\t\t\t\t                                    <Avatar className={classes.small}><AccountCircle/></Avatar>)\n\t\t\t\t                                )) : (\n\t\t\t\t                                    <Badge\n\t\t\t\t                                        overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n\t\t\t\t                                        badgeContent={<VisibilityIcon fontSize=\"small\" color=\"inherit\" />} >\n\t\t\t\t                                        {user.picture !== \"false\" ? (\n\t\t\t\t                                        <Avatar className={classes.small} alt={user.validated ? user.prenom+\" \"+user.nom : user.email} src={\"/images/users/small/\"+user.picture}/> ) : ( \n\t\t\t\t                                        <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n\t\t\t\t                                    </Badge>\n\t\t\t\t                              ))) : (\n\t\t\t\t                                  <Badge\n\t\t\t\t                                    overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n\t\t\t\t                                    badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n\t\t\t\t                                    {user.picture !== \"false\" ? (\n\t\t\t\t                                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n\t\t\t\t                                    <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n\t\t\t\t                                  </Badge>\n\t\t\t\t                              )\n\t\t\t\t                            }\n\n\t\t\t\t                            title={<Typography variant=\"body2\" displayInline>{user.validated ? (user.prenom+\" \"+user.nom) : (user.email)}</Typography>}\n\t\t\t\t                            subheader={user.validated ? \"Enregistrer\" : \"Non enregistrer\"}\n\t\t\t\t                          />\n\t\t\t\t                        </Card>\n\t\t\t\t                      </Grid>\n\t\t\t\t                    ))}\n\t\t\t\t                </Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Box>)}\n\t\t\t\t\t\t{activeStep === 3 && (\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" m={1} p={1} bgcolor=\"background.paper\" className={classes.boxInput_end}>\n\t\t\t\t\t\t\t\t<Grid container spacing={10}>\n\t\t\t\t\t\t\t\t\t<Grid item key=\"myAlbum\" xs={12} sm={6}>\n\t\t\t\t\t\t\t\t\t\t<Card className={classes.card}>\n\t\t\t\t\t\t\t\t\t\t\t<CardHeader \n\t\t                                        avatar={\n\t\t                                        \tprops.profile.picture !== \"false\" ? (\n\t\t                                            \t<Avatar alt={props.profile.prenom+\" \"+props.profile.nom} src={\"/images/users/small/\"+props.profile.picture} />\n\t\t                                            ) : (\n\t\t                                            \t<Avatar><AccountCircle fontSize=\"large\"/></Avatar>\n\t\t                                            )\n\t\t                                        }\n\t\t                                        title={props.profile.prenom+\" \"+props.profile.nom}\n\t\t                                        subheader={selectedDate}\n\t\t                                    />\n\t\t                                    <CardContent className={classNames(classes.cardContent, classes.gridContent)}>\n\t\t                                        <Scrollbars autoHide autoHeight>\n\t\t                                            <GridList cellHeight={150}>\n\t\t                                                <GridListTile key=\"Subheader\" cols={2} style={{ height: 'auto' }}>\n\t\t                                                    <ListSubheader component=\"div\">{title}</ListSubheader>\n\t\t                                                </GridListTile>\n\t\t                                                {previews.map((photo) => (\n\t\t                                                    <GridListTile key={photo}>\n\t\t                                                        <img src={photo} alt={photo} />\n\t\t                                                    </GridListTile>\n\t\t                                                ))}\n\t\t                                            </GridList>\n\t\t                                        </Scrollbars>\n\t\t                                    </CardContent>\n\t\t                                </Card>\n\t\t                            </Grid>\n\n\t\t                            <Grid item key=\"myAlbumForm\" xs={12} sm={6}>\n\t\t                            \t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t\t                            \t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.boxInput_end_button}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{submit ? (<CircularProgress color=\"inherit\" />) : \"Enregistrer l'album\"}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</form>\n\t\t                            </Grid>\n\t\t                        </Grid>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Grid container className={classes.btnSteps} justify=\"flex-end\" direction=\"row\" alignItems=\"center\" spacing={10}>\n\t\t\t\t\t\t\t<Button disabled={activeStep === 0 || btnPrev} onClick={handleBack} className={classes.button}>\n\t\t\t\t\t\t\t\tPrécédent\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{isStepOptional(activeStep) && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t                  variant=\"contained\"\n\t\t\t\t                  color=\"primary\"\n\t\t\t\t                  onClick={handleSkip}\n\t\t\t\t                  disabled={submit}\n\t\t\t\t                  className={classes.button}\n\t\t\t\t                >\n\t\t\t\t                \tskip\n\t\t\t\t                </Button>\n\t\t\t\t            )}\n\t\t\t\t            <Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tdisabled={btnNext || activeStep === steps.length - 1}\n\t\t\t\t\t\t\t\tonClick={handleNext}\n\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{activeStep === steps.length - 1 ? 'Terminer' : 'Suivant'}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t</div>\n\n\t\t</Container>\n\t);\n};","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\n// import Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport CreateIcon from '@material-ui/icons/Create';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PersonIcon from '@material-ui/icons/Person';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport EmailIcon from '@material-ui/icons/Email';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\n\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n// import GridListTileBar from '@material-ui/core/GridListTileBar';\n// import ListSubheader from '@material-ui/core/ListSubheader';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport ChipInput from 'material-ui-chip-input'\n\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\n\nimport { Scrollbars } from 'react-custom-scrollbars';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nimport albumService from \"../../services/albums\";\n\nconst classNames = require(\"classnames\");\nconst moment = require(\"moment\");\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      maxWidth: 345,\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardFriend: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      cursor: 'pointer'\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n    orange: {\n      color: theme.palette.getContrastText(deepOrange[500]),\n      backgroundColor: deepOrange[500],\n    },\n    purple: {\n      color: theme.palette.getContrastText(deepPurple[500]),\n      backgroundColor: deepPurple[500],\n    },\n    small: {\n      width: theme.spacing(4),\n      height: theme.spacing(4),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n}));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let seconds = now.diff(last, 'seconds'),\n      minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    if((seconds-minutes*60)>0)\n      return minutes+\" minutes et \"+(seconds-minutes*60)+\" secondes\";\n    else\n      return minutes+\" minutes\";\n  if(seconds>0)\n    return seconds+\" secondes\";\n}\n\nexport default function (props) {\n\tconst classes = useStyles();\n\n  const [loading, setLoading] = React.useState(true);\n  const [albums, setAlbums] = React.useState([]);\n  const [usersAlbum, setUsersAlbum] = React.useState([]);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  const [openDelete, setOpenDelete] = React.useState(false);\n  const [openRestrict, setOpenRestrict] = React.useState(false);\n  const [openEdit, setOpenEdit] = React.useState(false);\n  const [loadEdit, setLoadEdit] = React.useState(false);\n  const [loadRestrict, setLoadRestrict] = React.useState(false);\n\n  const [albumId, setAlbumId] = React.useState(null);\n\n  const [title, setTitle] = React.useState(\"\");\n  const [titleError, setTitleError] = React.useState(false);\n  const [description, setDescription] = React.useState(\"\");\n  const [tags, setTags] = React.useState([]);\n  const [selectedDate, setSelectedDate] = React.useState(new Date(Date.now()).toISOString().split('T')[0]);\n  const [selectedDateError, setSelectedDateError] = React.useState(false);\n\n\n\n  const handleTitle = (event) => {\n    setTitle(event.target.value);\n    if(!event.target.value)\n      setTitleError(true);\n    else\n      setTitleError(false);\n  }\n\n  const handleDescription = (event) => {\n    setDescription(event.target.value);\n  }\n\n  const handleTagsAdd = (tag) => {\n    const nTags = [...tags]\n    nTags.push(tag);\n    setTags(nTags);\n  }\n\n  const handleTagsDelete = (tag, index) => {\n    const nTags = [...tags]\n    nTags.splice(index, 1);\n    setTags(nTags);\n  }\n\n  const handleDate = (event) => {\n    setSelectedDate(event.target.value);\n    if(!event.target.value)\n      setSelectedDateError(true);\n    else\n      setSelectedDateError(false);\n  }\n\n\n\n\n  const handleMenu = (event, album_id) => {\n    setAnchorEl(event.currentTarget);\n    setAlbumId(album_id);\n  }\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  }\n\n  const handleDelete = () => {\n    setAnchorEl(null);\n    setOpenDelete(true);\n  }\n\n  const handleDeleteAccepted = (event) => {\n    albumService.remove(albumId).then(rep => {\n      setOpenDelete(false);\n      toastr.success(\"Album supprimer\",\"Succes\");\n      setAlbums(rep.data);\n      let p = {...props.profile};\n      p.albums = rep.data;\n      props.setProfile(p);\n    }, err => {\n      setOpenDelete(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n  const handleDeleteClose = (event) => {\n    setOpenDelete(false);\n  }\n\n\n\n\n  const handleRestrict = (event) => {\n    setOpenRestrict(true);\n    setLoadRestrict(true);\n    albumService.getBanned(albumId).then(rep => {\n      setUsersAlbum(rep.data);\n      setLoadRestrict(false);\n    }, err => {\n      setLoadRestrict(false);\n      setOpenRestrict(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n  const handleAddBanned = (event, user) => {\n    albumService.addBanned(albumId, user._id).then(rep => {\n      setUsersAlbum(rep.data);\n      toastr.success(\"Utilisateur restrinct\", \"Restriction\");\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleDelBanned = (event, user) => {\n    albumService.delBanned(albumId, user._id).then(rep => {\n      setUsersAlbum(rep.data);\n      toastr.success(\"Utilisateur non restreint\", \"Restriction\");\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n  const handleRestrictClose = (event) => {\n    setOpenRestrict(false);\n  }\n\n\n\n  const handleEdit = (event) => {\n    setOpenEdit(true);\n    setLoadEdit(true);\n    albumService.get(albumId).then(rep => {\n      setLoadEdit(false);\n      setTitle(rep.data.name);\n      setDescription(rep.data.description);\n      setSelectedDate(new Date(rep.data.dateCreated));\n      setTags(rep.data.tags.map(t => t.value));\n    }, err => {\n      setOpenEdit(false);\n      setLoadEdit(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n  const handleEditAccepted = (event) => {\n    setLoadEdit(true);\n    albumService.update(albumId, title, description, selectedDate, tags).then(rep => {\n      setOpenEdit(false);\n      setLoadEdit(false);\n      let pos = albums.map(a => a._id).indexOf(rep.data._id);\n      albums[pos] = rep.data;\n      setAlbums(albums);\n    }, err => {\n      setOpenEdit(false);\n      setLoadEdit(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n  const handleEditClose = (event) => {\n    setOpenEdit(false);\n  }\n\n\n  const isRequested = (user) => {\n    let pos = props.profile.friendRequests_send.map(r => r.to._id).indexOf(user._id);\n    let request = props.profile.friendRequests_send[pos];\n    if(request.vue)\n      return request.accepted;\n    return request.vue;\n  }\n\n\n  React.useEffect(() => {\n    albumService.getMe().then(rep => {\n      setLoading(false);\n      setAlbums(rep.data);\n    }, err => {\n      setLoading(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    });\n  }, [props.profile.albums.length]);\n\n\n\treturn (\n\t\t<Container className={classes.cardGrid} maxWidth={false}>\n      <Grid container spacing={3}>\n        <Grid item>\n          {props.profile.picture !== \"false\" ? (\n              <Avatar alt={props.profile.prenom+\" \"+props.profile.nom} src={\"/images/users/small/\"+props.profile.picture} />\n            ) : (\n              <Avatar><AccountCircle fontSize=\"large\"/></Avatar>\n            )\n          }\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h6\" displayInline>\n            Mes albums\n          </Typography>\n        </Grid>\n      </Grid>\n      {loading ? (\n        <Backdrop className={classes.backdrop} open={true}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        ) : (\n        <Grid container spacing={4}>\n\n          \n{/*          Suppression d'album\n*/}\n\n          <Dialog open={openDelete} onClose={handleDeleteClose} aria-labelledby=\"supression-album\" aria-describedby=\"supression-album-description\">\n            <DialogTitle id=\"supression-album\">{\"Voulez-vous supprimer cet album ?\"}</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"supression-album\">\n                Attention ! La supression de l'album effacera définitivement toutes les photos et fichier enregistrer sur le serveur.\n              </DialogContentText>\n              <DialogActions>\n                <Button onClick={handleDeleteClose} color=\"primary\">Ne rien faire</Button>\n                <Button onClick={handleDeleteAccepted} color=\"primary\">Oui, tout effacer</Button>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n\n{/*          Restriction utilisateur\n*/}\n\n          <Dialog open={openRestrict} onClose={handleRestrictClose} aria-labelledby=\"restrict-album\" aria-describedby=\"restrict-album-description\">\n            <DialogTitle id=\"restrict-album-album\">Restriction d'utilisateur</DialogTitle>\n            <DialogContent>\n              {loadEdit ? (\n                <Backdrop className={classes.backdrop} open={true}>\n                  <CircularProgress color=\"inherit\" />\n                </Backdrop>\n              ) : (\n              (usersAlbum.length === 0 ? (\n                <div>\n                  <DialogContentText id=\"restrict-album\">\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucuns amis à restreindre</Typography>\n                  </DialogContentText>\n                  <DialogActions>\n                    <Button onClick={handleRestrictClose} color=\"primary\">Annuler</Button>\n                  </DialogActions>\n                </div>\n              ) : (\n              <div>\n                <DialogContentText id=\"restrict-album\">\n                  <Grid container spacing={4} className={classes.gridContent}>\n                    {usersAlbum.map((user) => (\n                      <Grid item key={user._id} >\n                        <Card className={classes.cardFriend} \n                              style={user.banned ? {backgroundColor:\"#3f51b5\"} : {borderColor:\"#3f51b5\", borderSize:2}}\n                              onClick={user.banned ? (event) => handleDelBanned(event, user) : (event) => handleAddBanned(event, user)}>\n                          <CardHeader\n                            avatar={\n                              user.validated ? (\n                                (isRequested(user) ? (\n                                  (user.picture !== \"false\" ? (\n                                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                                    <Avatar className={classes.small}><AccountCircle/></Avatar>)\n                                )) : (\n                                    <Badge\n                                        overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                                        badgeContent={<VisibilityIcon fontSize=\"small\" color=\"inherit\" />} >\n                                        {user.picture !== \"false\" ? (\n                                        <Avatar className={classes.small} alt={user.validated ? user.prenom+\" \"+user.nom : user.email} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                                        <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                                    </Badge>\n                              ))) : (\n                                  <Badge\n                                    overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                                    badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n                                    {user.picture !== \"false\" ? (\n                                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                                    <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                                  </Badge>\n                              )\n                            }\n\n                            title={<Typography variant=\"body2\" displayInline>{user.validated ? (user.prenom+\" \"+user.nom) : (user.email)}</Typography>}\n                            subheader={user.validated ? \"Enregistrer\" : \"Non enregistrer\"}\n                          />\n                        </Card>\n                      </Grid>\n                    ))}\n                  </Grid>\n                </DialogContentText>\n                <DialogActions>\n                  <Button onClick={handleRestrictClose} color=\"primary\">Fermer</Button>\n                </DialogActions>\n              </div>\n              )))}\n            </DialogContent>\n          </Dialog>\n\n\n{/*          Modification de l'album\n*/}\n\n          <Dialog open={openEdit} onClose={handleEditClose} aria-labelledby=\"edit-album\" aria-describedby=\"edit-album-description\">\n            <DialogTitle id=\"edit-album-album\">Modifier les information de l'album</DialogTitle>\n            <DialogContent>\n              {loadEdit ? (\n                <Backdrop className={classes.backdrop} open={true}>\n                  <CircularProgress color=\"inherit\" />\n                </Backdrop>\n              ) : (\n              <div>\n                <DialogContentText id=\"supression-album\">\n                    <TextField\n                      error={titleError}\n                      variant=\"outlined\"\n                      margin=\"normal\"\n                      required\n                      fullWidth\n                      id=\"title\"\n                      label=\"Titre de l'album\"\n                      name=\"title\"\n                      autoComplete=\"title\"\n                      onInput={handleTitle}\n                      value={title}\n                      autoFocus\n                    />\n                    <TextField\n                      variant=\"outlined\"\n                      margin=\"normal\"\n                      fullWidth\n                      id=\"description\"\n                      label=\"Desription de l'album\"\n                      name=\"description\"\n                      autoComplete=\"description\"\n                      onInput={handleDescription}\n                      value={description}\n                      multiline\n                      rows={3}\n                    />\n                    <ChipInput\n                      variant=\"outlined\"\n                      margin=\"normal\"\n                      id=\"tags\"\n                      label=\"Tags de l'album\"\n                      name=\"tags\"\n                      autoComplete=\"tags\"\n                      onAdd={(tag) => handleTagsAdd(tag)}\n                      onDelete={(tag, index) => handleTagsDelete(tag, index)}\n                      value={tags}\n                      className={classes.inputTag}\n                    />\n                    &nbsp;\n                    <TextField\n                      error={selectedDateError}\n                      required\n                      variant=\"outlined\"\n                      margin=\"normal\"\n                      id=\"date\"\n                      label=\"Date de l'album\"\n                      type=\"date\"\n                      defaultValue={selectedDate}\n                      className={classes.TextField}\n                      onInput={handleDate}\n                      InputLabelProps={{\n                        shrink: true,\n                      }}\n                    />\n                </DialogContentText>\n                <DialogActions>\n                  <Button onClick={handleEditClose} color=\"primary\">Annuler</Button>\n                  <Button onClick={handleEditAccepted} color=\"primary\">Sauvegarder</Button>\n                </DialogActions>\n              </div>\n              )}\n            </DialogContent>\n          </Dialog>\n\n\n{/*          Menu pour les dialogs\n*/}\n\n          <Menu anchorEl={anchorEl} keepMounted onClose={handleMenuClose} open={open}>\n            <MenuItem key=\"edit\" onClick={handleEdit}>\n              <ListItemIcon>\n                <CreateIcon fontSize=\"small\" />\n              </ListItemIcon>\n              <Typography variant=\"inherit\">Modifier</Typography>\n            </MenuItem>\n            <MenuItem key=\"delete\" onClick={handleDelete}>\n              <ListItemIcon>\n                <DeleteIcon fontSize=\"small\" />\n              </ListItemIcon>\n              <Typography variant=\"inherit\">Supprimer</Typography>\n            </MenuItem>\n            <MenuItem key=\"banned\" onClick={handleRestrict}>\n              <ListItemIcon>\n                <PersonIcon fontSize=\"small\" />\n              </ListItemIcon>\n              <Typography variant=\"inherit\">Limiter l'accès</Typography>\n            </MenuItem>\n          </Menu>\n\n\n{/*          Affichage de mes albums\n*/}\n\n          {albums.map((album) => (\n            <Grid item key={album._id} xs={12} sm={6} md={4} >\n              <Card className={classes.card}>\n                <CardHeader \n                    avatar={\n                      <Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                        <Avatar aria-label=\"recipe\" className={classes.purple}>\n                          {album.name.charAt(0).toUpperCase()}\n                        </Avatar>\n                      </Link>\n                    }\n\n                    action={\n                      <IconButton aria-label=\"settings\" aria-haspopup=\"true\" aria-controls={album._id} onClick={(event) => handleMenu(event, album._id)}>\n                        <MoreVertIcon />\n                      </IconButton>\n                    }\n\n                    title={<Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}><Typography variant=\"h6\" displayInline>{album.name}</Typography></Link>}\n                    subheader={<Typography variant=\"caption\" gutterBottom displayInline>{\"il y a \"+getTimeDiff(album.dateCreated)}</Typography>}\n                />\n                <CardContent className={classNames(classes.cardContent, classes.gridContent)}>\n                  <Scrollbars autoHide autoHeight>\n                    <GridList cellHeight={150}>\n                      {album.photos.map((photo) => (\n                        <GridListTile key={photo._id} cols={1}>\n                          <img src={\"/images/photos/medium/\"+photo.src} alt={photo.src} />\n                        </GridListTile>\n                      ))}\n                    </GridList>\n                  </Scrollbars>\n              </CardContent>\n\n              <CardActions>\n                  <Link to={\"/Album/\"+album._id}>\n                      <Button size=\"small\" color=\"primary\">{album.nbLikes} Likes</Button>\n                  </Link>\n                  <Link to={\"/Album/\"+album._id}>\n                      <Button size=\"small\" color=\"primary\">{album.nbCommentaires} Commentaires</Button>\n                  </Link>\n                  <Link to={\"/Album/\"+album._id}>\n                      <Button size=\"small\" color=\"primary\">{album.nbVues} Vues</Button>\n                  </Link>\n              </CardActions>\n            </Card>\n          </Grid>\n          ))}\n        </Grid>\n      )}\n\t\t</Container>\n\t);\n};","import axios from \"axios\";\nconst headers = {\n  \"Content-Type\": \"application/json\"\n};\n\nexport default {\n\tget: function() {\n        return axios.post('/api/friends/get',{},{headers: headers});\n    },\n\n    create: function(email, message) {\n        return axios.post('/api/friends/create',{email, message},{headers: headers});\n    },\n\n    createMultiple: function(emails) {\n        return axios.post('/api/friends/createMultiple',{emails},{headers: headers});\n    },\n\n    add: function(id) {\n        return axios.post('/api/friends/add',{id},{headers: headers});\n    },\n\n    remove: function(id) {\n        return axios.post('/api/friends/remove',{id},{headers: headers});\n    },\n}","import axios from \"axios\";\nconst headers = {\n  \"X-Requested-With\": \"XMLHttpRequest\",\n  \"Content-Type\": \"application/json\"\n};\n\nexport default {\n    get: async function(id) {\n        return axios.post('/api/requests/get',{id},{headers: headers});\n    },\n\n    getAll: async function() {\n        return axios.post('/api/requests/getAll',{},{headers: headers});\n    },\n\n    add: async function(id) {\n        return axios.post('/api/requests/add',{id},{headers: headers});\n    },\n\n    accepted: async function(id) {\n        return axios.post('/api/requests/accepted',{id},{headers: headers});\n    },\n\n    refused: async function(id) {\n        return axios.post('/api/requests/refused',{id},{headers: headers});\n    },\n\n    remove: async function(id) {\n        return axios.post('/api/requests/remove',{id},{headers: headers});\n    },\n\n    setVue: async function(id) {\n        return axios.post('/api/requests/setVue',{id},{headers: headers});\n    },\n\n    setVueAll: async function() {\n        return axios.post('/api/requests/setVueAll',{},{headers: headers});\n    },\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\n// import Divider from '@material-ui/core/Divider';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\n\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n// import FavoriteIcon from '@material-ui/icons/Favorite';\nimport SearchIcon from '@material-ui/icons/Search';\n\nimport userService from \"../../services/users\";\nimport friendService from \"../../services/friends\";\nimport requestService from \"../../services/requests\";\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // flexGrow: 1,\n    display: 'flex',\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto',\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    paddingTop: '56.25%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  gridContent: {\n    paddingTop: theme.spacing(2),\n  },\n  orange: {\n\tcolor: theme.palette.getContrastText(deepOrange[500]),\n\tbackgroundColor: deepOrange[500],\n  },\n  purple: {\n\tcolor: theme.palette.getContrastText(deepPurple[500]),\n\tbackgroundColor: deepPurple[500],\n  },\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\n\n\n\n\nexport default function(props) {\n\tconst classes = useStyles();\n\n\tconst [loading, setLoading] = React.useState(false);\n\tconst [isEmail, setIsEmail] = React.useState(false);\n\tconst [submit, setSubmit] = React.useState(false);\n\tconst [search, setSearch] = React.useState(\"\");\n\tconst [messageEmail, setMessageEmail] = React.useState(\"\");\n\tconst [users, setUsers] = React.useState([]);\n\n\tconst handleSearch = (event) => {\n\t\tevent.preventDefault();\n\t\tsetSearch(event.target.value);\n\t\tif(search !== \"\"){\n\t\t\tuserService.find(event.target.value).then(rep =>{\n\t\t\t\tsetUsers(rep.data.users);\n\t\t\t\tsetIsEmail(rep.data.isEmail);\n\t\t\t}, err => {\n\t\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t\t\t\ttoastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t\telse\n\t\t\t\t\ttoastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t});\n\t\t};\n\t}\n\n\tconst handleAddFriend = (event, user_id) => {\n\t\tevent.preventDefault();\n\t\tfriendService.add(user_id).then(rep => {\n\t\t\tprops.setProfile(rep.data.user);\n\t\t\ttoastr.success(\"Demande envoyer\", \"Succes\");\n\t\t}, err => {\n\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t\t\ttoastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t\telse\n\t\t\t\ttoastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t})\n\t}\n\n\n\t// const handleRequestAdd = (event, user_id) => {\n\t// \tevent.preventDefault();\n\t// \trequestService.add(user_id).then(rep => {\n\t// \t\tprops.setProfile(rep.data.user);\n\t// \t\ttoastr.success(\"Invitation envoyés\", \"Succes\");\n\t// \t}, err => {\n\t// \t\tif(err.response.status>400 && err.response.status<500)\n\t// \t\t\ttoastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t// \t\telse\n\t// \t\t\ttoastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t// \t})\n\t// }\n\n\n\tconst handleDelFriend = (event, user_id) => {\n\t\tevent.preventDefault();\n\t\tfriendService.remove(user_id).then(rep => {\n\t\t\tprops.setProfile(rep.data.user);\n\t\t\ttoastr.success(\"Amis effacer\", \"Succes\");\n\t\t}, err => {\n\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t\t\ttoastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t\telse\n\t\t\t\ttoastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t})\n\t}\n\n\n\tconst handleMessageMail = (event) => {\n\t\tevent.preventDefault();\n\t\tsetMessageEmail(event.target.value);\n\t}\n\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tsetSubmit(true);\n\t\tfriendService.create(search, messageEmail).then(rep => {\n\t\t\tprops.setProfile(rep.data.user);\n\t\t\tsetSearch(\"\");\n\t\t\tsetSubmit(false);\n\t\t\ttoastr.success(\"Invitation envoyer\", \"Succes\");\n\t\t}, err => {\n\t\t\tsetSubmit(false);\n\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t\t\ttoastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t\telse\n\t\t\t\ttoastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t})\n\t}\n\n\treturn (\n\t\t<Container className={classes.cardGrid} maxWidth={false}>\n\t\t{loading ? (\n\t\t\t<Backdrop className={classes.backdrop} open={true}>\n\t\t\t  <CircularProgress color=\"inherit\" />\n\t\t\t</Backdrop>\n\t\t) : (\n\t\t<div>\n\t\t\t<Card>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<TextField\n\t\t                variant=\"outlined\"\n\t\t                required\n\t\t                fullWidth\n\t\t                autoFocus\n\t\t                id=\"email\"\n\t\t                label=\"Rechercher une personne\"\n\t\t                value={search}\n\t\t                onInput={handleSearch}\n\t\t                name=\"email\"\n\t\t                autoComplete=\"Email, nom, prenom\"\n\t\t                InputProps={{\n\t\t                \tstartAdornment: (<InputAdornment position=\"start\"><SearchIcon color=\"textSecondary\" /></InputAdornment>)\n\t\t                }}\n\t\t            />\n\t\t            <Typography variant=\"body2\" color=\"textSecondary\" align=\"right\" style={{paddingTop:6}}>{users.length>0 ? users.length : \"Aucuns\"} utilisateurs trouvés</Typography>\n\t            </CardContent>\n\t\t    </Card>\n\t\t    {users.length === 0 ? (\n\t\t    \t(isEmail && (\n\t\t    \t\t<div className={classes.gridContent}>\n\t\t    \t\t\t<div className={classes.paper}>\n\t\t    \t\t\t\t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t\t    \t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t            <Grid item xs={12}>\n\t\t\t\t\t\t            \t <TextField\n\t\t\t\t\t\t\t                variant=\"outlined\"\n\t\t\t\t\t\t\t                required\n\t\t\t\t\t\t\t                fullWidth\n\t\t\t\t\t\t\t                id=\"email\"\n\t\t\t\t\t\t\t                label=\"Adresse email\"\n\t\t\t\t\t\t\t                value={search}\n\t\t\t\t\t\t\t                name=\"email\"\n\t\t\t\t\t\t\t                autoComplete=\"Adresse email\"\n\t\t\t\t\t\t\t                disabled={true}\n\t\t\t\t\t\t\t              />\n\t\t\t\t\t\t            </Grid>\n\t\t\t\t\t\t            <Grid item xs={12}>\n\t\t\t\t\t\t            \t <TextField\n\t\t\t\t\t\t\t                variant=\"outlined\"\n\t\t\t\t\t\t\t                required\n\t\t\t\t\t\t\t                fullWidth\n\t\t\t\t\t\t\t                id=\"message\"\n\t\t\t\t\t\t\t                label=\"Message mail\"\n\t\t\t\t\t\t\t                value={messageEmail}\n\t\t\t\t\t\t\t                onInput={handleMessageMail}\n\t\t\t\t\t\t\t                name=\"message\"\n\t\t\t\t\t\t\t                autoComplete=\"Message personnaliser\"\n\t\t\t\t\t\t\t                disabled={submit}\n\t\t\t\t\t\t\t                multiline\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t              />\n\t\t\t\t\t\t            </Grid>\n\t\t\t\t\t\t            <Grid item xs={12}>\n\t\t\t\t\t\t              <Button\n\t\t\t\t\t\t                type=\"submit\"\n\t\t\t\t\t\t                fullWidth\n\t\t\t\t\t\t                variant=\"contained\"\n\t\t\t\t\t\t                color=\"primary\"\n\t\t\t\t\t\t                className={classes.submit}\n\t\t\t\t\t\t              >\n\t\t\t\t\t\t                {submit ? (<CircularProgress color=\"inherit\" />) : \"Envoyer l'invitation\"}\n\t\t\t\t\t\t              </Button>\n\t\t\t\t\t\t            </Grid>\n\t\t\t\t\t\t        </Grid>\n\t\t\t\t\t\t    </form>\n\t\t    \t\t\t</div>\n\t\t    \t\t</div>\n\t\t    \t))\n\t\t    ) : (\n\t\t    \t<Grid container spacing={4} className={classes.gridContent}>\n\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t<Grid item key={user._id} >\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<CardHeader\n\t\t\t\t\t\t\t\t\tavatar={\n\t\t\t\t\t\t\t\t\t\t<Link to={\"/Users/\"+user._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n\t\t\t\t\t\t\t\t\t\t{user.picture !== \"false\" ? ( \n\t\t\t\t\t\t\t\t\t\t\t<Avatar alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture} />\n\t\t\t\t\t\t\t\t\t\t):(\n\t\t\t\t\t\t\t\t\t\t\t<Avatar><AccountCircle fontSize=\"large\"/></Avatar>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\ttitle={<Link to={\"/Users/\"+user._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"body2\" displayInline>{user.validated ? (user.prenom+\" \"+user.nom) : (user.email)}</Typography>\n\t\t\t\t\t\t\t\t\t\t</Link>}\n\t\t\t\t\t\t\t\t\tsubheader={user.validated ? \"Enregistrer\" : \"Non enregistrer\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">{user.albums.length} Albums    {user.friends.length} Amis</Typography>\n\t\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t\t{!props.profile.friends.map(u => u._id).includes(user._id) ? (\n\t\t\t\t\t\t\t\t\t\t(!props.profile.friendRequests_send.map(r => r.to._id).includes(user._id) ? (\n\t\t\t\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" onClick={(event) => handleAddFriend(event, user._id)}>\n\t\t\t\t\t\t\t\t\t\t\t\tDemander comme amis\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" onClick={(event) => handleDelFriend(event, user._id)}>\n\t\t\t\t\t\t\t\t\t\t\t\tAnnuler ma demande d'amis\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" onClick={(event) => handleDelFriend(event, user._id)}>\n\t\t\t\t\t\t\t\t\t\tRetirer comme amis\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</div>\n\t\t)}\n\t\t</Container>\n\t)\n};","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n// import { useParams } from \"react-router-dom\";\n\n// import TextField from '@material-ui/core/TextField';\nimport Container from '@material-ui/core/Container';\n// import Grid from '@material-ui/core/Grid';\n\n// import Card from '@material-ui/core/Card';\n// import CardActions from '@material-ui/core/CardActions';\n// import CardMedia from '@material-ui/core/CardMedia';\n\n// import Avatar from '@material-ui/core/Avatar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n// import AccountCircle from '@material-ui/icons/AccountCircle';\n// import FavoriteIcon from '@material-ui/icons/Favorite';\n\n// import userService from \"../../services/users\";\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // flexGrow: 1,\n    display: 'flex',\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto',\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    paddingTop: '56.25%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  gridContent: {\n    paddingTop: theme.spacing(2),\n  },\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\n\n\n\n\nexport default function(props) {\n\tconst classes = useStyles();\n  // let { id } = useParams();\n\n\tconst [loading, setLoading] = React.useState(true);\n\t// const [user, setUser] = React.useState([]);\n\n\treturn (\n\t\t<Container className={classes.cardGrid} maxWidth={false}>\n\t\t{loading ? (\n\t\t\t<Backdrop className={classes.backdrop} open={true}>\n\t\t  <CircularProgress color=\"inherit\" />\n\t\t</Backdrop>\n\t\t) : (\n      <div>Loaded</div>\n\t\t)}\n    </Container>\n\t)\n};","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useParams, Link } from 'react-router-dom';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\n\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport Chip from '@material-ui/core/Chip';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n\nimport userService from \"../../services/users\";\nimport friendService from \"../../services/friends\";\n\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\n\nimport { Scrollbars } from 'react-custom-scrollbars';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst classNames = require(\"classnames\");\nconst moment = require(\"moment\");\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      maxWidth: 345,\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n    orange: {\n      color: theme.palette.getContrastText(deepOrange[500]),\n      backgroundColor: deepOrange[500],\n    },\n    purple: {\n      color: theme.palette.getContrastText(deepPurple[500]),\n      backgroundColor: deepPurple[500],\n    },\n}));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let seconds = now.diff(last, 'seconds'),\n      minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    if((seconds-minutes*60)>0)\n      return minutes+\" minutes et \"+(seconds-minutes*60)+\" secondes\";\n    else\n      return minutes+\" minutes\";\n  if(seconds>0)\n    return seconds+\" secondes\";\n}\n\n\n\n\nexport default function(props) {\n\tconst classes = useStyles();\n  let { id } = useParams();\n\n\tconst [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState(false);\n  const [errorRequest, setErrorRequest] = React.useState(false);\n  const [isFriend, setIsFriend] = React.useState(false);\n  const [isRequested, setIsRequested] = React.useState(false);\n\tconst [user, setUser] = React.useState([]);\n\n  React.useEffect(() => {\n    setLoading(true);\n    userService.get(id).then(rep => {\n      if(rep.data.error){\n        setUser(rep.data.user);\n        setErrorRequest(rep.data.error);\n      }else{\n        setUser(rep.data);\n        setErrorRequest(false);\n      }\n      setIsFriend(props.profile.friends.map(u => u._id).includes(id))\n      setIsRequested(props.profile.friendRequests_send.map(r => r.to._id).includes(id))\n      setLoading(false);\n    }, err => {\n      setError(\"Erreur \"+err.response.status+\" : \"+err.response.data);\n      setLoading(false);\n    });\n  }, [id]);\n\n\n  const handleAddFriend = (event) => {\n    event.preventDefault();\n    friendService.add(id).then(rep => {\n      props.setProfile(rep.data.user);\n      setIsFriend(props.profile.friends.map(u => u._id).includes(id))\n      setIsRequested(props.profile.friendRequests_send.map(r => r.to._id).includes(id))\n      toastr.success(\"Amis ajouter\", \"Succes\");\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleDelFriend = (event) => {\n    event.preventDefault();\n    friendService.remove(id).then(rep => {\n      props.setProfile(rep.data.user);\n      setIsFriend(props.profile.friends.map(u => u._id).includes(id))\n      setIsRequested(props.profile.friendRequests_send.map(r => r.to._id).includes(id))\n      toastr.success(\"Amis effacer\", \"Succes\");\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n\treturn (\n\t\t<Container className={classes.cardGrid} maxWidth={false}>\n\t\t{loading ? (\n\t\t\t<Backdrop className={classes.backdrop} open={true}>\n\t\t  <CircularProgress color=\"inherit\" />\n\t\t</Backdrop>\n\t\t) : (error ? (\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{error}</Typography>\n    ) : (\n    <div>\n\n      <Grid container spacing={3}>\n        <Grid item>\n          {user.picture !== \"false\" ? (\n              <Avatar className={classes.large} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture} />\n            ) : (\n              <Avatar className={classes.large}><AccountCircle style={{ fontSize: 50 }} /></Avatar>\n            )\n          }\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h6\" displayInline>\n            {user.validated ? (user.prenom+\" \"+user.nom) : user.email}\n          </Typography>\n          <Typography variant=\"caption\" gutterBottom displayInline>\n              {\"il y a \"+getTimeDiff(user.createdAt)}\n          </Typography>\n        </Grid>\n        <Grid item justify=\"center\">\n          {isFriend ? (\n            isRequested ? (\n              <Chip label=\"Annuler l'invitation\" icon={<HighlightOffIcon />} color=\"primary\" variant=\"outlined\" clickable onClick={handleDelFriend} />\n            ) : (\n              <Chip label=\"Retirer de mes amis\" icon={<HighlightOffIcon />} color=\"primary\" variant=\"outlined\" clickable onClick={handleDelFriend} />\n          )) : (\n            <Chip label=\"Envoyer une invitation\" icon={<CheckCircleOutlineIcon />} color=\"primary\" clickable onClick={handleAddFriend} />\n          )}\n        </Grid>\n      </Grid>\n\n      {errorRequest ? (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{errorRequest}</Typography>\n      ) : (\n      <Grid container spacing={4}>\n      {user.albums.map((album) => (\n        <Grid item key={album._id} xs={12} sm={6} md={4} >\n          <Card className={classes.card}>\n            <CardHeader \n                avatar={\n                  <Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                    <Avatar aria-label=\"recipe\" className={classes.purple}>\n                      {album.name.charAt(0).toUpperCase()}\n                    </Avatar>\n                  </Link>\n                }\n\n                title={<Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}><Typography variant=\"h6\" displayInline>{album.name}</Typography></Link>}\n                subheader={<Typography variant=\"caption\" gutterBottom displayInline>{\"il y a \"+getTimeDiff(album.dateCreated)}</Typography>}\n            />\n            <CardContent className={classNames(classes.cardContent, classes.gridContent)}>\n              <Scrollbars autoHide autoHeight>\n                <GridList cellHeight={150}>\n                  {album.photos.map((photo) => (\n                    <GridListTile key={photo._id} cols={1}>\n                      <img src={\"/images/photos/medium/\"+photo.src} alt={photo.src} />\n                    </GridListTile>\n                  ))}\n                </GridList>\n              </Scrollbars>\n          </CardContent>\n\n          <CardActions>\n              <Link to={\"/Album/\"+album._id}>\n                  <Button size=\"small\" color=\"primary\">{album.nbLikes} Likes</Button>\n              </Link>\n              <Link to={\"/Album/\"+album._id}>\n                  <Button size=\"small\" color=\"primary\">{album.nbCommentaires} Commentaires</Button>\n              </Link>\n              <Link to={\"/Album/\"+album._id}>\n                  <Button size=\"small\" color=\"primary\">{album.nbVues} Vues</Button>\n              </Link>\n          </CardActions>\n        </Card>\n        </Grid>\n        ))}\n        </Grid>\n      )}\n      </div>\n\t\t))}\n    </Container>\n\t)\n};","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\n// import TextField from '@material-ui/core/TextField';\n// import InputAdornment from '@material-ui/core/InputAdornment';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\n// import Divider from '@material-ui/core/Divider';\nimport Badge from '@material-ui/core/Badge';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\n\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport EmailIcon from '@material-ui/icons/Email';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\n\n// import userService from \"../../services/users\";\nimport friendService from \"../../services/friends\";\nimport requestService from \"../../services/requests\";\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // flexGrow: 1,\n    display: 'flex',\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto',\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    paddingTop: '56.25%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  gridContent: {\n    paddingTop: theme.spacing(2),\n  },\n  orange: {\n\tcolor: theme.palette.getContrastText(deepOrange[500]),\n\tbackgroundColor: deepOrange[500],\n  },\n  purple: {\n\tcolor: theme.palette.getContrastText(deepPurple[500]),\n\tbackgroundColor: deepPurple[500],\n  },\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\n\n\nexport default function(props) {\n  const classes = useStyles();\n\n  const [loading, setLoading] = React.useState(true);\n  const [friends, setFriends] = React.useState([]);\n  const [requestSend, setRequestSend] = React.useState([]);\n  const [requestReceive, setRequestReceive] = React.useState([]);\n  const [newRequestReceive, setNewRequestReceive] = React.useState(0);\n  const [tabValue, setTabValue] = React.useState(0);\n\n  React.useEffect(() => {\n    requestService.getAll().then(rep => {\n      setLoading(false);\n      setFriends(rep.data.friends);\n      setRequestReceive(rep.data.receive);\n      setRequestSend(rep.data.send);\n      if(rep.data.receive.length > 0)\n        setNewRequestReceive(rep.data.receive.filter(r => !r.vue).length);\n      props.setNewRequest(rep.data.receive.filter(r => !r.vue).length);\n    }, err => {\n      setLoading(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }, [0]);\n\n  const handleDelFriend = (event, user_id) => {\n    event.preventDefault();\n    friendService.remove(user_id).then(rep => {\n      props.setProfile(rep.data.user);\n      toastr.success(\"Amis effacer\", \"Succes\");\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleAcceptedRequest = (event, request) => {\n    event.preventDefault();\n    requestService.accepted(request._id).then(rep => {\n      requestService.getAll().then(rep => {\n        setFriends(rep.data.friends);\n        setRequestSend(rep.data.send);\n        setRequestReceive(rep.data.receive);\n        if(rep.data.receive.length > 0)\n          setNewRequestReceive(rep.data.receive.filter(r => !r.vue).length);\n        props.setNewRequest(rep.data.receive.filter(r => !r.vue).length);\n        let p = {...props.profile}\n        p.friends = rep.data.friends;\n        p.friendRequests_receive = requestReceive;\n        p.friendRequests_send = requestSend;\n        props.setProfile(p);\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      })\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleRefusedRequest = (event, request) => {\n    event.preventDefault();\n    requestService.refused(request._id).then(rep => {\n      requestService.getAll().then(rep => {\n        setFriends(rep.data.friends);\n        setRequestSend(rep.data.send);\n        setRequestReceive(rep.data.receive);\n        if(rep.data.receive.length > 0)\n          setNewRequestReceive(rep.data.receive.filter(r => !r.vue).length);\n        props.setNewRequest(rep.data.receive.filter(r => !r.vue).length);\n        let p = {...props.profile}\n        p.friends = rep.data.friends;\n        p.friendRequests_receive = requestReceive;\n        p.friendRequests_send = requestSend;\n        props.setProfile(p);\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      })\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleRemoveRequest = (event, request) => {\n    event.preventDefault();\n    requestService.remove(request._id).then(rep => {\n      requestService.getAll().then(rep => {\n        setFriends(rep.data.friends);\n        setRequestSend(rep.data.send);\n        setRequestReceive(rep.data.receive);\n        if(rep.data.receive.length > 0)\n          setNewRequestReceive(rep.data.receive.filter(r => !r.vue).length);\n        props.setNewRequest(rep.data.receive.filter(r => !r.vue).length);\n        let p = {...props.profile}\n        p.friends = friends;\n        p.friendRequests_receive = requestReceive;\n        p.friendRequests_send = requestSend;\n        props.setProfile(p);\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      })\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleChangeTab = (event, newValue) => {\n    setTabValue(newValue);\n    // if(newValue===1 && newRequestReceive > 0){\n    //   requestService.setVueAll().then(rep => {\n    //     setRequestReceive(rep.data);\n    //   }, err => {\n    //     if(err.response.status>400 && err.response.status<500)\n    //       toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n    //     else\n    //       toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    //   });\n    // }\n  }\n\n\n  const isRequested = (user) => {\n    if(props.profile === null || user === null || !props.profile || !user)\n      return false;\n    let pos = props.profile.friendRequests_send.map(r => r.to._id).indexOf(user._id);\n    if(pos !== -1){\n      let request = props.profile.friendRequests_send[pos];\n      if(request.vue)\n        return request.accepted;\n      return request.vue;\n    }else\n      return true;\n  }\n\n\n  function TabPanel(props) {\n    const { children, value, index, ...other } = props;\n    return (\n      <div\n        role=\"tabpanel\"\n        hidden={value !== index}\n        id={`scrollable-auto-tabpanel-${index}`}\n        aria-labelledby={`scrollable-auto-tab-${index}`}\n        {...other}\n      >{children}</div>\n    )\n  }\n\n\n  return (\n    <Container className={classes.cardGrid} maxWidth={false}>\n    {loading ? (\n      <Backdrop className={classes.backdrop} open={true}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n    ) : (\n    <div>\n      <Grid container spacing={3}>\n        <Grid item>\n          {props.profile.picture !== \"false\" ? (\n              <Avatar alt={props.profile.prenom+\" \"+props.profile.nom} src={\"/images/users/small/\"+props.profile.picture} />\n            ) : (\n              <Avatar><AccountCircle fontSize=\"large\"/></Avatar>\n            )\n          }\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h6\" displayInline>\n            Mes amis\n          </Typography>\n        </Grid>\n      </Grid>\n\n      <Tabs value={tabValue} \n            indicatorColor=\"primary\" \n            textColor=\"primary\" \n            onChange={handleChangeTab} \n            centered \n            aria-label=\"disabled tabs example\">\n        <Tab label=\"Mes amis\" />\n\n          {props.profile.friendRequests_receive.length>0 ? (\n            <Tab label={\"Mes invitations reçus (\"+props.profile.friendRequests_receive.length+\")\"} />\n          ) : (\n            <Tab label=\"Mes invitations reçus\" />\n          )}\n\n          {props.profile.friendRequests_send.length>0 ? (\n            <Tab label={\"Mes invitations envoyés (\"+props.profile.friendRequests_send.length+\")\"} />\n          ) : (\n            <Tab label=\"Mes invitations envoyés\" />\n          )}\n      </Tabs>\n\n      <TabPanel value={tabValue} index={0}>\n        {props.profile.friends.length === 0 && (\n          <div>\n          <br /><br />\n          <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucuns amis</Typography>\n          </div>\n        )}\n        <Grid container spacing={4} className={classes.gridContent}>\n        {friends.map((user) => (\n              <Grid item key={user._id} >\n                <Card>\n                  <CardHeader\n                    avatar={\n                      user.validated ? (\n                        (isRequested(user) ? (\n                          (user.picture !== \"false\" ? (\n                            <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                            <Avatar className={classes.small}><AccountCircle/></Avatar>)\n                        )) : (\n                            <Badge\n                                overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                                badgeContent={<VisibilityIcon fontSize=\"small\" color=\"inherit\" />} >\n                                {user.picture !== \"false\" ? (\n                                <Avatar className={classes.small} alt={user.validated ? user.prenom+\" \"+user.nom : user.email} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                                <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                            </Badge>\n                      ))) : (\n                          <Badge\n                            overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                            badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n                            {user.picture !== \"false\" ? (\n                            <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                            <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                          </Badge>\n                      )\n                  }\n\n                    title={<Link to={\"/Users/\"+user._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                        <Typography variant=\"body2\" displayInline>{user.validated ? (user.prenom+\" \"+user.nom) : (user.email)}</Typography>\n                      </Link>}\n                    subheader={user.validated ? \"Enregistrer\" : \"Non enregistrer\"}\n                  />\n                  <CardContent>\n                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">{user.albums.length} Albums    {user.friends.length} Amis</Typography>\n                  </CardContent>\n                  <CardActions>\n                      <Button size=\"small\" color=\"primary\" onClick={(event) => handleDelFriend(event, user._id)}>\n                      Retirer de mes amis\n                      </Button>\n                  </CardActions>\n                </Card>\n              </Grid>\n            ))}\n        </Grid>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={1}>\n        {requestReceive.length === 0 && (\n          <div>\n          <br /><br />\n          <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucunes invitations reçus</Typography>\n          </div>\n        )}\n        <Grid container spacing={4} className={classes.gridContent}>\n          {requestReceive.map((request) => {\n            const user = request.from;\n            return (\n            <Grid item key={user._id} >\n                <Card>\n                  <CardHeader\n                    avatar={\n                      user.picture !== \"false\" ? (\n                        <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                        <Avatar className={classes.small}><AccountCircle/></Avatar>)\n                  }\n\n                    title={<Link to={\"/Users/\"+user._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                        <Typography variant=\"body2\" displayInline>{user.validated ? (user.prenom+\" \"+user.nom) : (user.email)}</Typography>\n                      </Link>}\n                    subheader={user.validated ? \"Enregistrer\" : \"Non enregistrer\"}\n                  />\n                  <CardContent>\n                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">{user.albums.length} Albums    {user.friends.length} Amis</Typography>\n                  </CardContent>\n                  <CardActions>\n                      <Button size=\"small\" color=\"primary\" onClick={(event) => handleAcceptedRequest(event, request)}>\n                      Accepter\n                      </Button>\n                      <Button size=\"small\" color=\"secondary\" onClick={(event) => handleRefusedRequest(event, request)}>\n                      Refuser\n                      </Button>\n                  </CardActions>\n                </Card>\n              </Grid>\n            )})}\n        </Grid>\n      </TabPanel>\n\n\n      <TabPanel value={tabValue} index={2}>\n        {requestSend.length === 0 && (\n          <div>\n          <br /><br />\n          <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucunes invitations envoyés</Typography>\n          </div>\n        )}\n        <Grid container spacing={4} className={classes.gridContent}>\n          {requestSend.map((request) => {\n            let user = request.to;\n            return (\n            <Grid item key={user._id} >\n                <Card>\n                  <CardHeader\n                    avatar={\n                      user.validated ? (\n                          (user.picture !== \"false\" ? (\n                            <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                            <Avatar className={classes.small}><AccountCircle/></Avatar>)\n                      )) : (\n                          <Badge\n                            overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                            badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n                            {user.picture !== \"false\" ? (\n                            <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/users/small/\"+user.picture}/> ) : ( \n                            <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                          </Badge>\n                      )\n                  }\n\n                    title={<Link to={\"/Users/\"+user._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                        <Typography variant=\"body2\" displayInline>{user.validated ? (user.prenom+\" \"+user.nom) : (user.email)}</Typography>\n                      </Link>}\n                    subheader={user.validated ? \"Enregistrer\" : \"Non enregistrer\"}\n                  />\n                  <CardContent>\n                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">{user.albums.length} Albums    {user.friends.length} Amis</Typography>\n                  </CardContent>\n                  <CardActions>\n                      <Button size=\"small\" color=\"secondary\" onClick={(event) => handleRemoveRequest(event, request)}>\n                      Annuler\n                      </Button>\n                  </CardActions>\n                </Card>\n              </Grid>\n          )})}\n        </Grid>\n      </TabPanel>\n    </div>\n  )}\n    </Container>\n  )\n};","import React from 'react';\nimport { useParams, Link } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\n\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\n\nimport TextField from '@material-ui/core/TextField';\nimport Divider from '@material-ui/core/Divider';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\n// import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport photosService from '../services/photos';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst moment = require(\"moment\");\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%', // 16:9\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    paddingTop: theme.spacing(2),\n    position:'relative',\n  },\n  cardMedia: {\n    paddingTop: '56.25%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(8),\n  },\n  \n  inline: {\n    display: 'inline',\n  },\n  overlay: {\n    position: 'absolute',\n    top: '2%',\n    left: '94%',\n  },\n  listCommentaires:{\n    paddingTop: theme.spacing(7),\n  },\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let seconds = now.diff(last, 'seconds'),\n      minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    if((seconds-minutes*60)>0)\n      return minutes+\" minutes et \"+(seconds-minutes*60)+\" secondes\";\n    else\n      return minutes+\" minutes\";\n  if(seconds>0)\n    return seconds+\" secondes\";\n}\n\n\n\nexport default function(props) {\n  const classes = useStyles();\n  let { id } = useParams();\n\n  const [loading, setLoading] = React.useState(true);\n  const [banned, setBanned] = React.useState(false);\n  const [error, setError] = React.useState(false);\n  const [photo, setPhoto] = React.useState(false);\n  const [nextPhoto, setNextPhoto] = React.useState(false);\n  const [commentaires, setCommentaires] = React.useState(false);\n  const [commentaire, setCommentaire] = React.useState(\"\");\n  const [submit, setSubmit] = React.useState(false);\n  const [IsLiked, setIsLiked] = React.useState(false);\n\n\n  React.useEffect(() => {\n    setLoading(true);\n    setError(false);\n    setBanned(false);\n    if(!id){\n      setLoading(false);\n      setError(\"Pas d'identifiant\");\n    }else{\n      photosService.get(id).then(rep => {\n        setBanned(rep.data.photo.album.isBanned);\n        setPhoto(rep.data.photo);\n        setNextPhoto(rep.data.next);\n        setCommentaires(rep.data.photo.commentaires);\n        setIsLiked(rep.data.photo.likes.map(l => l.author._id).includes(props.profile._id))\n        setLoading(false);\n      }, err => {\n        setError(\"Erreur \"+err.response.status+\" : \"+err.response.data);\n        setLoading(false);\n      })\n    }\n  }, [id]);\n\n\n  const handleComment = (event) => {\n    setCommentaire(event.target.value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setSubmit(true);\n    photosService.addComment(commentaire, id).then(rep => {\n      setCommentaires(rep.data);\n      setCommentaire(\"\");\n      setSubmit(false);\n    }, err => {\n      setSubmit(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleDeleteCom = (event, comment_id) => {\n    event.preventDefault();\n    photosService.delComment(comment_id, id).then(rep => {\n      setCommentaires(rep.data)\n    }, err => {\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n\n  const handleLiked = (event) => {\n    if(IsLiked){\n      photosService.delLike(id).then(rep => {\n        setBanned(rep.data.photo.album.isBanned);\n        setPhoto(rep.data.photo);\n        setNextPhoto(rep.data.next);\n        setCommentaires(rep.data.photo.commentaires);\n        setIsLiked(rep.data.photo.likes.map(l => l.author._id).includes(props.profile._id))\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      });\n    }else{\n      photosService.addLike(id).then(rep => {\n        setBanned(rep.data.photo.album.isBanned);\n        setPhoto(rep.data.photo);\n        setNextPhoto(rep.data.next);\n        setCommentaires(rep.data.photo.commentaires);\n        setIsLiked(rep.data.photo.likes.map(l => l.author._id).includes(props.profile._id))\n      }, err => {\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      });\n    }\n  }\n\n\n  return (\n    <Container className={classes.cardGrid} maxWidth={false}>\n      {loading ? (\n        <Backdrop className={classes.backdrop} open={true}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        ) : (error ? (\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">{error}</Typography>\n        ) : (banned ? (\n              <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Vous n'avez pas acces à cet album</Typography>\n        ) : (\n      <Grid container spacing={3}>\n        <Grid item key={props.id} xs={12} sm={9}>\n\n              <Grid container spacing={3}>\n                <Grid item>\n                  {photo.author.picture !== \"false\" ? (\n                      <Avatar className={classes.large} alt={photo.author.prenom+\" \"+photo.author.nom} src={\"/images/users/small/\"+photo.author.picture} />\n                    ) : (\n                      <Avatar className={classes.large}><AccountCircle style={{ fontSize: 50 }} /></Avatar>\n                    )\n                  }\n                </Grid>\n                <Grid item>\n                  <Typography variant=\"h6\" displayInline>\n                    {photo.album.name}\n                  </Typography>\n                  <Typography variant=\"caption\" gutterBottom displayInline>\n                      {\"Il y a \"+getTimeDiff(photo.album.dateCreated)}\n                  </Typography>\n                </Grid>\n              </Grid>\n          {/* <Divider /> */}\n          <Card className={classes.card}>\n            <Link to={\"/Photos/\"+nextPhoto} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n              <CardMedia\n                className={classes.cardMedia}\n                image={\"/images/photos/original/\"+photo.src}\n              />\n            </Link>\n            <IconButton aria-label={photo._id} className={classes.overlay} onClick={handleLiked}>\n              {IsLiked ? (\n                <FavoriteIcon style={{ fontSize: 40 }} color=\"secondary\" />\n              ) : (\n                <FavoriteBorderIcon style={{ fontSize: 40, color:\"white\" }} />\n              )}\n            </IconButton>\n          </Card>\n        </Grid>\n        <Grid item key={props.id} xs={12} sm={3}>\n          <Typography variant=\"subtitle1\" gutterBottom className={classes.listCommentaires}>\n              ({commentaires.length}) commentaires\n          </Typography>\n          <Divider />\n          <List>\n            {commentaires.map((comment) => (\n              <React.Fragment>\n                <ListItem alignItems=\"flex-start\">\n                  <ListItemAvatar>\n                    {comment.author.picture !== \"false\" ? (\n                      <Avatar alt={comment.author.prenom+\" \"+comment.author.nom} src={\"/images/users/small/\"+comment.author.picture} />\n                    ) : (\n                      <Avatar><AccountCircle fontSize=\"large\"/></Avatar>\n                    )}\n                  </ListItemAvatar>\n                  <ListItemText secondary={\n                    <React.Fragment>\n                      <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                        {comment.author.prenom+\" \"+comment.author.nom}\n                      </Typography>\n                      {\" — \"+comment.text}\n                      <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(comment.updatedAt)}</Typography>\n                    </React.Fragment>\n                  } />\n                  {props.profile._id === comment.author._id && (\n                    <ListItemSecondaryAction size=\"small\" onClick={(event) => handleDeleteCom(event, comment._id)} key={comment._id}>\n                      <IconButton edge=\"end\" aria-label=\"delete\">\n                        <DeleteIcon />\n                      </IconButton>\n                    </ListItemSecondaryAction>  \n                  )}\n                </ListItem>\n                <Divider variant=\"inset\" component=\"li\" />\n              </React.Fragment>\n            ))}\n            <ListItem alignItems=\"flex-start\">\n              <Grid container spacing={1}>\n                <Grid item>\n                  {props.profile.picture !== \"false\" ? (\n                    <Avatar alt={props.profile.prenom+\" \"+props.profile.nom} src={\"/images/users/small/\"+props.profile.picture} />\n                  ) : (\n                    <Avatar><AccountCircle fontSize=\"large\"/></Avatar>\n                  )}\n                </Grid>\n                <Grid item>\n                  <form onSubmit={handleSubmit}>\n                    <TextField id=\"input-with-icon-grid\" label=\"Commentaire\" fullWidth \n                      disabled={submit}\n                      value={commentaire} \n                      onChange={handleComment} />\n                  </form>\n                </Grid>\n              </Grid>\n            </ListItem>\n          </List>\n        </Grid>\n      </Grid>\n      )))}\n    </Container>\n\n  );\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useParams, useHistory, Link } from 'react-router-dom';\nimport { Collapse } from '@material-ui/core';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n// import GridListTileBar from '@material-ui/core/GridListTileBar';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n\nimport { Scrollbars } from 'react-custom-scrollbars';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nimport albumService from \"../services/albums\";\nimport userService from \"../services/users\";\n\nconst classNames = require(\"classnames\");\nconst moment = require(\"moment\");\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      maxWidth: 345,\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    inline: {\n      display: 'inline',\n    },\n    cPointer: {\n        cursor: 'pointer'\n    },\n    mainFeaturedPost: {\n        position: 'relative',\n        backgroundColor: theme.palette.grey[800],\n        color: theme.palette.common.white,\n        marginBottom: theme.spacing(4),\n        backgroundImage: 'url(https://source.unsplash.com/random)',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n      },\n    overlay: {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        right: 0,\n        left: 0,\n        backgroundColor: 'rgba(0,0,0,.3)',\n    },\n    mainFeaturedPostContent: {\n        position: 'relative',\n        padding: theme.spacing(3),\n        [theme.breakpoints.up('md')]: {\n          padding: theme.spacing(6),\n          paddingRight: 0,\n        },\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n  }));\n\n\nfunction getTimeDiff(dateCreated){\n  let now = moment(Date.now());\n  let last = moment(dateCreated);\n  let seconds = now.diff(last, 'seconds'),\n      minutes = now.diff(last, 'minutes'),\n      hours = now.diff(last, 'hours'),\n      days = now.diff(last, 'days'),\n      weeks = now.diff(last, 'weeks'),\n      months = now.diff(last, 'months'),\n      years = now.diff(last, 'years');\n  if(years>0){\n    if((months-years*12)>0)\n      return years+\" ans et \"+(months-years*12)+\" mois\";\n    else\n      return years+\" ans\";\n  }\n  if(months>0){\n    if((days-months*30)>0)\n      return months+\" mois et \"+(days-months*30)+\" jours\";\n    else\n      return months+\" mois\";\n  }\n  if(weeks>0){\n    if((days-weeks*7)>0)\n      return weeks+\" semaines et \"+(days-weeks*7)+\" jours\";\n    else\n      return weeks+\" semaines\";\n  }\n  if(days>0){\n    if((hours-days*24)>0)\n      return days+\" jours et \"+(hours-days*24)+\" heures\";\n    else\n      return days+\" jours\";\n  }\n  if(hours>0){\n    if((minutes-hours*60)>0)\n      return hours+\" heures et \"+(minutes-hours*60)+\" minutes\";\n    else\n      return hours+\" heures\"\n  }\n  if(minutes>0)\n    if((seconds-minutes*60)>0)\n      return minutes+\" minutes et \"+(seconds-minutes*60)+\" secondes\";\n    else\n      return minutes+\" minutes\";\n  if(seconds>0)\n    return seconds+\" secondes\";\n}\n\n\nexport default function(props){\n    const classes = useStyles();\n    const history = useHistory();\n    const { userId, invitId } = useParams();\n\n    const [loading, setLoading] = React.useState(true);\n    const [openCommentaires, setOpenCommentaires] = React.useState(false);\n    const [openLikes, setOpenLikes] = React.useState(false);\n    const [albums, setAlbums] = React.useState([]);\n    const [commentaires, setCommentaires] = React.useState([]);\n    const [likes, setLikes] = React.useState([]);\n\n    React.useEffect(() => {\n\n        if(invitId){\n            userService.getInvitation(invitId).then(rep => {\n                toastr.success(\"Invitation vérifier et validé\", \"Invitation\");\n            }, err => {\n                if(err.response.status>400 && err.response.status<500)\n                  toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n                else\n                  toastr.error(err.response.data, \"Erreur \" + err.response.status);\n            })\n        }else if(userId){\n            userService.validEmail(userId).then(rep => {\n                toastr.success(\"Email vérifier et validé\", \"Vérification\");\n            }, err => {\n                if(err.response.status>400 && err.response.status<500)\n                  toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n                else\n                  toastr.error(err.response.data, \"Erreur \" + err.response.status);\n            })\n        }\n\n\n        albumService.getDashboard().then(rep => {\n            setAlbums(rep.data.albums);\n            setCommentaires(rep.data.commentaires);\n            setLikes(rep.data.likes);\n            setLoading(false);\n        }, err => {\n            setLoading(false);\n            if(err.response.status>400 && err.response.status<500)\n              toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n            else\n              toastr.error(err.response.data, \"Erreur \" + err.response.status);\n        })\n    }, [0]);\n\n\n    const handleOpenCommentaires = () => {\n        setOpenCommentaires(!openCommentaires);\n    }\n\n    const handleOpenLikes = () => {\n        setOpenLikes(!openLikes);\n    }\n\n    \n    return (\n        <Container className={classes.cardGrid} maxWidth={false}>\n            {loading ? (\n                <Backdrop className={classes.backdrop} open={true}>\n                  <CircularProgress color=\"inherit\" />\n                </Backdrop>\n            ) : (\n            <Grid container spacing={3}>\n                <Grid item key=\"listAlbums\" xs={12} sm={9}>\n                    <Typography variant=\"h6\" gutterBottom>\n                            Derniers albums\n                    </Typography>\n                    <Divider />\n                    <br />\n                    {albums.length === 0 && (\n                        <div>\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucuns albums</Typography>\n                            <Link to=\"/Album/Create\" style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                                <Button color=\"primary\" variant=\"contained\" startIcon={<PhotoCamera />}>Créer un album</Button>\n                            </Link>\n                        </div>\n                    )}\n                    <Grid container spacing={4}>\n                        {albums.map((album) => (\n                            <Grid item key={album.id} xs={12} sm={6} md={4} >\n                                <Card className={classes.card}>\n                                    <CardHeader \n                                        avatar={\n                                          <Link to={\"/Users/\"+album.author._id} style={{ color:\"inherit\", textDecoration:\"none\" }}>\n                                            {album.author.picture !== \"false\" ? (\n                                              <Avatar alt={album.author.prenom+\" \"+album.author.nom} src={\"/images/users/small/\"+album.author.picture}/> ) : ( \n                                              <Avatar><AccountCircle/></Avatar>)}\n                                          </Link>\n                                        }\n\n                                        title={<Link to={\"/Album/\"+album._id} style={{ color:\"inherit\", textDecoration:\"none\" }}><Typography variant=\"h6\" displayInline>{album.name}</Typography></Link>}\n                                        subheader={<Typography variant=\"caption\" gutterBottom displayInline>{\"il y a \"+getTimeDiff(album.dateCreated)}</Typography>}\n                                    />\n                                    <CardContent className={classNames(classes.cardContent, classes.gridContent)}>\n                                        <Scrollbars autoHide autoHeight>\n                                            <GridList cellHeight={150}>\n                                                <GridListTile key=\"Subheader\" cols={2} style={{ height: 'auto' }}>\n                                                    <ListSubheader component=\"div\">{album.title}</ListSubheader>\n                                                </GridListTile>\n                                                {album.photos.map((photo) => (\n                                                    <GridListTile key={photo._id} cols={1} className={classes.photoClick}>\n                                                        <img src={\"/images/photos/medium/\"+photo.src} alt={photo.src} />\n                                                    </GridListTile>\n                                                ))}\n                                            </GridList>\n                                        </Scrollbars>\n                                    </CardContent>\n                                    <CardActions>\n                                        <Link to={\"/Album/\"+album._id}>\n                                          <Button size=\"small\" color=\"primary\">{album.nbLikes} Likes</Button>\n                                        </Link>\n                                        <Link to={\"/Album/\"+album._id}>\n                                          <Button size=\"small\" color=\"primary\">{album.nbCommentaires} Commentaires</Button>\n                                        </Link>\n                                        <Link to={\"/Album/\"+album._id}>\n                                          <Button size=\"small\" color=\"primary\">{album.nbVues} Vues</Button>\n                                        </Link>\n                                    </CardActions>\n                                </Card>\n                            </Grid>\n                        ))}\n                    </Grid>\n                </Grid>\n                <Grid item key=\"ListCommetairesLikes\" xs={12} sm={3}>\n                    <Typography variant=\"h6\" gutterBottom>\n                        Derniers commentaires\n                    </Typography>\n                    <Divider />\n                    {commentaires.length === 0 && (\n                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucuns commentaires</Typography>\n                    )}\n                    {commentaires.length > 5 ? (\n                        <div>\n                            <List>\n                                {commentaires.slice(0,5).map((comment) => (\n                                    <div key={comment._id}>\n                                        <ListItem alignItems=\"flex-start\">\n                                        <ListItemAvatar>\n                                            {comment.author.picture !== \"false\" ? (\n                                            <Avatar alt={comment.author.validated ? comment.author.prenom+\" \"+comment.author.nom : comment.author.email} src={\"/images/users/small/\"+comment.author.picture}/> ) : ( \n                                            <Avatar><AccountCircle/></Avatar>)}\n                                        </ListItemAvatar>\n                                        <ListItemText secondary={\n                                            <div>\n                                            <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                                                {comment.author.prenom+\" \"+comment.author.nom}\n                                            </Typography>\n                                            {\" — \"+comment.text}\n                                            <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(comment.createdAt)}</Typography>\n                                            </div>\n                                        } />\n                                        </ListItem>\n                                        <Divider variant=\"inset\" component=\"li\" />\n                                    </div>\n                                ))}\n                            </List>\n                            <Collapse in={openCommentaires} timeout=\"auto\" unmountOnExit>\n                                <List>\n                                    {commentaires.slice(5).map((comment) => (\n                                        <div key={comment._id}>\n                                            <ListItem alignItems=\"flex-start\">\n                                            <ListItemAvatar>\n                                                {comment.author.picture !== \"false\" ? (\n                                                <Avatar alt={comment.author.validated ? comment.author.prenom+\" \"+comment.author.nom : comment.author.email} src={\"/images/users/small/\"+comment.author.picture}/> ) : ( \n                                                <Avatar><AccountCircle/></Avatar>)}\n                                            </ListItemAvatar>\n                                            <ListItemText secondary={\n                                                <div>\n                                                <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                                                    {comment.author.prenom+\" \"+comment.author.nom}\n                                                </Typography>\n                                                {\" — \"+comment.text}\n                                                <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(comment.createdAt)}</Typography>\n                                                </div>\n                                            } />\n                                            </ListItem>\n                                            <Divider variant=\"inset\" component=\"li\" />\n                                        </div>\n                                    ))}\n                                </List>\n                            </Collapse>\n                            <ListItem button onClick={handleOpenCommentaires}>\n                                {openCommentaires ? <ExpandLess /> : <ExpandMore />}\n                                <ListItemText primary={openCommentaires ? \"Voir moins\" : \"Voir plus\"} />\n                            </ListItem>\n                        </div>\n                    ) : (\n                    <List>\n                        {commentaires.map((comment) => (\n                        <div key={comment._id}>\n                            <ListItem alignItems=\"flex-start\">\n                            <ListItemAvatar>\n                                {comment.author.picture !== \"false\" ? (\n                                <Avatar alt={comment.author.validated ? comment.author.prenom+\" \"+comment.author.nom : comment.author.email} src={\"/images/users/small/\"+comment.author.picture}/> ) : ( \n                                <Avatar><AccountCircle/></Avatar>)}\n                            </ListItemAvatar>\n                            <ListItemText secondary={\n                                <div>\n                                <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                                    {comment.author.prenom+\" \"+comment.author.nom}\n                                </Typography>\n                                {\" — \"+comment.text}\n                                <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(comment.createdAt)}</Typography>\n                                </div>\n                            } />\n                            </ListItem>\n                            <Divider variant=\"inset\" component=\"li\" />\n                        </div>\n                        ))}\n                    </List>\n                    )}\n\n                    <Typography variant=\"h6\" gutterBottom>\n                        Derniers likes\n                    </Typography>\n                    <Divider />\n                    {likes.length === 0 && (\n                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">Aucuns likes</Typography>\n                    )}\n                    {likes.length > 5 ? (\n                        <div>\n                            <List>\n                                {likes.slice(0,5).map((like) => (\n                                <div key={like._id}>\n                                    <ListItem alignItems=\"flex-start\">\n                                    <ListItemAvatar>\n                                        {like.author.picture !== \"false\" ? (\n                                        <Avatar alt={like.author.validated ? like.author.prenom+\" \"+like.author.nom : like.author.email} src={\"/images/users/small/\"+like.author.picture}/> ) : ( \n                                        <Avatar><AccountCircle/></Avatar>)}\n                                    </ListItemAvatar>\n                                    <ListItemText secondary={\n                                        <div>\n                                        <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                                            {like.author.prenom+\" \"+like.author.nom}\n                                        </Typography>\n                                        <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(like.createdAt)}</Typography>\n                                        </div>\n                                    } />\n                                    </ListItem>\n                                    <Divider variant=\"inset\" component=\"li\" />\n                                </div>\n                                ))}\n                            </List>\n                            <Collapse in={openLikes} timeout=\"auto\" unmountOnExit>\n                                <List>\n                                    {likes.slice(5).map((like) => (\n                                    <div key={like._id}>\n                                        <ListItem alignItems=\"flex-start\">\n                                        <ListItemAvatar>\n                                            {like.author.picture !== \"false\" ? (\n                                            <Avatar alt={like.author.validated ? like.author.prenom+\" \"+like.author.nom : like.author.email} src={\"/images/users/small/\"+like.author.picture}/> ) : ( \n                                            <Avatar><AccountCircle/></Avatar>)}\n                                        </ListItemAvatar>\n                                        <ListItemText secondary={\n                                            <div>\n                                            <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                                                {like.author.prenom+\" \"+like.author.nom}\n                                            </Typography>\n                                            <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(like.createdAt)}</Typography>\n                                            </div>\n                                        } />\n                                        </ListItem>\n                                        <Divider variant=\"inset\" component=\"li\" />\n                                    </div>\n                                    ))}\n                                </List>\n                            </Collapse>\n                            <ListItem button onClick={handleOpenLikes}>\n                                {openLikes ? <ExpandLess /> : <ExpandMore />}\n                                <ListItemText primary={openLikes ? \"Voir moins\" : \"Voir plus\"} />\n                            </ListItem>\n                        </div>\n                    ) : (\n                    <List>\n                        {likes.map((like) => (\n                        <div key={like._id}>\n                            <ListItem alignItems=\"flex-start\">\n                            <ListItemAvatar>\n                                {like.author.picture !== \"false\" ? (\n                                <Avatar alt={like.author.validated ? like.author.prenom+\" \"+like.author.nom : like.author.email} src={\"/images/users/small/\"+like.author.picture}/> ) : ( \n                                <Avatar><AccountCircle/></Avatar>)}\n                            </ListItemAvatar>\n                            <ListItemText secondary={\n                                <div>\n                                <Typography component=\"span\" variant=\"body2\" className={classes.inline} color=\"textPrimary\">\n                                    {like.author.prenom+\" \"+like.author.nom}\n                                </Typography>\n                                <Typography variant=\"caption\" display=\"block\" gutterBottom>{\"il y a \"+getTimeDiff(like.createdAt)}</Typography>\n                                </div>\n                            } />\n                            </ListItem>\n                            <Divider variant=\"inset\" component=\"li\" />\n                        </div>\n                        ))}\n                    </List>\n                    )}\n\n                </Grid>\n            </Grid>\n        )}\n        </Container>\n    );\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useParams, Link } from 'react-router-dom'\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport GroupAddIcon from '@material-ui/icons/GroupAdd';\nimport PersonAddDisabledIcon from '@material-ui/icons/PersonAddDisabled';\n\nimport userService from '../services/users.js';\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      flexGrow: 1,\n      marginTop:theme.spacing(1),\n      marginBottom:theme.spacing(2),\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%', // 16:9\n    },\n    card: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    cardMedia: {\n      paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n      flexGrow: 1,\n      border: \"none\",\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(8),\n    },\n    inline: {\n      display: 'inline',\n    },\n    submit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n    mainFeaturedPost: {\n        position: 'relative',\n        backgroundColor: theme.palette.grey[800],\n        color: theme.palette.common.white,\n        marginBottom: theme.spacing(4),\n        backgroundImage: 'url(https://source.unsplash.com/random)',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n      },\n    overlay: {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        right: 0,\n        left: 0,\n        backgroundColor: 'rgba(0,0,0,.3)',\n    },\n    mainFeaturedPostContent: {\n        position: 'relative',\n        padding: theme.spacing(3),\n        [theme.breakpoints.up('md')]: {\n          padding: theme.spacing(6),\n          paddingRight: 0,\n        },\n    },\n    gridContent: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n        width: 500,\n        height: 250,\n    },\n  }));\n\nfunction useQuery() {\n  return new URLSearchParams(window.location.search);\n}\n\nexport default function(props){\n    const classes = useStyles();\n    const { userId, invitId } = useParams();\n\n    const [state, setState] = React.useState(false);\n\tconst [firstName, setFirstName] = React.useState('');\n\tconst [firstNameInvalid, setFirstNameInvalid] = React.useState(false);\n\tconst [lastName, setLastName] = React.useState('');\n\tconst [lastNameInvalid, setLastNameInvalid] = React.useState(false);\n\tconst [email, setEmail] = React.useState('');\n\tconst [emailInvalid, setEmailInvalid] = React.useState(false);\n\tconst [password, setPassword] = React.useState('');\n\tconst [passwordInvalid, setPasswordInvalid] = React.useState(false);\n\n\tReact.useEffect(() => {\n\t\tif(invitId){\n\t\t\tuserService.getInvitation(invitId).then(rep => {\n\t\t\t\tsetEmail(rep.data.email);\n\t\t\t\ttoastr.success(\"Invitation vérifier et validé\", \"Invitation\");\n\t\t\t}, err => {\n\t\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t\t      toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t    else\n\t\t\t      toastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t})\n\t\t}else if(userId){\n\t\t\tuserService.validEmail(userId).then(rep => {\n\t\t\t\ttoastr.success(\"Email vérifier et validé\", \"Vérification\");\n\t\t\t}, err => {\n\t\t\t\tif(err.response.status>400 && err.response.status<500)\n\t\t\t      toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t    else\n\t\t\t      toastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t\t})\n\t\t}\n\t}, [0]);\n\n\n    const handleSubmit = (event) => {\n\n\t\tevent.preventDefault();\n\n\t\tif(!firstName)\n\t\t  setFirstNameInvalid(true);\n\t\telse\n\t\t  setFirstNameInvalid(false);\n\n\t\tif(!lastName)\n\t\t  setLastNameInvalid(true);\n\t\telse\n\t\t  setLastNameInvalid(false);\n\n\t\tif(!email)\n\t\t  setEmailInvalid(true);\n\n\t\tif(!password)\n\t\t  setPasswordInvalid(true);\n\t\telse\n\t\t  setPasswordInvalid(false);\n\n\t\tif(!email || !firstName || !lastName || !email || !password)\n\t\t  setState(false);\n\t\telse{\n\t\t  setState(true);\n\t\t  userService.signup(firstName, lastName, email, password).then(rep => {\n\t\t    // localStorage.setItem(\"token\", rep.data.token);\n\t\t    // localStorage.setItem(\"user\", rep.data.user);\n\t\t    setState(false);\n\t\t    props.setProfile(rep.data.user);\n\t\t    props.setAuth(true);\n\t\t  }, err => {\n\t\t    setState(false);\n\t\t    props.setAuth(false);\n\t\t    if(err.response.status>400 && err.response.status<500)\n\t\t      toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n\t\t    else\n\t\t      toastr.error(err.response.data, \"Erreur \" + err.response.status);\n\t\t  });\n\t\t}\n\n\t};\n\n\n\tconst handleSetEmail = (event) => {\n\t\tconst email = event.target.value;\n\t\tsetEmail(email);\n\t\tif (/^[a-zA-Z0-9,.'-]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/.test(email))\n\t\t  setEmailInvalid(false);\n\t\telse\n\t\t  setEmailInvalid(true);\n\t};\n\n\tconst handleFirstName = (event) => {\n\t\tsetFirstName(event.target.value);\n\t\tif(!event.target.value)\n\t\t  setFirstNameInvalid(true);\n\t\telse\n\t\t  setFirstNameInvalid(false);\n\t}\n\n\tconst handleLastName = (event) => {\n\t\tsetLastName(event.target.value);\n\t\tif(!event.target.value)\n\t\t  setLastNameInvalid(true);\n\t\telse\n\t\t  setLastNameInvalid(false);\n\t}\n\n\tconst handlePassword = (event) => {\n\t\tsetPassword(event.target.value);\n\t\tif(!event.target.value)\n\t\t  setPasswordInvalid(true);\n\t\telse\n\t\t  setPasswordInvalid(false);\n\t}\n\n    return (\n        <Container className={classes.cardGrid} maxWidth={false}>\n        \t<Grid container spacing={4}>\n        \t\t<Grid item xs={12} sm={9}>\n        \t\t\t<img src=\"Accueil_1.png\" alt=\"Accueil\" style={{width:\"100%\"}}/>\n        \t\t</Grid>\n\n        \t\t<Grid item xs={12} sm={3} className={classes.gridContent}>\n        \t\t\t<form className={classes.form} noValidate onSubmit={handleSubmit}>\n\t        \t\t\t<Grid container spacing={2}>\n\t        \t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t              <TextField\n\t\t\t\t                error={firstNameInvalid}\n\t\t\t\t                autoComplete=\"Prénom\"\n\t\t\t\t                name=\"firstName\"\n\t\t\t\t                variant=\"outlined\"\n\t\t\t\t                required\n\t\t\t\t                fullWidth\n\t\t\t\t                id=\"firstName\"\n\t\t\t\t                label=\"Prénom\"\n\t\t\t\t                value={firstName}\n\t\t\t\t                onInput={handleFirstName}\n\t\t\t\t                disabled={state}\n\t\t\t\t              />\n\t\t\t\t            </Grid>\n\t\t\t\t            <Grid item xs={12} sm={6}>\n\t\t\t\t              <TextField\n\t\t\t\t                error={lastNameInvalid}\n\t\t\t\t                variant=\"outlined\"\n\t\t\t\t                required\n\t\t\t\t                fullWidth\n\t\t\t\t                id=\"lastName\"\n\t\t\t\t                label=\"Nom\"\n\t\t\t\t                value={lastName}\n\t\t\t\t                onInput={handleLastName}\n\t\t\t\t                name=\"lastName\"\n\t\t\t\t                autoComplete=\"Nom de famille\"\n\t\t\t\t                disabled={state}\n\t\t\t\t              />\n\t\t\t\t            </Grid>\n\t\t\t\t            <Grid item xs={12}>\n\t\t\t\t              <TextField\n\t\t\t\t                error={emailInvalid}\n\t\t\t\t                variant=\"outlined\"\n\t\t\t\t                required\n\t\t\t\t                fullWidth\n\t\t\t\t                id=\"email\"\n\t\t\t\t                label=\"Adresse email\"\n\t\t\t\t                value={email}\n\t\t\t\t                onInput={handleSetEmail}\n\t\t\t\t                name=\"email\"\n\t\t\t\t                autoComplete=\"Adresse email\"\n\t\t\t\t                disabled={state}\n\t\t\t\t              />\n\t\t\t\t            </Grid>\n\t\t\t\t            <Grid item xs={12}>\n\t\t\t\t              <TextField\n\t\t\t\t                error={passwordInvalid}\n\t\t\t\t                variant=\"outlined\"\n\t\t\t\t                required\n\t\t\t\t                fullWidth\n\t\t\t\t                name=\"password\"\n\t\t\t\t                label=\"Mot de passe\"\n\t\t\t\t                value={password}\n\t\t\t\t                onInput={handlePassword}\n\t\t\t\t                type=\"password\"\n\t\t\t\t                id=\"password\"\n\t\t\t\t                autoComplete=\"Mot de passe\"\n\t\t\t\t                disabled={state}\n\t\t\t\t              />\n\t\t\t\t            </Grid>\n\t        \t\t\t</Grid>\n\t        \t\t\t<Button\n\t\t\t\t            type=\"submit\"\n\t\t\t\t            fullWidth\n\t\t\t\t            variant=\"contained\"\n\t\t\t\t            color=\"primary\"\n\t\t\t\t            className={classes.submit}\n\t\t\t\t          >\n\t\t\t\t            {state ? (<CircularProgress color=\"inherit\" />) : \"S'enregistrer\"}\n\t\t\t\t          </Button>\n\t\t\t\t    </form>\n        \t\t</Grid>\n        \t</Grid>\n        \t<Grid container spacing={4}>\n        \t\t<Grid item xs={12} sm={6}>\n\t\t        \t<Grid container spacing={4} justify=\"center\" alignItems=\"center\" className={classes.root}>\n\t\t        \t\t<Grid item>\n\t\t        \t\t\t<PhotoLibraryIcon fontSize=\"large\" />\n\t\t        \t\t</Grid>\n\t\t        \t\t<Grid item xs={12} sm={6}>\n\t\t        \t\t\t<Typography variant=\"h6\">\n\t\t        \t\t\t\tCréer votre propre albums\n\t\t        \t\t\t</Typography>\n\t\t        \t\t\t<Typography variant=\"body2\">\n\t\t        \t\t\t\tTélécharger en quelques cliques vos photos, ajouter un titre et des tags afin que vos amis puissent les voirs.\n\t\t        \t\t\t</Typography>\n\t\t        \t\t</Grid>\n\t\t        \t</Grid>\n\n\n\t\t        \t<Grid container spacing={4} justify=\"center\" alignItems=\"center\" className={classes.root}>\n\t\t        \t\t<Grid item xs={12} sm={6}>\n\t\t        \t\t\t<Typography variant=\"h6\">\n\t\t        \t\t\t\tInvitez vos amis\n\t\t        \t\t\t</Typography>\n\t\t        \t\t\t<Typography variant=\"body2\">\n\t\t        \t\t\t\tRechercher vos amis par email, ou par leur prénom.\n\t\t        \t\t\t</Typography>\n\t\t        \t\t</Grid>\n\t\t        \t\t<Grid item>\n\t\t        \t\t\t<GroupAddIcon fontSize=\"large\" />\n\t\t        \t\t</Grid>\n\t\t        \t</Grid>\n\n\n\t\t        \t<Grid container spacing={4} justify=\"center\" alignItems=\"center\" className={classes.root}>\n\t\t        \t\t<Grid item>\n\t\t        \t\t\t<PersonAddDisabledIcon fontSize=\"large\" />\n\t\t        \t\t</Grid>\n\t\t        \t\t<Grid item xs={12} sm={6}>\n\t\t        \t\t\t<Typography variant=\"h6\">\n\t\t        \t\t\t\tLimitez l'acces\n\t\t        \t\t\t</Typography>\n\t\t        \t\t\t<Typography variant=\"body2\">\n\t\t        \t\t\t\tVous pourriez ainsi restreindre l'acces de vos photos à cetains de vos amis seulement.\n\t\t        \t\t\t</Typography>\n\t\t        \t\t</Grid>\n\t\t        \t</Grid>\n\t\t        </Grid>\n\t\t        <Grid item xs={12} sm={6}>\n        \t\t\t<img src=\"Accueil_2.png\" alt=\"Accueil\" style={{width:\"100%\"}}/>\n        \t\t</Grid>\n        \t</Grid>\n        </Container>\n    );\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport LinkUrl from '@material-ui/core/Link';\nimport Badge from '@material-ui/core/Badge';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport clsx from 'clsx';\nimport Drawer from '@material-ui/core/Drawer';\nimport Divider from '@material-ui/core/Divider';\n\n// import List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n// import InboxIcon from '@material-ui/icons/MoveToInbox';\n// import MailIcon from '@material-ui/icons/Mail';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SearchIcon from '@material-ui/icons/Search';\n\n// import logo from './logo.svg';\nimport './App.css';\n\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { useHistory, useLocation, Link as RouterLink } from 'react-router-dom';\n\nimport SignIn from './components/SignIn.jsx';\nimport SignUp from './components/SignUp.jsx';\nimport AlbumGet from './components/Album/Get.jsx';\nimport AlbumTags from './components/Album/Tags.jsx';\nimport AlbumFind from './components/Album/Find.jsx';\nimport AlbumCreate from './components/Album/Create.jsx';\nimport AlbumMe from './components/Album/Me.jsx';\nimport UserAdd from './components/User/Add.jsx';\nimport UserMe from './components/User/Me.jsx';\nimport UserGet from './components/User/Get.jsx';\nimport UserFriends from './components/User/Friends.jsx';\nimport Photos from './components/Photos.jsx';\nimport Dashboard from './components/Dashboard.jsx';\nimport Homepage from './components/Homepage.jsx';\n\n// import Choice from '@material-ui/core/Switch';\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\n// import FormGroup from '@material-ui/core/FormGroup';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { Collapse } from '@material-ui/core';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\n// import AddIcons from '@material-ui/icons/Add';\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport PeopleAltIcon from '@material-ui/icons/PeopleAlt';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\n// import MailOutlineIcon from '@material-ui/icons/MailOutline';\nimport EmailIcon from '@material-ui/icons/Email';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\n// import RemoveIcons from '@material-ui/icons/Remove';\nimport { deepOrange, deepPurple } from '@material-ui/core/colors';\n\nimport userService from \"./services/users\";\n\nimport toastr from 'toastr'\nimport 'toastr/build/toastr.min.css'\n\nconst classNames = require(\"classnames\");\n\nconst drawerWidth = 240;\n\nfunction ListItemLink(props) {\n  const { icon, primary, to } = props;\n\n  const renderLink = React.useMemo(\n    () => React.forwardRef((itemProps, ref) => <RouterLink to={to} ref={ref} {...itemProps} />),\n    [to],\n  );\n\n  return (\n    <li>\n      <ListItem button component={renderLink}>\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\n        <ListItemText primary={primary} />\n      </ListItem>\n    </li>\n  );\n}\n\n\nListItemLink.propTypes = {\n  icon: PropTypes.element,\n  primary: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired,\n};\n\n\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <LinkUrl color=\"inherit\" href=\"https://photos.loicdaniel.fr/\">\n        photos.loicdaniel.fr\n      </LinkUrl>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // flexGrow: 1,\n    display: 'flex',\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  toolbar: {\n    paddingRight: 24, // keep right padding when drawer closed\n  },\n  toolbarIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: '0 8px',\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    // overflow: 'auto',\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerPaper: {\n    position: 'relative',\n    whiteSpace: 'nowrap',\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerPaperClose: {\n    overflowX: 'hidden',\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9),\n    },\n  },\n  dNone: {\n    display: 'none',\n  },\n  orange: {\n    color: theme.palette.getContrastText(deepOrange[500]),\n    backgroundColor: deepOrange[500],\n  },\n  purple: {\n    color: theme.palette.getContrastText(deepPurple[500]),\n    backgroundColor: deepPurple[500],\n  },\n  small: {\n    width: theme.spacing(3),\n    height: theme.spacing(3),\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\n\nfunction App(props) {\n  const classes = useStyles();\n\n  const [auth, setAuth] = React.useState(false);\n  const [profile, setProfile] = React.useState(null);\n  const [newRequest, setNewRequest] = React.useState(0);\n\n  React.useEffect(() => {\n    userService.isAuth().then(rep => {\n      if(rep){\n        userService.getMe().then(rep => {\n          setProfile(rep.data.user);\n          setNewRequest(rep.data.user.friendRequests_receive.filter(r => !r.vue).length)\n          setAuth(true);\n          setLoading(false);\n          setOpenBackdrop(true);\n        })\n      }else{\n        setAuth(rep);\n        setLoading(false);\n        setOpenBackdrop(true);\n      }\n    }, err => {\n      setAuth(false);\n      setLoading(false);\n      setOpenBackdrop(true);\n    });\n  }, [0]);\n\n  const isRequested = (user) => {\n    if(profile === null || user === null || !profile || !user)\n      return false;\n    let pos = profile.friendRequests_send.map(r => r.to._id).indexOf(user._id);\n    if(pos !== -1){\n      let request = profile.friendRequests_send[pos];\n      if(request.vue)\n        return request.accepted;\n      return request.vue;\n    }else\n      return true;\n  }\n\n  // const location = useLocation();\n\n  // React.useEffect(() => {\n  //   console.log('Location changed');\n  // }, [location]);\n\n  // const [auth] = React.useState(true);\n  const [openBackdrop, setOpenBackdrop] = React.useState(true);\n  const [loading, setLoading] = React.useState(true);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [openMenu, setOpenMenu] = React.useState(false);\n  const [openFriends, setOpenFriends] = React.useState(false);\n  const [openAlbums, setOpenAlbums] = React.useState(false);\n  const openMenuProfile = Boolean(anchorEl);\n\n\n\n  const handleOpenFriends = () => {\n    setOpenFriends(!openFriends);\n  }\n\n  const handleOpenAlbums = () => {\n    setOpenAlbums(!openAlbums);\n  }\n\n  // setAuth(true)\n  const list = ({friends=[], albums=[]}) => (\n    <React.Fragment>\n      <ListItemLink to=\"/\" primary=\"Dashboard\" icon={<DashboardIcon />} key=\"Dashboard\" />\n\n      <ListItemLink to=\"/Users/Friends\" primary=\"Mes Amis\" icon={\n        profile.friendRequests_receive.length>0 ? (\n          <Badge\n            overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n            badgeContent={profile.friendRequests_receive.length} color=\"secondary\">\n              <PeopleAltIcon />\n          </Badge>\n        ) : (<PeopleAltIcon />)\n      } key=\"mesAmis\" />\n      <ListItemLink to=\"/Album/Me\" primary=\"Mes Albums\" icon={<PhotoCamera />} key=\"mesAlbums\" />\n      <ListItemLink to=\"/Album/Find\" primary=\"Recherche d'albums\" icon={<SearchIcon />} key=\"findAlbums\" />\n      <Divider />\n      <ListItemLink to=\"/Users/Add\" primary=\"Rechercher un amis\" icon={<Avatar className={classNames(classes.purple, classes.small)}><PersonAddIcon fontSize=\"small\" /></Avatar>} key=\"addUSer\" />\n      {friends.length > 5 ? (\n        <div>\n          {friends.slice(0,5).map((user) => (\n            <div>\n              {user.validated ? (\n                (isRequested(user) ? (\n                  <ListItemLink to={\"/Users/\"+user._id} primary={user.validated ? user.prenom+\" \"+user.nom : user.email } key={user._id}\n                  icon={user.picture !== \"false\" ? (\n                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                    <Avatar className={classes.small}><AccountCircle/></Avatar>)} />\n                ) : (\n                  <ListItemLink to={\"/Users/\"+user._id} primary={user.validated ? user.prenom+\" \"+user.nom : user.email } key={user._id}\n                    icon={\n                      <Badge\n                        overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                        badgeContent={<VisibilityIcon fontSize=\"small\" color=\"inherit\" />} >\n                        {user.picture !== \"false\" ? (\n                        <Avatar className={classes.small} alt={user.validated ? user.prenom+\" \"+user.nom : user.email} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                        <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                    </Badge>} />\n              ))) : (\n                <li><ListItem>\n                  <ListItemIcon>\n                  <Badge\n                    overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                    badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n                    {user.picture !== \"false\" ? (\n                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                    <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                  </Badge>\n                  </ListItemIcon>\n                  <ListItemText primary={user.email} />\n                </ListItem></li>\n              )}\n            </div>\n          ))}\n\n          <Collapse in={openFriends} timeout=\"auto\" unmountOnExit>\n            {friends.slice(5).map((user) => (\n               <div>\n                {user.validated ? (\n                (isRequested(user) ? (\n                  <ListItemLink to={\"/Users/\"+user._id} primary={user.validated ? user.prenom+\" \"+user.nom : user.email } key={user._id}\n                  icon={user.picture !== \"false\" ? (\n                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                    <Avatar className={classes.small}><AccountCircle/></Avatar>)} />\n                ) : (\n                  <ListItemLink to={\"/Users/\"+user._id} primary={user.validated ? user.prenom+\" \"+user.nom : user.email } key={user._id}\n                    icon={\n                      <Badge\n                        overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                        badgeContent={<VisibilityIcon fontSize=\"small\" color=\"inherit\" />} >\n                        {user.picture !== \"false\" ? (\n                        <Avatar className={classes.small} alt={user.validated ? user.prenom+\" \"+user.nom : user.email} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                        <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                    </Badge>} />\n                ))) : (\n                <li><ListItem>\n                  <ListItemIcon>\n                  <Badge\n                    overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                    badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n                    {user.picture !== \"false\" ? (\n                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                    <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                  </Badge>\n                  </ListItemIcon>\n                  <ListItemText primary={user.email} />\n                </ListItem></li>\n                )}\n              </div>\n            ))}\n          </Collapse>\n          <ListItem button onClick={handleOpenFriends}>\n            <ListItemText primary={openMenu ? (openFriends ? \"Voir moins\" : \"Voir plus\") : (openFriends ? \"-\" : \"+\")} />\n            {openFriends ? <ExpandLess /> : <ExpandMore />}\n          </ListItem>\n        </div>\n      ) : (\n        <div>\n          {friends.map((user) => (\n             <div>\n              {user.validated ? (\n                (isRequested(user) ? (\n                  <ListItemLink to={\"/Users/\"+user._id} primary={user.validated ? user.prenom+\" \"+user.nom : user.email } key={user._id}\n                  icon={user.picture !== \"false\" ? (\n                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                    <Avatar className={classes.small}><AccountCircle/></Avatar>)} />\n                ) : (\n                  <ListItemLink to={\"/Users/\"+user._id} primary={user.validated ? user.prenom+\" \"+user.nom : user.email } key={user._id}\n                    icon={\n                      <Badge\n                        overlap=\"circle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                        badgeContent={<VisibilityIcon fontSize=\"small\" color=\"inherit\" />} >\n                        {user.picture !== \"false\" ? (\n                        <Avatar className={classes.small} alt={user.validated ? user.prenom+\" \"+user.nom : user.email} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                        <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                    </Badge>} />\n                ))) : (\n                <li><ListItem>\n                  <ListItemIcon>\n                  <Badge\n                    overlap=\"rectangle\" anchorOrigin={{vertical:\"top\", horizontal:\"right\"}}\n                    badgeContent={<EmailIcon fontSize=\"small\" color=\"inherit\" />} >\n                    {user.picture !== \"false\" ? (\n                    <Avatar className={classes.small} alt={user.prenom+\" \"+user.nom} src={\"/images/user/small/\"+user.picture}/> ) : ( \n                    <Avatar className={classes.small}><AccountCircle/></Avatar>)}\n                  </Badge>\n                  </ListItemIcon>\n                  <ListItemText primary={user.email} />\n                </ListItem></li>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n      <Divider />\n      <ListItemLink to=\"/Album/Create\" primary=\"Créer un nouvel album\" icon={<Avatar className={classNames(classes.orange, classes.small)}><AddAPhotoIcon fontSize=\"small\" /></Avatar>} key=\"addAlbum\" />\n      {albums.length > 5 ? (\n        <div>\n          {albums.slice(0,5).map((album) => {\n            const photo = album.photos[Math.floor(Math.random() * album.photos.length)];\n            return (\n              <ListItemLink to={\"/Album/\"+album._id} primary={album.name} key={album._id}\n                icon={<Avatar className={classes.small} alt={album.name} src={\"/images/photos/small/\"+photo.src}/>}\n              />\n            )\n          })}\n\n          <Collapse in={openAlbums} timeout=\"auto\" unmountOnExit>\n            {albums.slice(5).map((album) => {\n              const photo = album.photos[Math.floor(Math.random() * album.photos.length)];\n              return (\n                <ListItemLink to={\"/Album/\"+album._id} primary={album.name} key={album._id}\n                  icon={<Avatar className={classes.small} alt={album.name} src={\"/images/photos/small/\"+photo.src}/>}\n                />\n              )\n            })}\n          </Collapse>\n          <ListItem button onClick={handleOpenAlbums}>\n            <ListItemText primary={openMenu ? (openAlbums ? \"Voir moins\" : \"Voir plus\") : (openAlbums ? \"-\" : \"+\")} />\n            {openAlbums ? <ExpandLess /> : <ExpandMore />}\n          </ListItem>\n        </div>\n        ) : (\n        <div>\n          {albums.map((album) => {\n            const photo = album.photos[Math.floor(Math.random() * album.photos.length)];\n            return (\n              <ListItemLink to={\"/Album/\"+album._id} primary={album.name} key={album._id}\n                icon={<Avatar className={classes.small} alt={album.name} src={\"/images/photos/small/\"+photo.src}/>}\n              />\n            )\n          })}\n        </div>\n        )}\n    </React.Fragment>\n  );\n  \n  // const handleChange = (event) => {\n  //   setAuth(event.target.checked);\n  // };\n\n  const handleMenuOpen = (event) => {\n    event.preventDefault();\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLoading = (event) => {\n    console.log(event.currentTarget);\n    setLoading(event.currentTarget);\n  }\n\n  const toggleDrawer = (event) => {\n    event.preventDefault();\n    setOpenMenu(!openMenu)\n  }\n\n  const handlePictures = (event) => {\n    event.preventDefault();\n    setAnchorEl(null);\n    let file = event.target.files[0];\n    setLoading(true);\n    userService.upload(file).then(rep => {\n      let str = rep.data.path.split(\"/\");\n      let pict = str[str.length-1];\n      userService.updatePicture(pict).then(rep => {\n        window.location.reload();\n      }, err => {\n        setLoading(false);\n        if(err.response.status>400 && err.response.status<500)\n          toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n        else\n          toastr.error(err.response.data, \"Erreur \" + err.response.status);\n      })\n    }, err => {\n      setLoading(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    });\n  }\n\n  const history = useHistory();\n\n  const handleDeconnexion = (event) => {\n    event.preventDefault();\n    setAnchorEl(null);\n    setLoading(true);\n    userService.logout().then(rep => {\n      setAuth(false);\n      setProfile(null);\n      setLoading(false);\n      history.push(\"/\");\n    }, err => {\n      setLoading(false);\n      if(err.response.status>400 && err.response.status<500)\n        toastr.warning(err.response.data, \"Erreur \" + err.response.status);\n      else\n        toastr.error(err.response.data, \"Erreur \" + err.response.status);\n    })\n  }\n\n  return (\n    <div>\n        <CssBaseline />\n        {/* <FormGroup>\n          <FormControlLabel\n            control={<Choice checked={auth} onChange={handleChange} aria-label=\"login switch\" />}\n            label={auth ? 'Logout' : 'Login'}\n          />\n        </FormGroup> */}\n        <BrowserRouter onChange={handleLoading}>\n        <AppBar position=\"static\">\n          <Toolbar className={classes.toolbar}>\n          {auth && (\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={toggleDrawer}>\n              <MenuIcon />\n            </IconButton>\n          )}\n            <RouterLink to=\"/\" style={{ color:\"inherit\", textDecoration:\"none\" }} className={classes.title}>\n              <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" noWrap>\n                𝐏𝐚𝐫𝐭𝐚𝐠𝐞 𝐝'𝐚𝐥𝐛𝐮𝐦 𝐩𝐡𝐨𝐭𝐨\n              </Typography>\n            </RouterLink>\n            {auth ? (\n              <div>\n                <input\n                  accept=\"image/*\"\n                  className={classes.dNone}\n                  id=\"contained-button-file\"\n                  type=\"file\"\n                  onChange={handlePictures}\n                />\n                <IconButton\n                  aria-label=\"account of current user\"\n                  aria-controls=\"menu-appbar\"\n                  aria-haspopup=\"true\"\n                  onClick={handleMenuOpen}\n                  color=\"inherit\"\n                >\n                  {profile.picture !== \"false\" ? (\n                  <Avatar alt={profile.prenom+\" \"+profile.nom} src={\"/images/users/small/\"+profile.picture} />\n                  ) : (<Avatar><AccountCircle fontSize=\"large\"/></Avatar>)}\n                </IconButton>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={anchorEl}\n                  anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  open={openMenuProfile}\n                  onClose={handleMenuClose}\n                >\n                  <label htmlFor=\"contained-button-file\">\n                    <MenuItem>\n                      <ListItemIcon>\n                        <PhotoCamera fontSize=\"small\" />\n                      </ListItemIcon>\n                      <Typography variant=\"inherit\">Changer de photos</Typography>\n                    </MenuItem>\n                  </label>\n                  <Divider />\n                  <MenuItem onClick={handleDeconnexion}>\n                    <ListItemIcon>\n                      <ExitToAppIcon fontSize=\"small\" />\n                    </ListItemIcon>\n                    <Typography variant=\"inherit\">Déconnexion</Typography>\n                  </MenuItem>\n                </Menu>\n              </div>\n            ) : (\n              <RouterLink to=\"/SignIn\" >\n                <Button variant=\"contained\" color=\"primary\" size=\"small\" startIcon={<LockOpenIcon />}>Connection</Button>\n              </RouterLink>\n            )}\n          </Toolbar>\n        </AppBar>\n        <div className={classes.root}>\n        {auth && (\n          <Drawer\n              variant=\"permanent\"\n              classes={{\n                paper: clsx(classes.drawerPaper, !openMenu && classes.drawerPaperClose),\n              }}\n              anchor=\"left\"\n              open={openMenu}\n              // onOpen={toggleDrawer}\n              // onClose={toggleDrawer}\n            >\n              {list({friends:profile.friends, albums:profile.albums})}\n            </Drawer>\n        )}\n        \n          <main className={classes.content}>\n            {/* <div className={classes.appBarSpacer} /> */}\n                {loading ? (\n                  <Backdrop className={classes.backdrop} open={openBackdrop}>\n                    <CircularProgress color=\"inherit\" />\n                  </Backdrop>\n                ) : (\n                <Switch>\n                  <Route exact path = \"/\" component = {auth ? () => <Dashboard profile={profile} /> : () => <Homepage setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/invitation/:invitId\" component = {auth ? () => <Dashboard profile={profile} /> : () => <Homepage setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/verification/:userId\" component = {auth ? () => <Dashboard profile={profile} /> : () => <Homepage setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/SignIn\" component = {() => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/SignUp\" component = {() => <SignUp setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  \n                  <Route exact path = \"/Album/Create\" component = {auth ? () => <AlbumCreate profile={profile} setProfile={setProfile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/Album/Me\" component = {auth ? () => <AlbumMe auth={auth} profile={profile} setProfile={setProfile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} />} />\n                  <Route exact path = \"/Album/Find\" component = {auth ? () => <AlbumFind auth={auth} profile={profile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} />} />\n                  <Route exact path = \"/Album/Tag/:tag\" component = {auth ? () => <AlbumTags auth={auth} profile={profile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} />} />\n                  <Route exact path = \"/Album/:id\" component = {auth ? () => <AlbumGet /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/Photos/:id\" component ={auth ? () => <Photos profile={profile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  \n                  <Route exact path = \"/Users/Add\" component ={auth ? () => <UserAdd profile={profile} setProfile={setProfile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/Users/Me\" component ={auth ? () => <UserMe profile={profile} setProfile={setProfile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/Users/Friends\" component ={auth ? () => <UserFriends profile={profile} setProfile={setProfile} newRequest={newRequest} setNewRequest={setNewRequest} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                  <Route exact path = \"/Users/:id\" component ={auth ? () => <UserGet profile={profile} setProfile={setProfile} /> : () => <SignIn setAuth={setAuth} auth={auth} setProfile={setProfile} profile={profile} />} />\n                </Switch>\n              )}\n          </main>\n        </div>\n        </BrowserRouter>\n{/*        <footer>\n          <Box mt={5}>\n            <Copyright />\n          </Box>\n        </footer>*/}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}