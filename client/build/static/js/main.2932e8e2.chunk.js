(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{212:function(e,a,t){e.exports=t(281)},217:function(e,a,t){},218:function(e,a,t){},281:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(20),s=t.n(i),l=(t(217),t(4)),o=t(13),c=t(54),u=t(320),m=t(357),p=t(358),d=t(51),f=t(348),E=t(363),g=t(325),h=(t(355),t(345)),b=t(195),v=t(346),y=t(192),x=t.n(y),w=t(3),k=t(364),j=t(350),C=t(286),S=t(347),O=t(352),N=t(14),_=t.n(N),A=t(285),I=t(326),T=t(74),z=t.n(T),D=(t(218),t(11)),P=t(23),M=t(360),B=t(323),q=t(178),R=t.n(q),W=t(322),G=t(9),L=t.n(G),V=t(16),F=t(12),U=t.n(F),H={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},Z={login:function(){var e=Object(V.a)(L.a.mark((function e(a,t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/login",{email:a,password:t},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.clear(),e.abrupt("return",U.a.post("/api/users/logout",{},{headers:H}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signup:function(){var e=Object(V.a)(L.a.mark((function e(a,t,n,r){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/register",{nom:a,prenom:t,email:n,password:r},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}(),isAuth:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=localStorage.getItem("token")){e.next=2;break}return e.abrupt("return",U.a.post("/api/users/connected",{},{headers:H}).then((function(e){return e.data}),(function(e){return!1})));case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),upload:function(){var e=Object(V.a)(L.a.mark((function e(a){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",a),e.abrupt("return",U.a.post("/api/users/upload",t,{headers:{"Content-Type":"multipart/form-data"}}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updatePicture:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/updatePicture",{picture:a},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),get:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/get",{id:a},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getMe:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/getMe",{},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/getAll",{},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getInvitation:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/getInvitation",{id:a},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),validEmail:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/validEmail",{id:a},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),find:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/find",{value:a},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),sendMail:function(){var e=Object(V.a)(L.a.mark((function e(a,t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/users/sendMail",{email:a,text:t},{headers:H}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},X=t(6),$=t.n(X),J=(t(39),Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})));function K(e){var a=J(),t=Object(P.f)(),n=Object(P.g)(),i=r.a.useState(!1),s=Object(l.a)(i,2),o=s[0],c=s[1],u=r.a.useState(""),m=Object(l.a)(u,2),p=m[0],f=m[1],h=r.a.useState(!1),b=Object(l.a)(h,2),v=b[0],y=b[1],x=r.a.useState(""),w=Object(l.a)(x,2),k=w[0],j=w[1],C=r.a.useState(!1),S=Object(l.a)(C,2),O=S[0],N=S[1];e.auth&&t.push("/");return r.a.createElement(W.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:a.paper},r.a.createElement(E.a,{className:a.avatar},r.a.createElement(R.a,null)),r.a.createElement(d.a,{component:"h1",variant:"h5"},"Connection"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(a){a.preventDefault(),p||y(!0),N(!k),p&&k?(c(!0),Z.login(p,k).then((function(a){c(!1),e.setProfile(a.data.user),e.setAuth(!0),"/SignIn"!==n.pathname&&"/"!==n.pathname?t.push(n.pathname):t.push("/")}),(function(a){c(!1),e.setAuth(!1),a.response.status>400&&a.response.status<500?$.a.warning(a.response.data,"Erreur "+a.response.status):$.a.error(a.response.data,"Erreur "+a.response.status)}))):c(!1)}},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{error:v,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Adresse email",value:p,onInput:function(e){var a=e.target.value;f(a),/^[a-zA-Z0-9,.'-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(a)?y(!1):y(!0)},name:"email",autoComplete:"Adresse email",disabled:o})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{error:O,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Mot de passe",value:k,onInput:function(e){j(e.target.value),e.target.value?N(!1):N(!0)},type:"password",id:"password",autoComplete:"Mot de passe",disabled:o})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},o?r.a.createElement(I.a,{color:"inherit"}):"Se connecter"))),r.a.createElement(B.a,{container:!0},r.a.createElement(B.a,{item:!0},r.a.createElement(D.b,{to:"/SignUp",className:"MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-body2 MuiTypography-colorPrimary"},"Vous n'avez pas de compte ? Enregistrer vous"))))))}var Q=t(179),Y=t.n(Q),ee=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ae(e){var a=ee(),t=Object(P.f)(),n=r.a.useState(!1),i=Object(l.a)(n,2),s=i[0],o=i[1],c=r.a.useState(""),u=Object(l.a)(c,2),m=u[0],p=u[1],f=r.a.useState(!1),h=Object(l.a)(f,2),b=h[0],v=h[1],y=r.a.useState(""),x=Object(l.a)(y,2),w=x[0],k=x[1],j=r.a.useState(!1),C=Object(l.a)(j,2),S=C[0],O=C[1],N=r.a.useState(""),_=Object(l.a)(N,2),A=_[0],T=_[1],z=r.a.useState(!1),q=Object(l.a)(z,2),R=q[0],G=q[1],L=r.a.useState(""),V=Object(l.a)(L,2),F=V[0],U=V[1],H=r.a.useState(!1),X=Object(l.a)(H,2),J=X[0],K=X[1];e.auth&&t.push("/");return r.a.createElement(W.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:a.paper},r.a.createElement(E.a,{className:a.avatar},r.a.createElement(Y.a,null)),r.a.createElement(d.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(a){a.preventDefault(),v(!m),O(!w),A||G(!0),K(!F),A&&m&&w&&A&&F?(o(!0),Z.signup(m,w,A,F).then((function(a){o(!1),e.setProfile(a.data.user),e.setAuth(!0),t.push("/")}),(function(a){o(!1),e.setAuth(!1),a.response.status>400&&a.response.status<500?$.a.warning(a.response.data,"Erreur "+a.response.status):$.a.error(a.response.data,"Erreur "+a.response.status)}))):o(!1)}},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(M.a,{error:b,autoComplete:"Pr\xe9nom",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"Pr\xe9nom",value:m,onInput:function(e){p(e.target.value),e.target.value?v(!1):v(!0)},disabled:s,autoFocus:!0})),r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(M.a,{error:S,variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Nom",value:w,onInput:function(e){k(e.target.value),e.target.value?O(!1):O(!0)},name:"lastName",autoComplete:"Nom de famille",disabled:s})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{error:R,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Adresse email",value:A,onInput:function(e){var a=e.target.value;T(a),/^[a-zA-Z0-9,.'-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(a)?G(!1):G(!0)},name:"email",autoComplete:"Adresse email",disabled:s})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{error:J,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Mot de passe",value:F,onInput:function(e){U(e.target.value),e.target.value?K(!1):K(!0)},type:"password",id:"password",autoComplete:"Mot de passe",disabled:s}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},s?r.a.createElement(I.a,{color:"inherit"}):"S'enregistrer"),r.a.createElement(B.a,{container:!0,justify:"flex-end"},r.a.createElement(B.a,{item:!0},r.a.createElement(D.b,{to:"/SignIn",className:"MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-body2 MuiTypography-colorPrimary"},"Vous avez un compte ? Connectez vous"))))))}var te=t(327),ne=t(329),re=t(328),ie=t(172),se={"Content-Type":"application/json"},le={get:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/get",{id:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getMe:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/getMe",{},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getDashboard:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/getDashboard",{},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),find:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/find",{value:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),findTag:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/findTag",{tag:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ajout:function(){var e=Object(V.a)(L.a.mark((function e(a,t,n,r,i,s){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/ajout",{name:a,description:t,dateCreated:n,tags:r,banned:i,photos:s},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a,t,n,r,i,s){return e.apply(this,arguments)}}(),update:function(){var e=Object(V.a)(L.a.mark((function e(a,t,n,r,i){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/update",{id:a,name:t,description:n,dateCreated:r,tags:i},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a,t,n,r,i){return e.apply(this,arguments)}}(),remove:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/remove",{id:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),show:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/show",{id:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),unShow:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/unShow",{id:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getBanned:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/getBanned",{album_id:a},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),addBanned:function(){var e=Object(V.a)(L.a.mark((function e(a,t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/addBanned",{album_id:a,user_id:t},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),delBanned:function(){var e=Object(V.a)(L.a.mark((function e(a,t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/albums/delBanned",{album_id:a,user_id:t},{headers:se}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},oe=t(71),ce=Object(u.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,height:"100vh",overflow:"auto"},icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},gridContent:{paddingTop:e.spacing(2)},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}}));function ue(e){var a=ce(),t=Object(P.h)().id,n=r.a.useState(!0),i=Object(l.a)(n,2),s=i[0],o=i[1],c=r.a.useState(!1),u=Object(l.a)(c,2),m=u[0],p=u[1],f=r.a.useState(!1),h=Object(l.a)(f,2),b=h[0],v=h[1],y=r.a.useState(!1),x=Object(l.a)(y,2),w=x[0],k=x[1],j=r.a.useState(!1),C=Object(l.a)(j,2),S=C[0],O=C[1],N=r.a.useState([]),T=Object(l.a)(N,2),z=T[0],M=T[1];return r.a.useEffect((function(){o(!0),t?le.get(t).then((function(e){e.data.error?(O(e.data.album),k(e.data.error)):(p(e.data.isBanned),O(e.data),M(e.data.photos)),o(!1)}),(function(e){v("Erreur "+e.response.status+" : "+e.response.data),o(!1)})):(o(!1),v("Pas d'identifiant"))}),[t]),r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},s?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):b?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},b):m?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Vous n'avez pas acces \xe0 cet album"):r.a.createElement("div",null,r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0},"false"!==S.author.picture?r.a.createElement(E.a,{className:a.large,alt:S.author.prenom+" "+S.author.nom,src:"/images/users/small/"+S.author.picture}):r.a.createElement(E.a,{className:a.large},r.a.createElement(_.a,{style:{fontSize:50}}))),r.a.createElement(B.a,{item:!0},r.a.createElement(d.a,{variant:"h6",displayInline:!0},S.name),r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+function(e){var a=oe(Date.now()),t=oe(e),n=a.diff(t,"seconds"),r=a.diff(t,"minutes"),i=a.diff(t,"hours"),s=a.diff(t,"days"),l=a.diff(t,"weeks"),o=a.diff(t,"months"),c=a.diff(t,"years");return c>0?o-12*c>0?c+" ans et "+(o-12*c)+" mois":c+" ans":o>0?s-30*o>0?o+" mois et "+(s-30*o)+" jours":o+" mois":l>0?s-7*l>0?l+" semaines et "+(s-7*l)+" jours":l+" semaines":s>0?i-24*s>0?s+" jours et "+(i-24*s)+" heures":s+" jours":i>0?r-60*i>0?i+" heures et "+(r-60*i)+" minutes":i+" heures":r>0?n-60*r>0?r+" minutes et "+(n-60*r)+" secondes":r+" minutes":n>0?n+" secondes":void 0}(S.dateCreated))),r.a.createElement(B.a,{item:!0,alignContent:"center",alignItems:"center"},r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},S.description)),r.a.createElement(B.a,{item:!0,alignContent:"flex-end",alignItems:"flex-end"},S.tags.map((function(e){return r.a.createElement(D.b,{to:"/Album/Tag/"+e.value,style:{padding:6}},r.a.createElement(ie.a,{label:e.value,clickable:!0,color:"primary"}))})))),w?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},w):r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},z.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id,xs:12,sm:6,md:3},r.a.createElement(te.a,{className:a.card},r.a.createElement(D.b,{to:"/Photos/"+e._id},r.a.createElement(re.a,{className:a.cardMedia,image:"/images/photos/medium/"+e.src})),r.a.createElement(ne.a,null,r.a.createElement(D.b,{to:"/Photos/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbLikes," Likes")),r.a.createElement(D.b,{to:"/Photos/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbCommentaires," Commentaires")),r.a.createElement(D.b,{to:"/Photos/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbVues," Vues")))))})))))}var me=t(332),pe=t(333),de=t(334),fe=t(335),Ee=t(330),ge=t(331),he=t(41),be=t(72),ve=t(71),ye=Object(u.a)((function(e){return{root:{maxWidth:345},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]}}}));function xe(e){var a=ve(Date.now()),t=ve(e),n=a.diff(t,"minutes"),r=a.diff(t,"hours"),i=a.diff(t,"days"),s=a.diff(t,"weeks"),l=a.diff(t,"months"),o=a.diff(t,"years");return o>0?l-12*o>0?o+" ans et "+(l-12*o)+" mois":o+" ans":l>0?i-30*l>0?l+" mois et "+(i-30*l)+" jours":l+" mois":s>0?i-7*s>0?s+" semaines et "+(i-7*s)+" jours":s+" semaines":i>0?r-24*i>0?i+" jours et "+(r-24*i)+" heures":i+" jours":r>0?n-60*r>0?r+" heures et "+(n-60*r)+" minutes":r+" heures":n>0?n+" minutes":void 0}var we=function(e){var a=ye(),t=Object(P.h)().tag,n=r.a.useState(!1),i=Object(l.a)(n,2),s=i[0],o=i[1],c=r.a.useState(!0),u=Object(l.a)(c,2),m=u[0],p=u[1],f=r.a.useState([]),h=Object(l.a)(f,2),b=h[0],v=h[1],y=r.a.useState(""),x=Object(l.a)(y,2),w=(x[0],x[1]);return r.a.useEffect((function(){t?(w(t),le.findTag(t).then((function(e){v(e.data),0===e.data.length&&o("Aucuns r\xe9sultats"),p(!1)}),(function(e){p(!1),o("Erreur "+e.response.status+" : "+e.response.data)}))):p(!1)}),[t]),r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},m?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):s?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},s):r.a.createElement("div",null,r.a.createElement(B.a,{container:!0,spacing:4},b.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id,xs:12,sm:6,md:4},r.a.createElement(te.a,{className:a.card},r.a.createElement(me.a,{avatar:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(E.a,{"aria-label":"recipe",className:a.purple},e.name.charAt(0).toUpperCase())),title:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"h6",displayInline:!0},e.name)),subheader:r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+xe(e.dateCreated))}),r.a.createElement(pe.a,{className:be(a.cardContent,a.gridContent)},r.a.createElement(he.Scrollbars,{autoHide:!0,autoHeight:!0},r.a.createElement(de.a,{cellHeight:150},e.photos.map((function(e){return r.a.createElement(fe.a,{key:e._id,cols:1},r.a.createElement("img",{src:"/images/photos/medium/"+e.src,alt:e.src}))}))))),r.a.createElement(ne.a,null,r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbLikes," Likes")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbCommentaires," Commentaires")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbVues," Vues")))))})))))},ke=t(336),je=t(72),Ce=t(71),Se=Object(u.a)((function(e){return{root:{maxWidth:345},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]}}}));function Oe(e){var a=Ce(Date.now()),t=Ce(e),n=a.diff(t,"minutes"),r=a.diff(t,"hours"),i=a.diff(t,"days"),s=a.diff(t,"weeks"),l=a.diff(t,"months"),o=a.diff(t,"years");return o>0?l-12*o>0?o+" ans et "+(l-12*o)+" mois":o+" ans":l>0?i-30*l>0?l+" mois et "+(i-30*l)+" jours":l+" mois":s>0?i-7*s>0?s+" semaines et "+(i-7*s)+" jours":s+" semaines":i>0?r-24*i>0?i+" jours et "+(r-24*i)+" heures":i+" jours":r>0?n-60*r>0?r+" heures et "+(n-60*r)+" minutes":r+" heures":n>0?n+" minutes":void 0}var Ne=function(e){var a=Se(),t=r.a.useState(!1),n=Object(l.a)(t,2),i=(n[0],n[1],r.a.useState(!1)),s=Object(l.a)(i,2),o=s[0],c=(s[1],r.a.useState([])),u=Object(l.a)(c,2),m=u[0],p=u[1],f=r.a.useState(""),h=Object(l.a)(f,2),b=h[0],v=h[1];return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},r.a.createElement(te.a,null,r.a.createElement(pe.a,null,r.a.createElement(M.a,{variant:"outlined",required:!0,fullWidth:!0,autoFocus:!0,id:"email",label:"Rechercher un album",value:b,onInput:function(e){e.preventDefault(),v(e.target.value),""!==b&&le.find(e.target.value).then((function(e){p(e.data)}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))},name:"email",autoComplete:"Email, nom, prenom",InputProps:{startAdornment:r.a.createElement(ke.a,{position:"start"},r.a.createElement(z.a,{color:"textSecondary"}))}}),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"right",style:{paddingTop:6}},m.length>0?m.length:"Aucuns"," albums trouv\xe9s"))),o?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement(B.a,{container:!0,spacing:4,style:{paddingTop:"16px"}},m.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id,xs:12,sm:6,md:4},r.a.createElement(te.a,{className:a.card},r.a.createElement(me.a,{avatar:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(E.a,{"aria-label":"recipe",className:a.purple},e.name.charAt(0).toUpperCase())),title:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"h6",displayInline:!0},e.name)),subheader:r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+Oe(e.dateCreated))}),r.a.createElement(pe.a,{className:je(a.cardContent,a.gridContent)},r.a.createElement(he.Scrollbars,{autoHide:!0,autoHeight:!0},r.a.createElement(de.a,{cellHeight:150},e.photos.map((function(e){return r.a.createElement(fe.a,{key:e._id,cols:1},r.a.createElement("img",{src:"/images/photos/medium/"+e.src,alt:e.src}))}))))),r.a.createElement(ne.a,null,r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbLikes," Likes")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbCommentaires," Commentaires")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbVues," Vues")))))}))))},_e=t(22),Ae=t(362),Ie=t(365),Te=t(338),ze=t(361),De=t(339),Pe=t(117),Me=t.n(Pe),Be={"Content-Type":"application/json"},qe={get:function(e){return U.a.post("/api/photos/get",{photo_id:e},{headers:Be})},getFromUser:function(e){return U.a.post("/api/photos/getFromUser",{user_id:e},{headers:Be})},upload:function(){var e=Object(V.a)(L.a.mark((function e(a){var t,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=new FormData,a)t.append("file",a[n]);return e.abrupt("return",U.a.post("/api/photos/upload",t,{headers:{"Content-Type":"multipart/form-data"}}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),addComment:function(e,a){return U.a.post("/api/photos/comment/add",{text:e,photo_id:a},{headers:Be})},updateComment:function(e,a,t){return U.a.post("/api/photos/comment/update",{text:e,photo_id:a,comment_id:t},{headers:Be})},delComment:function(e,a){return U.a.post("/api/photos/comment/del",{comment_id:e,photo_id:a},{headers:Be})},addLike:function(e){return U.a.post("/api/photos/like/add",{photo_id:e},{headers:Be})},delLike:function(e){return U.a.post("/api/photos/like/del",{photo_id:e},{headers:Be})}},Re=t(72),We=Object(u.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},boxInput_dashed:{margin:e.spacing(20),marginTop:e.spacing(5),marginBottom:e.spacing(3),padding:e.spacing(20),border:"2px dashed #CCC"},boxInput_dashed_2:{margin:e.spacing(20),marginTop:e.spacing(5),marginBottom:e.spacing(3),padding:e.spacing(3),border:"2px dashed #CCC"},boxInput:{margin:e.spacing(20),marginTop:e.spacing(5),marginBottom:e.spacing(3),padding:e.spacing(20),paddingTop:e.spacing(0),paddingBottom:e.spacing(5)},boxInput_end:{margin:e.spacing(20),marginTop:e.spacing(5),marginBottom:e.spacing(3),padding:e.spacing(20),paddingTop:e.spacing(5),paddingBottom:e.spacing(5)},boxInput_end_button:{marginTop:e.spacing(10)},btnSteps:{marginTop:e.spacing(5),paddingRight:e.spacing(30)},stepper:{marginLeft:e.spacing(15),marginRight:e.spacing(15)},input:{display:"none"},inputTag:{width:"80%"},inputDate:{width:"15%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},form:{width:"100%",marginTop:e.spacing(1)},card:{height:"100%",display:"flex",flexDirection:"column"},cardFriend:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250}}}));var Ge=function(e){var a=We(),t=Object(P.f)(),n=r.a.useState(0),i=Object(l.a)(n,2),s=i[0],o=i[1],u=r.a.useState(new Set),m=Object(l.a)(u,2),p=m[0],f=m[1],h=r.a.useState(new Date(Date.now()).toISOString().split("T")[0]),b=Object(l.a)(h,2),v=b[0],y=b[1],x=r.a.useState(!1),w=Object(l.a)(x,2),k=w[0],j=w[1],C=["Transfert des photos","Informations sur l'album","Restriction d'amis","Sauvegarde"],S=r.a.useState(!1),O=Object(l.a)(S,2),N=O[0],A=O[1],T=r.a.useState(!0),z=Object(l.a)(T,2),D=z[0],q=z[1],R=r.a.useState(!1),G=Object(l.a)(R,2),L=G[0],V=G[1],F=r.a.useState(""),U=Object(l.a)(F,2),H=U[0],Z=U[1],X=r.a.useState(!1),J=Object(l.a)(X,2),K=J[0],Q=J[1],Y=r.a.useState(""),ee=Object(l.a)(Y,2),ae=ee[0],ne=ee[1],re=r.a.useState([]),ie=Object(l.a)(re,2),se=ie[0],oe=ie[1],ce=r.a.useState([]),ue=Object(l.a)(ce,2),Ee=ue[0],ge=ue[1],be=r.a.useState([]),ve=Object(l.a)(be,2),ye=ve[0],xe=ve[1],we=r.a.useState([]),ke=Object(l.a)(we,2),je=ke[0],Ce=ke[1],Se=function(e){return p.has(e)};return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},r.a.createElement(Ie.a,{activeStep:s,className:a.stepper},C.map((function(e,a){var t={},n={};return Se(a)&&(t.completed=!1),r.a.createElement(Te.a,Object.assign({key:e},t),r.a.createElement(ze.a,n,e))}))),r.a.createElement("div",null,s===C.length?r.a.createElement("div",null,r.a.createElement(d.a,{className:a.instructions},"All steps completed - you're finished"),r.a.createElement(g.a,{onClick:function(){Z(""),ne(""),ge(""),oe([]),y(new Date("now")),xe([]),o(0)},className:a.button},"Reset")):r.a.createElement("div",null,0===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{accept:"image/*",className:a.input,id:"contained-button-multiple-files",multiple:!0,type:"file",onChange:function(e){for(var a=e.target.files,t=Object(_e.a)(ye),n=0;n<a.length;n++)t.push(a[n]);Ce(t.map((function(e){return URL.createObjectURL(e)}))),xe(t),q(!1)}}),je.length>0?r.a.createElement(Ae.a,{display:"block",justifyContent:"center",m:1,p:1,bgcolor:"background.paper",className:a.boxInput_dashed_2},r.a.createElement(B.a,{container:!0,spacing:3,justify:"center",alignItems:"center",alignContent:"center"},r.a.createElement(B.a,{item:!0,xs:12,container:!0,justify:"center",alignItems:"center",alignContent:"center"},r.a.createElement("label",{htmlFor:"contained-button-multiple-files"},r.a.createElement(g.a,{component:"span"},"Ajouter d'autres photos"))),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(he.Scrollbars,{autoHide:!0,style:{height:220}},r.a.createElement(de.a,{cellHeight:200,cols:3},je.map((function(e){return r.a.createElement(fe.a,{key:e,cols:1},r.a.createElement("img",{src:e,alt:e}))}))))))):r.a.createElement(Ae.a,{display:"flex",justifyContent:"center",m:1,p:1,bgcolor:"background.paper",className:a.boxInput_dashed},r.a.createElement("label",{htmlFor:"contained-button-multiple-files"},r.a.createElement(g.a,{component:"span"},"Cliquer ici pour t\xe9l\xe9charger vos photos.")))),1===s&&r.a.createElement(Ae.a,{display:"flex",justifyContent:"center",m:1,p:1,bgcolor:"background.paper",className:a.boxInput},r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(M.a,{error:K,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Titre de l'album",name:"title",autoComplete:"title",onInput:function(e){Z(e.target.value),e.target.value?Q(!1):Q(!0),q(!H||!v)},value:H,autoFocus:!0}),r.a.createElement(M.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"description",label:"Desription de l'album",name:"description",autoComplete:"description",onInput:function(e){ne(e.target.value)},value:ae,multiline:!0,rows:3}),r.a.createElement(Me.a,{variant:"outlined",margin:"normal",id:"tags",label:"Tags de l'album",name:"tags",autoComplete:"tags",onAdd:function(e){return function(e){var a=Object(_e.a)(Ee);a.push(e),ge(a)}(e)},onDelete:function(e,a){return function(e,a){var t=Object(_e.a)(Ee);t.splice(a,1),ge(t)}(0,a)},value:Ee,className:a.inputTag}),"\xa0",r.a.createElement(M.a,{error:k,required:!0,variant:"outlined",margin:"normal",id:"date",label:"Date de l'album",type:"date",defaultValue:v,className:a.TextField,onInput:function(e){y(e.target.value),e.target.value?j(!1):j(!0),q(!H||!v)},InputLabelProps:{shrink:!0}}))),2===s&&r.a.createElement(Ae.a,{display:"flex",justifyContent:"center",m:1,p:1,bgcolor:"background.paper",className:a.boxInput},0===e.profile.friends.length?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucuns amis \xe0 restreindre"):r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},e.profile.friends.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id},r.a.createElement(te.a,{className:a.cardFriend,style:e.banned?{backgroundColor:"#3f51b5"}:{borderColor:"#3f51b5",borderSize:2},onClick:e.banned?function(a){return function(e,a){var t=Object(_e.a)(se),n=t.indexOf(a._id);-1!==n&&(a.banned=!1,t.splice(n,1),oe(t))}(0,e)}:function(a){return function(e,a){var t=Object(_e.a)(se);t.push(a._id),a.banned=!0,oe(t)}(0,e)}},r.a.createElement(me.a,{avatar:{}("false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/users/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))),title:r.a.createElement(d.a,{variant:"body2",displayInline:!0},e.validated?e.prenom+" "+e.nom:e.email),subheader:e.validated?"Enregistrer":"Non enregistrer"})))})))),3===s&&r.a.createElement(Ae.a,{display:"flex",justifyContent:"center",m:1,p:1,bgcolor:"background.paper",className:a.boxInput_end},r.a.createElement(B.a,{container:!0,spacing:10},r.a.createElement(B.a,{item:!0,key:"myAlbum",xs:12,sm:6},r.a.createElement(te.a,{className:a.card},r.a.createElement(me.a,{avatar:"false"!==e.profile.picture?r.a.createElement(E.a,{alt:e.profile.prenom+" "+e.profile.nom,src:"/images/users/small/"+e.profile.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"})),title:e.profile.prenom+" "+e.profile.nom,subheader:v}),r.a.createElement(pe.a,{className:Re(a.cardContent,a.gridContent)},r.a.createElement(he.Scrollbars,{autoHide:!0,autoHeight:!0},r.a.createElement(de.a,{cellHeight:150},r.a.createElement(fe.a,{key:"Subheader",cols:2,style:{height:"auto"}},r.a.createElement(De.a,{component:"div"},H)),je.map((function(e){return r.a.createElement(fe.a,{key:e},r.a.createElement("img",{src:e,alt:e}))}))))))),r.a.createElement(B.a,{item:!0,key:"myAlbumForm",xs:12,sm:6},r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(a){a.preventDefault(),V(!0),A(!0),qe.upload(ye).then((function(a){var n=a.data.map((function(e){var a=e.path.split("/");return a[a.length-1]}));le.ajout(H,ae,v,Ee,se,n).then((function(a){A(!1),V(!1);var n=Object(c.a)({},e.profile);n.albums.push(a.data),e.setProfile(n),t.push("/Album/"+a.data._id)}),(function(e){A(!1),V(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),(function(e){A(!1),V(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",size:"large",className:a.boxInput_end_button},N?r.a.createElement(I.a,{color:"inherit"}):"Enregistrer l'album"))))),r.a.createElement(B.a,{container:!0,className:a.btnSteps,justify:"flex-end",direction:"row",alignItems:"center",spacing:10},r.a.createElement(g.a,{disabled:0===s||L,onClick:function(){o((function(e){return e-1})),1===s&&(ye.length>0?q(!1):q(!0)),2===s&&q(!H||!v)},className:a.button},"Pr\xe9c\xe9dent"),!1,r.a.createElement(g.a,{variant:"contained",color:"primary",disabled:D||s===C.length-1,onClick:function(){var e=p;Se(s)&&(e=new Set(e.values())).delete(s),o((function(e){return e+1})),f(e),q(0===s&&(!H||!v))},className:a.button},s===C.length-1?"Terminer":"Suivant")))))},Le=t(182),Ve=t.n(Le),Fe=t(180),Ue=t.n(Fe),He=t(118),Ze=t.n(He),Xe=t(181),$e=t.n(Xe),Je=t(56),Ke=t.n(Je),Qe=t(59),Ye=t.n(Qe),ea=t(340),aa=t(344),ta=t(342),na=t(343),ra=t(341),ia=t(72),sa=t(71),la=Object(u.a)((function(e){return{root:{maxWidth:345},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column"},cardFriend:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}}));function oa(e){var a=sa(Date.now()),t=sa(e),n=a.diff(t,"seconds"),r=a.diff(t,"minutes"),i=a.diff(t,"hours"),s=a.diff(t,"days"),l=a.diff(t,"weeks"),o=a.diff(t,"months"),c=a.diff(t,"years");return c>0?o-12*c>0?c+" ans et "+(o-12*c)+" mois":c+" ans":o>0?s-30*o>0?o+" mois et "+(s-30*o)+" jours":o+" mois":l>0?s-7*l>0?l+" semaines et "+(s-7*l)+" jours":l+" semaines":s>0?i-24*s>0?s+" jours et "+(i-24*s)+" heures":s+" jours":i>0?r-60*i>0?i+" heures et "+(r-60*i)+" minutes":i+" heures":r>0?n-60*r>0?r+" minutes et "+(n-60*r)+" secondes":r+" minutes":n>0?n+" secondes":void 0}var ca=function(e){var a=la(),t=r.a.useState(!0),n=Object(l.a)(t,2),i=n[0],s=n[1],o=r.a.useState([]),u=Object(l.a)(o,2),m=u[0],p=u[1],y=r.a.useState([]),x=Object(l.a)(y,2),w=x[0],k=x[1],j=r.a.useState(null),C=Object(l.a)(j,2),O=C[0],N=C[1],T=Boolean(O),z=r.a.useState(!1),P=Object(l.a)(z,2),q=P[0],R=P[1],G=r.a.useState(!1),L=Object(l.a)(G,2),V=L[0],F=L[1],U=r.a.useState(!1),H=Object(l.a)(U,2),Z=H[0],X=H[1],J=r.a.useState(!1),K=Object(l.a)(J,2),Q=K[0],Y=K[1],ee=r.a.useState(!1),ae=Object(l.a)(ee,2),re=(ae[0],ae[1]),ie=r.a.useState(null),se=Object(l.a)(ie,2),oe=se[0],ce=se[1],ue=r.a.useState(""),Ee=Object(l.a)(ue,2),ge=Ee[0],be=Ee[1],ve=r.a.useState(!1),ye=Object(l.a)(ve,2),xe=ye[0],we=ye[1],ke=r.a.useState(""),je=Object(l.a)(ke,2),Ce=je[0],Se=je[1],Oe=r.a.useState([]),Ne=Object(l.a)(Oe,2),Ae=Ne[0],Ie=Ne[1],Te=r.a.useState(new Date(Date.now()).toISOString().split("T")[0]),ze=Object(l.a)(Te,2),De=ze[0],Pe=ze[1],Be=r.a.useState(!1),qe=Object(l.a)(Be,2),Re=qe[0],We=qe[1],Ge=function(e){R(!1)},Le=function(e){F(!1)},Fe=function(e){X(!1)},He=function(a){var t=e.profile.friendRequests_send.map((function(e){return e.to._id})).indexOf(a._id),n=e.profile.friendRequests_send[t];return n.vue?n.accepted:n.vue};return r.a.useEffect((function(){le.getMe().then((function(e){s(!1),p(e.data)}),(function(e){s(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),[e.profile.albums.length]),r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0},"false"!==e.profile.picture?r.a.createElement(E.a,{alt:e.profile.prenom+" "+e.profile.nom,src:"/images/users/small/"+e.profile.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"}))),r.a.createElement(B.a,{item:!0},r.a.createElement(d.a,{variant:"h6",displayInline:!0},"Mes albums"))),i?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement(B.a,{container:!0,spacing:4},r.a.createElement(ea.a,{open:q,onClose:Ge,"aria-labelledby":"supression-album","aria-describedby":"supression-album-description"},r.a.createElement(ra.a,{id:"supression-album"},"Voulez-vous supprimer cet album ?"),r.a.createElement(ta.a,null,r.a.createElement(na.a,{id:"supression-album"},"Attention ! La supression de l'album effacera d\xe9finitivement toutes les photos et fichier enregistrer sur le serveur."),r.a.createElement(aa.a,null,r.a.createElement(g.a,{onClick:Ge,color:"primary"},"Ne rien faire"),r.a.createElement(g.a,{onClick:function(a){le.remove(oe).then((function(a){R(!1),$.a.success("Album supprimer","Succes"),p(a.data);var t=Object(c.a)({},e.profile);t.albums=a.data,e.setProfile(t)}),(function(e){R(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))},color:"primary"},"Oui, tout effacer")))),r.a.createElement(ea.a,{open:V,onClose:Le,"aria-labelledby":"restrict-album","aria-describedby":"restrict-album-description"},r.a.createElement(ra.a,{id:"restrict-album-album"},"Restriction d'utilisateur"),r.a.createElement(ta.a,null,Q?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):0===w.length?r.a.createElement("div",null,r.a.createElement(na.a,{id:"restrict-album"},r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucuns amis \xe0 restreindre")),r.a.createElement(aa.a,null,r.a.createElement(g.a,{onClick:Le,color:"primary"},"Annuler"))):r.a.createElement("div",null,r.a.createElement(na.a,{id:"restrict-album"},r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},w.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id},r.a.createElement(te.a,{className:a.cardFriend,style:e.banned?{backgroundColor:"#3f51b5"}:{borderColor:"#3f51b5",borderSize:2},onClick:e.banned?function(a){return function(e,a){le.delBanned(oe,a._id).then((function(e){k(e.data),$.a.success("Utilisateur non restreint","Restriction")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(0,e)}:function(a){return function(e,a){le.addBanned(oe,a._id).then((function(e){k(e.data),$.a.success("Utilisateur restrinct","Restriction")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(0,e)}},r.a.createElement(me.a,{avatar:e.validated?He(e)?"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/users/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)):r.a.createElement(h.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ye.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.validated?e.prenom+" "+e.nom:e.email,src:"/images/users/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))):r.a.createElement(h.a,{overlap:"rectangle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ke.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/users/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))),title:r.a.createElement(d.a,{variant:"body2",displayInline:!0},e.validated?e.prenom+" "+e.nom:e.email),subheader:e.validated?"Enregistrer":"Non enregistrer"})))})))),r.a.createElement(aa.a,null,r.a.createElement(g.a,{onClick:Le,color:"primary"},"Fermer"))))),r.a.createElement(ea.a,{open:Z,onClose:Fe,"aria-labelledby":"edit-album","aria-describedby":"edit-album-description"},r.a.createElement(ra.a,{id:"edit-album-album"},"Modifier les information de l'album"),r.a.createElement(ta.a,null,Q?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement("div",null,r.a.createElement(na.a,{id:"supression-album"},r.a.createElement(M.a,{error:xe,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Titre de l'album",name:"title",autoComplete:"title",onInput:function(e){be(e.target.value),e.target.value?we(!1):we(!0)},value:ge,autoFocus:!0}),r.a.createElement(M.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"description",label:"Desription de l'album",name:"description",autoComplete:"description",onInput:function(e){Se(e.target.value)},value:Ce,multiline:!0,rows:3}),r.a.createElement(Me.a,{variant:"outlined",margin:"normal",id:"tags",label:"Tags de l'album",name:"tags",autoComplete:"tags",onAdd:function(e){return function(e){var a=Object(_e.a)(Ae);a.push(e),Ie(a)}(e)},onDelete:function(e,a){return function(e,a){var t=Object(_e.a)(Ae);t.splice(a,1),Ie(t)}(0,a)},value:Ae,className:a.inputTag}),"\xa0",r.a.createElement(M.a,{error:Re,required:!0,variant:"outlined",margin:"normal",id:"date",label:"Date de l'album",type:"date",defaultValue:De,className:a.TextField,onInput:function(e){Pe(e.target.value),e.target.value?We(!1):We(!0)},InputLabelProps:{shrink:!0}})),r.a.createElement(aa.a,null,r.a.createElement(g.a,{onClick:Fe,color:"primary"},"Annuler"),r.a.createElement(g.a,{onClick:function(e){Y(!0),le.update(oe,ge,Ce,De,Ae).then((function(e){X(!1),Y(!1);var a=m.map((function(e){return e._id})).indexOf(e.data._id);m[a]=e.data,p(m)}),(function(e){X(!1),Y(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))},color:"primary"},"Sauvegarder"))))),r.a.createElement(b.a,{anchorEl:O,keepMounted:!0,onClose:function(){N(null)},open:T},r.a.createElement(v.a,{key:"edit",onClick:function(e){X(!0),Y(!0),le.get(oe).then((function(e){Y(!1),be(e.data.name),Se(e.data.description),Pe(new Date(e.data.dateCreated)),Ie(e.data.tags.map((function(e){return e.value})))}),(function(e){X(!1),Y(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},r.a.createElement(S.a,null,r.a.createElement(Ue.a,{fontSize:"small"})),r.a.createElement(d.a,{variant:"inherit"},"Modifier")),r.a.createElement(v.a,{key:"delete",onClick:function(){N(null),R(!0)}},r.a.createElement(S.a,null,r.a.createElement(Ze.a,{fontSize:"small"})),r.a.createElement(d.a,{variant:"inherit"},"Supprimer")),r.a.createElement(v.a,{key:"banned",onClick:function(e){F(!0),re(!0),le.getBanned(oe).then((function(e){k(e.data),re(!1)}),(function(e){re(!1),F(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},r.a.createElement(S.a,null,r.a.createElement($e.a,{fontSize:"small"})),r.a.createElement(d.a,{variant:"inherit"},"Limiter l'acc\xe8s"))),m.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id,xs:12,sm:6,md:4},r.a.createElement(te.a,{className:a.card},r.a.createElement(me.a,{avatar:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(E.a,{"aria-label":"recipe",className:a.purple},e.name.charAt(0).toUpperCase())),action:r.a.createElement(f.a,{"aria-label":"settings","aria-haspopup":"true","aria-controls":e._id,onClick:function(a){return function(e,a){N(e.currentTarget),ce(a)}(a,e._id)}},r.a.createElement(Ve.a,null)),title:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"h6",displayInline:!0},e.name)),subheader:r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+oa(e.dateCreated))}),r.a.createElement(pe.a,{className:ia(a.cardContent,a.gridContent)},r.a.createElement(he.Scrollbars,{autoHide:!0,autoHeight:!0},r.a.createElement(de.a,{cellHeight:150},e.photos.map((function(e){return r.a.createElement(fe.a,{key:e._id,cols:1},r.a.createElement("img",{src:"/images/photos/medium/"+e.src,alt:e.src}))}))))),r.a.createElement(ne.a,null,r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbLikes," Likes")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbCommentaires," Commentaires")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbVues," Vues")))))}))))},ua={"Content-Type":"application/json"},ma=function(e,a){return U.a.post("/api/friends/create",{email:e,message:a},{headers:ua})},pa=function(e){return U.a.post("/api/friends/add",{id:e},{headers:ua})},da=function(e){return U.a.post("/api/friends/remove",{id:e},{headers:ua})},fa={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},Ea={get:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/get",{id:a},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/getAll",{},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/add",{id:a},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),accepted:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/accepted",{id:a},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),refused:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/refused",{id:a},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/remove",{id:a},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),setVue:function(){var e=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/setVue",{id:a},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),setVueAll:function(){var e=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/api/requests/setVueAll",{},{headers:fa}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},ga=Object(u.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,height:"100vh",overflow:"auto"},icon:{marginRight:e.spacing(2)},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2)},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},gridContent:{paddingTop:e.spacing(2)},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}})),ha=function(e){var a=ga(),t=r.a.useState(!1),n=Object(l.a)(t,2),i=n[0],s=(n[1],r.a.useState(!1)),o=Object(l.a)(s,2),c=o[0],u=o[1],m=r.a.useState(!1),p=Object(l.a)(m,2),f=p[0],h=p[1],b=r.a.useState(""),v=Object(l.a)(b,2),y=v[0],x=v[1],w=r.a.useState(""),k=Object(l.a)(w,2),j=k[0],C=k[1],S=r.a.useState([]),O=Object(l.a)(S,2),N=O[0],T=O[1],P=function(a,t){a.preventDefault(),da(t).then((function(a){e.setProfile(a.data.user),$.a.success("Amis effacer","Succes")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))};return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},i?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(pe.a,null,r.a.createElement(M.a,{variant:"outlined",required:!0,fullWidth:!0,autoFocus:!0,id:"email",label:"Rechercher une personne",value:y,onInput:function(e){e.preventDefault(),x(e.target.value),""!==y&&Z.find(e.target.value).then((function(e){T(e.data.users),u(e.data.isEmail)}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))},name:"email",autoComplete:"Email, nom, prenom",InputProps:{startAdornment:r.a.createElement(ke.a,{position:"start"},r.a.createElement(z.a,{color:"textSecondary"}))}}),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"right",style:{paddingTop:6}},N.length>0?N.length:"Aucuns"," utilisateurs trouv\xe9s"))),0===N.length?c&&r.a.createElement("div",{className:a.gridContent},r.a.createElement("div",{className:a.paper},r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(a){a.preventDefault(),h(!0),ma(y,j).then((function(a){e.setProfile(a.data.user),x(""),h(!1),$.a.success("Invitation envoyer","Succes")}),(function(e){h(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Adresse email",value:y,name:"email",autoComplete:"Adresse email",disabled:!0})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{variant:"outlined",required:!0,fullWidth:!0,id:"message",label:"Message mail",value:j,onInput:function(e){e.preventDefault(),C(e.target.value)},name:"message",autoComplete:"Message personnaliser",disabled:f,multiline:!0,rows:3})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},f?r.a.createElement(I.a,{color:"inherit"}):"Envoyer l'invitation")))))):r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},N.map((function(a){return r.a.createElement(B.a,{item:!0,key:a._id},r.a.createElement(te.a,null,r.a.createElement(me.a,{avatar:r.a.createElement(D.b,{to:"/Users/"+a._id,style:{color:"inherit",textDecoration:"none"}},"false"!==a.picture?r.a.createElement(E.a,{alt:a.prenom+" "+a.nom,src:"/images/users/small/"+a.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"}))),title:r.a.createElement(D.b,{to:"/Users/"+a._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"body2",displayInline:!0},a.validated?a.prenom+" "+a.nom:a.email)),subheader:a.validated?"Enregistrer":"Non enregistrer"}),r.a.createElement(pe.a,null,r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},a.albums.length," Albums    ",a.friends.length," Amis")),r.a.createElement(ne.a,null,e.profile.friends.map((function(e){return e._id})).includes(a._id)?r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(e){return P(e,a._id)}},"Retirer comme amis"):e.profile.friendRequests_send.map((function(e){return e.to._id})).includes(a._id)?r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(e){return P(e,a._id)}},"Annuler ma demande d'amis"):r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(t){return function(a,t){a.preventDefault(),pa(t).then((function(a){e.setProfile(a.data.user),$.a.success("Demande envoyer","Succes")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(t,a._id)}},"Demander comme amis"))))})))))},ba=Object(u.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,height:"100vh",overflow:"auto"},icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},gridContent:{paddingTop:e.spacing(2)},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}})),va=function(e){var a=ba(),t=r.a.useState(!0),n=Object(l.a)(t,2),i=n[0];n[1];return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},i?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement("div",null,"Loaded"))},ya=t(183),xa=t.n(ya),wa=t(133),ka=t.n(wa),ja=t(72),Ca=t(71),Sa=Object(u.a)((function(e){return{root:{maxWidth:345},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]}}}));function Oa(e){var a=Ca(Date.now()),t=Ca(e),n=a.diff(t,"seconds"),r=a.diff(t,"minutes"),i=a.diff(t,"hours"),s=a.diff(t,"days"),l=a.diff(t,"weeks"),o=a.diff(t,"months"),c=a.diff(t,"years");return c>0?o-12*c>0?c+" ans et "+(o-12*c)+" mois":c+" ans":o>0?s-30*o>0?o+" mois et "+(s-30*o)+" jours":o+" mois":l>0?s-7*l>0?l+" semaines et "+(s-7*l)+" jours":l+" semaines":s>0?i-24*s>0?s+" jours et "+(i-24*s)+" heures":s+" jours":i>0?r-60*i>0?i+" heures et "+(r-60*i)+" minutes":i+" heures":r>0?n-60*r>0?r+" minutes et "+(n-60*r)+" secondes":r+" minutes":n>0?n+" secondes":void 0}var Na=function(e){var a=Sa(),t=Object(P.h)().id,n=r.a.useState(!0),i=Object(l.a)(n,2),s=i[0],o=i[1],c=r.a.useState(!1),u=Object(l.a)(c,2),m=u[0],p=u[1],f=r.a.useState(!1),h=Object(l.a)(f,2),b=h[0],v=h[1],y=r.a.useState(!1),x=Object(l.a)(y,2),w=x[0],k=x[1],j=r.a.useState(!1),C=Object(l.a)(j,2),S=C[0],O=C[1],N=r.a.useState([]),T=Object(l.a)(N,2),z=T[0],M=T[1];r.a.useEffect((function(){o(!0),Z.get(t).then((function(a){a.data.error?(M(a.data.user),v(a.data.error)):(M(a.data),v(!1)),k(e.profile.friends.map((function(e){return e._id})).includes(t)),O(e.profile.friendRequests_send.map((function(e){return e.to._id})).includes(t)),o(!1)}),(function(e){p("Erreur "+e.response.status+" : "+e.response.data),o(!1)}))}),[t]);var q=function(a){a.preventDefault(),da(t).then((function(a){e.setProfile(a.data.user),k(e.profile.friends.map((function(e){return e._id})).includes(t)),O(e.profile.friendRequests_send.map((function(e){return e.to._id})).includes(t)),$.a.success("Amis effacer","Succes")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))};return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},s?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):m?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},m):r.a.createElement("div",null,r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0},"false"!==z.picture?r.a.createElement(E.a,{className:a.large,alt:z.prenom+" "+z.nom,src:"/images/users/small/"+z.picture}):r.a.createElement(E.a,{className:a.large},r.a.createElement(_.a,{style:{fontSize:50}}))),r.a.createElement(B.a,{item:!0},r.a.createElement(d.a,{variant:"h6",displayInline:!0},z.validated?z.prenom+" "+z.nom:z.email),r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+Oa(z.createdAt))),r.a.createElement(B.a,{item:!0,justify:"center"},w?S?r.a.createElement(ie.a,{label:"Annuler l'invitation",icon:r.a.createElement(ka.a,null),color:"primary",variant:"outlined",clickable:!0,onClick:q}):r.a.createElement(ie.a,{label:"Retirer de mes amis",icon:r.a.createElement(ka.a,null),color:"primary",variant:"outlined",clickable:!0,onClick:q}):r.a.createElement(ie.a,{label:"Envoyer une invitation",icon:r.a.createElement(xa.a,null),color:"primary",clickable:!0,onClick:function(a){a.preventDefault(),pa(t).then((function(a){e.setProfile(a.data.user),k(e.profile.friends.map((function(e){return e._id})).includes(t)),O(e.profile.friendRequests_send.map((function(e){return e.to._id})).includes(t)),$.a.success("Amis ajouter","Succes")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}}))),b?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},b):r.a.createElement(B.a,{container:!0,spacing:4},z.albums.map((function(e){return r.a.createElement(B.a,{item:!0,key:e._id,xs:12,sm:6,md:4},r.a.createElement(te.a,{className:a.card},r.a.createElement(me.a,{avatar:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(E.a,{"aria-label":"recipe",className:a.purple},e.name.charAt(0).toUpperCase())),title:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"h6",displayInline:!0},e.name)),subheader:r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+Oa(e.dateCreated))}),r.a.createElement(pe.a,{className:ja(a.cardContent,a.gridContent)},r.a.createElement(he.Scrollbars,{autoHide:!0,autoHeight:!0},r.a.createElement(de.a,{cellHeight:150},e.photos.map((function(e){return r.a.createElement(fe.a,{key:e._id,cols:1},r.a.createElement("img",{src:"/images/photos/medium/"+e.src,alt:e.src}))}))))),r.a.createElement(ne.a,null,r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbLikes," Likes")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbCommentaires," Commentaires")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbVues," Vues")))))})))))},_a=t(2),Aa=t(359),Ia=t(349),Ta=Object(u.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,height:"100vh",overflow:"auto"},icon:{marginRight:e.spacing(2)},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2)},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},gridContent:{paddingTop:e.spacing(2)},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}})),za=function(e){var a=Ta(),t=r.a.useState(!0),n=Object(l.a)(t,2),i=n[0],s=n[1],o=r.a.useState([]),u=Object(l.a)(o,2),m=u[0],p=u[1],f=r.a.useState([]),b=Object(l.a)(f,2),v=b[0],y=b[1],x=r.a.useState([]),w=Object(l.a)(x,2),k=w[0],j=w[1],C=r.a.useState(0),S=Object(l.a)(C,2),O=(S[0],S[1]),N=r.a.useState(0),T=Object(l.a)(N,2),z=T[0],P=T[1];r.a.useEffect((function(){Ea.getAll().then((function(a){s(!1),p(a.data.friends),j(a.data.receive),y(a.data.send),a.data.receive.length>0&&O(a.data.receive.filter((function(e){return!e.vue})).length),e.setNewRequest(a.data.receive.filter((function(e){return!e.vue})).length)}),(function(e){s(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),[0]);var M=function(a){if(null===e.profile||null===a||!e.profile||!a)return!1;var t=e.profile.friendRequests_send.map((function(e){return e.to._id})).indexOf(a._id);if(-1!==t){var n=e.profile.friendRequests_send[t];return n.vue?n.accepted:n.vue}return!0};function q(e){var a=e.children,t=e.value,n=e.index,i=Object(_a.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},i),a)}return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},i?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement("div",null,r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0},"false"!==e.profile.picture?r.a.createElement(E.a,{alt:e.profile.prenom+" "+e.profile.nom,src:"/images/users/small/"+e.profile.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"}))),r.a.createElement(B.a,{item:!0},r.a.createElement(d.a,{variant:"h6",displayInline:!0},"Mes amis"))),r.a.createElement(Aa.a,{value:z,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){P(a)},centered:!0,"aria-label":"disabled tabs example"},m.length>0?r.a.createElement(Ia.a,{label:"Mes amis ("+m.length+")"}):r.a.createElement(Ia.a,{label:"Mes amis"}),k.length>0?r.a.createElement(Ia.a,{label:"Mes invitations re\xe7us ("+k.length+")"}):r.a.createElement(Ia.a,{label:"Mes invitations re\xe7us"}),v.length>0?r.a.createElement(Ia.a,{label:"Mes invitations envoy\xe9s ("+v.length+")"}):r.a.createElement(Ia.a,{label:"Mes invitations envoy\xe9s"})),r.a.createElement(q,{value:z,index:0},0===e.profile.friends.length&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucuns amis")),r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},m.map((function(t){return r.a.createElement(B.a,{item:!0,key:t._id},r.a.createElement(te.a,null,r.a.createElement(me.a,{avatar:t.validated?M(t)?"false"!==t.picture?r.a.createElement(E.a,{className:a.small,alt:t.prenom+" "+t.nom,src:"/images/users/small/"+t.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)):r.a.createElement(h.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ye.a,{fontSize:"small",color:"inherit"})},"false"!==t.picture?r.a.createElement(E.a,{className:a.small,alt:t.validated?t.prenom+" "+t.nom:t.email,src:"/images/users/small/"+t.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))):r.a.createElement(h.a,{overlap:"rectangle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ke.a,{fontSize:"small",color:"inherit"})},"false"!==t.picture?r.a.createElement(E.a,{className:a.small,alt:t.prenom+" "+t.nom,src:"/images/users/small/"+t.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))),title:r.a.createElement(D.b,{to:"/Users/"+t._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"body2",displayInline:!0},t.validated?t.prenom+" "+t.nom:t.email)),subheader:t.validated?"Enregistrer":"Non enregistrer"}),r.a.createElement(pe.a,null,r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},t.albums.length," Albums    ",t.friends.length," Amis")),r.a.createElement(ne.a,null,r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(a){return function(a,t){a.preventDefault(),da(t).then((function(a){e.setProfile(a.data.user),$.a.success("Amis effacer","Succes")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(a,t._id)}},"Retirer de mes amis"))))})))),r.a.createElement(q,{value:z,index:1},0===k.length&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucunes invitations re\xe7us")),r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},k.map((function(t){var n=t.from;return r.a.createElement(B.a,{item:!0,key:n._id},r.a.createElement(te.a,null,r.a.createElement(me.a,{avatar:"false"!==n.picture?r.a.createElement(E.a,{className:a.small,alt:n.prenom+" "+n.nom,src:"/images/users/small/"+n.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)),title:r.a.createElement(D.b,{to:"/Users/"+n._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"body2",displayInline:!0},n.validated?n.prenom+" "+n.nom:n.email)),subheader:n.validated?"Enregistrer":"Non enregistrer"}),r.a.createElement(pe.a,null,r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},n.albums.length," Albums    ",n.friends.length," Amis")),r.a.createElement(ne.a,null,r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(a){return function(a,t){a.preventDefault(),Ea.accepted(t._id).then((function(a){Ea.getAll().then((function(a){p(a.data.friends),y(a.data.send),j(a.data.receive),a.data.receive.length>0&&O(a.data.receive.filter((function(e){return!e.vue})).length),e.setNewRequest(a.data.receive.filter((function(e){return!e.vue})).length);var t=Object(c.a)({},e.profile);t.friends=a.data.friends,t.friendRequests_receive=k,t.friendRequests_send=v,e.setProfile(t)}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(a,t)}},"Accepter"),r.a.createElement(g.a,{size:"small",color:"secondary",onClick:function(a){return function(a,t){a.preventDefault(),Ea.refused(t._id).then((function(a){Ea.getAll().then((function(a){p(a.data.friends),y(a.data.send),j(a.data.receive),a.data.receive.length>0&&O(a.data.receive.filter((function(e){return!e.vue})).length),e.setNewRequest(a.data.receive.filter((function(e){return!e.vue})).length);var t=Object(c.a)({},e.profile);t.friends=a.data.friends,t.friendRequests_receive=k,t.friendRequests_send=v,e.setProfile(t)}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(a,t)}},"Refuser"))))})))),r.a.createElement(q,{value:z,index:2},0===v.length&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucunes invitations envoy\xe9s")),r.a.createElement(B.a,{container:!0,spacing:4,className:a.gridContent},v.map((function(t){var n=t.to;return r.a.createElement(B.a,{item:!0,key:n._id},r.a.createElement(te.a,null,r.a.createElement(me.a,{avatar:n.validated?"false"!==n.picture?r.a.createElement(E.a,{className:a.small,alt:n.prenom+" "+n.nom,src:"/images/users/small/"+n.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)):r.a.createElement(h.a,{overlap:"rectangle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ke.a,{fontSize:"small",color:"inherit"})},"false"!==n.picture?r.a.createElement(E.a,{className:a.small,alt:n.prenom+" "+n.nom,src:"/images/users/small/"+n.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))),title:r.a.createElement(D.b,{to:"/Users/"+n._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"body2",displayInline:!0},n.validated?n.prenom+" "+n.nom:n.email)),subheader:n.validated?"Enregistrer":"Non enregistrer"}),r.a.createElement(pe.a,null,r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},n.albums.length," Albums    ",n.friends.length," Amis")),r.a.createElement(ne.a,null,r.a.createElement(g.a,{size:"small",color:"secondary",onClick:function(a){return function(a,t){a.preventDefault(),Ea.remove(t._id).then((function(a){Ea.getAll().then((function(a){p(a.data.friends),y(a.data.send),j(a.data.receive),a.data.receive.length>0&&O(a.data.receive.filter((function(e){return!e.vue})).length),e.setNewRequest(a.data.receive.filter((function(e){return!e.vue})).length);var t=Object(c.a)({},e.profile);t.friends=m,t.friendRequests_receive=k,t.friendRequests_send=v,e.setProfile(t)}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(a,t)}},"Annuler"))))}))))))},Da=t(324),Pa=t(351),Ma=t(353),Ba=t(184),qa=t.n(Ba),Ra=t(185),Wa=t.n(Ra),Ga=t(71),La=Object(u.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column",paddingTop:e.spacing(2),position:"relative"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},inline:{display:"inline"},overlay:{position:"absolute",top:"2%",left:"94%"},listCommentaires:{paddingTop:e.spacing(7)},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}}));function Va(e){var a=Ga(Date.now()),t=Ga(e),n=a.diff(t,"seconds"),r=a.diff(t,"minutes"),i=a.diff(t,"hours"),s=a.diff(t,"days"),l=a.diff(t,"weeks"),o=a.diff(t,"months"),c=a.diff(t,"years");return c>0?o-12*c>0?c+" ans et "+(o-12*c)+" mois":c+" ans":o>0?s-30*o>0?o+" mois et "+(s-30*o)+" jours":o+" mois":l>0?s-7*l>0?l+" semaines et "+(s-7*l)+" jours":l+" semaines":s>0?i-24*s>0?s+" jours et "+(i-24*s)+" heures":s+" jours":i>0?r-60*i>0?i+" heures et "+(r-60*i)+" minutes":i+" heures":r>0?n-60*r>0?r+" minutes et "+(n-60*r)+" secondes":r+" minutes":n>0?n+" secondes":void 0}var Fa=function(e){var a=La(),t=Object(P.h)().id,n=r.a.useState(!0),i=Object(l.a)(n,2),s=i[0],o=i[1],c=r.a.useState(!1),u=Object(l.a)(c,2),m=u[0],p=u[1],g=r.a.useState(!1),h=Object(l.a)(g,2),b=h[0],v=h[1],y=r.a.useState(!1),x=Object(l.a)(y,2),w=x[0],k=x[1],S=r.a.useState(!1),N=Object(l.a)(S,2),T=N[0],z=N[1],q=r.a.useState(!1),R=Object(l.a)(q,2),G=R[0],L=R[1],V=r.a.useState(""),F=Object(l.a)(V,2),U=F[0],H=F[1],Z=r.a.useState(!1),X=Object(l.a)(Z,2),J=X[0],K=X[1],Q=r.a.useState(!1),Y=Object(l.a)(Q,2),ee=Y[0],ae=Y[1];r.a.useEffect((function(){o(!0),v(!1),p(!1),t?qe.get(t).then((function(a){p(a.data.photo.album.isBanned),k(a.data.photo),z(a.data.next),L(a.data.photo.commentaires),ae(a.data.photo.likes.map((function(e){return e.author._id})).includes(e.profile._id)),o(!1)}),(function(e){v("Erreur "+e.response.status+" : "+e.response.data),o(!1)})):(o(!1),v("Pas d'identifiant"))}),[t]);return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},s?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):b?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},b):m?r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Vous n'avez pas acces \xe0 cet album"):r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,key:e.id,xs:12,sm:9},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0},"false"!==w.author.picture?r.a.createElement(E.a,{className:a.large,alt:w.author.prenom+" "+w.author.nom,src:"/images/users/small/"+w.author.picture}):r.a.createElement(E.a,{className:a.large},r.a.createElement(_.a,{style:{fontSize:50}}))),r.a.createElement(B.a,{item:!0},r.a.createElement(d.a,{variant:"h6",displayInline:!0},w.album.name),r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"Il y a "+Va(w.album.dateCreated)))),r.a.createElement(te.a,{className:a.card},r.a.createElement(D.b,{to:"/Photos/"+T,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(re.a,{className:a.cardMedia,image:"/images/photos/original/"+w.src})),r.a.createElement(f.a,{"aria-label":w._id,className:a.overlay,onClick:function(a){ee?qe.delLike(t).then((function(a){p(a.data.photo.album.isBanned),k(a.data.photo),z(a.data.next),L(a.data.photo.commentaires),ae(a.data.photo.likes.map((function(e){return e.author._id})).includes(e.profile._id))}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)})):qe.addLike(t).then((function(a){p(a.data.photo.album.isBanned),k(a.data.photo),z(a.data.next),L(a.data.photo.commentaires),ae(a.data.photo.likes.map((function(e){return e.author._id})).includes(e.profile._id))}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},ee?r.a.createElement(qa.a,{style:{fontSize:40},color:"secondary"}):r.a.createElement(Wa.a,{style:{fontSize:40,color:"white"}})))),r.a.createElement(B.a,{item:!0,key:e.id,xs:12,sm:3},r.a.createElement(d.a,{variant:"subtitle1",gutterBottom:!0,className:a.listCommentaires},"(",G.length,") commentaires"),r.a.createElement(j.a,null),r.a.createElement(Da.a,null,G.map((function(n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==n.author.picture?r.a.createElement(E.a,{alt:n.author.prenom+" "+n.author.nom,src:"/images/users/small/"+n.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"}))),r.a.createElement(O.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},n.author.prenom+" "+n.author.nom)," \u2014 "+n.text,r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+Va(n.updatedAt)))}),e.profile._id===n.author._id&&r.a.createElement(Ma.a,{size:"small",onClick:function(e){return function(e,a){e.preventDefault(),qe.delComment(a,t).then((function(e){L(e.data)}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}(e,n._id)},key:n._id},r.a.createElement(f.a,{edge:"end","aria-label":"delete"},r.a.createElement(Ze.a,null)))),r.a.createElement(j.a,{variant:"inset",component:"li"}))})),r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(B.a,{container:!0,spacing:1},r.a.createElement(B.a,{item:!0},"false"!==e.profile.picture?r.a.createElement(E.a,{alt:e.profile.prenom+" "+e.profile.nom,src:"/images/users/small/"+e.profile.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"}))),r.a.createElement(B.a,{item:!0},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),K(!0),qe.addComment(U,t).then((function(e){L(e.data),H(""),K(!1)}),(function(e){K(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},r.a.createElement(M.a,{id:"input-with-icon-grid",label:"Commentaire",fullWidth:!0,disabled:J,value:U,onChange:function(e){H(e.target.value)}})))))))))},Ua=t(354),Ha=t(93),Za=t.n(Ha),Xa=t(83),$a=t.n(Xa),Ja=t(84),Ka=t.n(Ja),Qa=t(72),Ya=t(71),et=Object(u.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},inline:{display:"inline"},cPointer:{cursor:"pointer"},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"url(https://source.unsplash.com/random)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(o.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250}}}));function at(e){var a=Ya(Date.now()),t=Ya(e),n=a.diff(t,"seconds"),r=a.diff(t,"minutes"),i=a.diff(t,"hours"),s=a.diff(t,"days"),l=a.diff(t,"weeks"),o=a.diff(t,"months"),c=a.diff(t,"years");return c>0?o-12*c>0?c+" ans et "+(o-12*c)+" mois":c+" ans":o>0?s-30*o>0?o+" mois et "+(s-30*o)+" jours":o+" mois":l>0?s-7*l>0?l+" semaines et "+(s-7*l)+" jours":l+" semaines":s>0?i-24*s>0?s+" jours et "+(i-24*s)+" heures":s+" jours":i>0?r-60*i>0?i+" heures et "+(r-60*i)+" minutes":i+" heures":r>0?n-60*r>0?r+" minutes et "+(n-60*r)+" secondes":r+" minutes":n>0?n+" secondes":void 0}var tt=function(e){var a=et(),t=(Object(P.f)(),Object(P.h)()),n=t.userId,i=t.invitId,s=r.a.useState(!0),o=Object(l.a)(s,2),c=o[0],u=o[1],m=r.a.useState(!1),p=Object(l.a)(m,2),f=p[0],h=p[1],b=r.a.useState(!1),v=Object(l.a)(b,2),y=v[0],x=v[1],w=r.a.useState([]),k=Object(l.a)(w,2),S=k[0],N=k[1],T=r.a.useState([]),z=Object(l.a)(T,2),M=z[0],q=z[1],R=r.a.useState([]),G=Object(l.a)(R,2),L=G[0],V=G[1];r.a.useEffect((function(){i?Z.getInvitation(i).then((function(e){$.a.success("Invitation v\xe9rifier et valid\xe9","Invitation")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)})):n&&Z.validEmail(n).then((function(e){$.a.success("Email v\xe9rifier et valid\xe9","V\xe9rification")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)})),le.getDashboard().then((function(e){N(e.data.albums),q(e.data.commentaires),V(e.data.likes),u(!1)}),(function(e){u(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),[0]);return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},c?r.a.createElement(A.a,{className:a.backdrop,open:!0},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,key:"listAlbums",xs:12,sm:9},r.a.createElement(d.a,{variant:"h6",gutterBottom:!0},"Derniers albums"),r.a.createElement(j.a,null),r.a.createElement("br",null),0===S.length&&r.a.createElement("div",null,r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucuns albums"),r.a.createElement(D.b,{to:"/Album/Create",style:{color:"inherit",textDecoration:"none"}},r.a.createElement(g.a,{color:"primary",variant:"contained",startIcon:r.a.createElement(Za.a,null)},"Cr\xe9er un album"))),r.a.createElement(B.a,{container:!0,spacing:4},S.map((function(e){return r.a.createElement(B.a,{item:!0,key:e.id,xs:12,sm:6,md:4},r.a.createElement(te.a,{className:a.card},r.a.createElement(me.a,{avatar:r.a.createElement(D.b,{to:"/Users/"+e.author._id,style:{color:"inherit",textDecoration:"none"}},"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.prenom+" "+e.author.nom,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),title:r.a.createElement(D.b,{to:"/Album/"+e._id,style:{color:"inherit",textDecoration:"none"}},r.a.createElement(d.a,{variant:"h6",displayInline:!0},e.name)),subheader:r.a.createElement(d.a,{variant:"caption",gutterBottom:!0,displayInline:!0},"il y a "+at(e.dateCreated))}),r.a.createElement(pe.a,{className:Qa(a.cardContent,a.gridContent)},r.a.createElement(he.Scrollbars,{autoHide:!0,autoHeight:!0},r.a.createElement(de.a,{cellHeight:150},r.a.createElement(fe.a,{key:"Subheader",cols:2,style:{height:"auto"}},r.a.createElement(De.a,{component:"div"},e.title)),e.photos.map((function(e){return r.a.createElement(fe.a,{key:e._id,cols:1,className:a.photoClick},r.a.createElement("img",{src:"/images/photos/medium/"+e.src,alt:e.src}))}))))),r.a.createElement(ne.a,null,r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbLikes," Likes")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbCommentaires," Commentaires")),r.a.createElement(D.b,{to:"/Album/"+e._id},r.a.createElement(g.a,{size:"small",color:"primary"},e.nbVues," Vues")))))})))),r.a.createElement(B.a,{item:!0,key:"ListCommetairesLikes",xs:12,sm:3},r.a.createElement(d.a,{variant:"h6",gutterBottom:!0},"Derniers commentaires"),r.a.createElement(j.a,null),0===M.length&&r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucuns commentaires"),M.length>5?r.a.createElement("div",null,r.a.createElement(Da.a,null,M.slice(0,5).map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.validated?e.author.prenom+" "+e.author.nom:e.author.email,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),r.a.createElement(O.a,{secondary:r.a.createElement("div",null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},e.author.prenom+" "+e.author.nom)," \u2014 "+e.text,r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+at(e.createdAt)))})),r.a.createElement(j.a,{variant:"inset",component:"li"}))}))),r.a.createElement(Ua.a,{in:f,timeout:"auto",unmountOnExit:!0},r.a.createElement(Da.a,null,M.slice(5).map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.validated?e.author.prenom+" "+e.author.nom:e.author.email,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),r.a.createElement(O.a,{secondary:r.a.createElement("div",null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},e.author.prenom+" "+e.author.nom)," \u2014 "+e.text,r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+at(e.createdAt)))})),r.a.createElement(j.a,{variant:"inset",component:"li"}))})))),r.a.createElement(C.a,{button:!0,onClick:function(){h(!f)}},f?r.a.createElement($a.a,null):r.a.createElement(Ka.a,null),r.a.createElement(O.a,{primary:f?"Voir moins":"Voir plus"}))):r.a.createElement(Da.a,null,M.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.validated?e.author.prenom+" "+e.author.nom:e.author.email,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),r.a.createElement(O.a,{secondary:r.a.createElement("div",null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},e.author.prenom+" "+e.author.nom)," \u2014 "+e.text,r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+at(e.createdAt)))})),r.a.createElement(j.a,{variant:"inset",component:"li"}))}))),r.a.createElement(d.a,{variant:"h6",gutterBottom:!0},"Derniers likes"),r.a.createElement(j.a,null),0===L.length&&r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Aucuns likes"),L.length>5?r.a.createElement("div",null,r.a.createElement(Da.a,null,L.slice(0,5).map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.validated?e.author.prenom+" "+e.author.nom:e.author.email,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),r.a.createElement(O.a,{secondary:r.a.createElement("div",null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},e.author.prenom+" "+e.author.nom),r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+at(e.createdAt)))})),r.a.createElement(j.a,{variant:"inset",component:"li"}))}))),r.a.createElement(Ua.a,{in:y,timeout:"auto",unmountOnExit:!0},r.a.createElement(Da.a,null,L.slice(5).map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.validated?e.author.prenom+" "+e.author.nom:e.author.email,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),r.a.createElement(O.a,{secondary:r.a.createElement("div",null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},e.author.prenom+" "+e.author.nom),r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+at(e.createdAt)))})),r.a.createElement(j.a,{variant:"inset",component:"li"}))})))),r.a.createElement(C.a,{button:!0,onClick:function(){x(!y)}},y?r.a.createElement($a.a,null):r.a.createElement(Ka.a,null),r.a.createElement(O.a,{primary:y?"Voir moins":"Voir plus"}))):r.a.createElement(Da.a,null,L.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.a,{alignItems:"flex-start"},r.a.createElement(Pa.a,null,"false"!==e.author.picture?r.a.createElement(E.a,{alt:e.author.validated?e.author.prenom+" "+e.author.nom:e.author.email,src:"/images/users/small/"+e.author.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,null))),r.a.createElement(O.a,{secondary:r.a.createElement("div",null,r.a.createElement(d.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},e.author.prenom+" "+e.author.nom),r.a.createElement(d.a,{variant:"caption",display:"block",gutterBottom:!0},"il y a "+at(e.createdAt)))})),r.a.createElement(j.a,{variant:"inset",component:"li"}))}))))))},nt=t(186),rt=t.n(nt),it=t(187),st=t.n(it),lt=t(188),ot=t.n(lt),ct=Object(u.a)((function(e){return{root:{flexGrow:1,marginTop:e.spacing(1),marginBottom:e.spacing(2)},media:{height:0,paddingTop:"56.25%"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1,border:"none"},cardGrid:{paddingTop:e.spacing(2),paddingBottom:e.spacing(8)},inline:{display:"inline"},submit:{margin:e.spacing(3,0,2)},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"url(https://source.unsplash.com/random)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(o.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),gridContent:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:250}}}));var ut=function(e){var a=ct(),t=Object(P.h)(),n=t.userId,i=t.invitId,s=r.a.useState(!1),o=Object(l.a)(s,2),c=o[0],u=o[1],m=r.a.useState(""),p=Object(l.a)(m,2),f=p[0],E=p[1],h=r.a.useState(!1),b=Object(l.a)(h,2),v=b[0],y=b[1],x=r.a.useState(""),w=Object(l.a)(x,2),k=w[0],j=w[1],C=r.a.useState(!1),S=Object(l.a)(C,2),O=S[0],N=S[1],_=r.a.useState(""),A=Object(l.a)(_,2),T=A[0],z=A[1],D=r.a.useState(!1),q=Object(l.a)(D,2),R=q[0],G=q[1],L=r.a.useState(""),V=Object(l.a)(L,2),F=V[0],U=V[1],H=r.a.useState(!1),X=Object(l.a)(H,2),J=X[0],K=X[1];r.a.useEffect((function(){i?Z.getInvitation(i).then((function(e){z(e.data.email),$.a.success("Invitation v\xe9rifier et valid\xe9","Invitation")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)})):n&&Z.validEmail(n).then((function(e){$.a.success("Email v\xe9rifier et valid\xe9","V\xe9rification")}),(function(e){e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),[0]);return r.a.createElement(W.a,{className:a.cardGrid,maxWidth:!1},r.a.createElement(B.a,{container:!0,spacing:4},r.a.createElement(B.a,{item:!0,xs:12,sm:9},r.a.createElement("img",{src:"Accueil_1.png",alt:"Accueil",style:{width:"100%"}})),r.a.createElement(B.a,{item:!0,xs:12,sm:3,className:a.gridContent},r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(a){a.preventDefault(),y(!f),N(!k),T||G(!0),K(!F),T&&f&&k&&T&&F?(u(!0),Z.signup(f,k,T,F).then((function(a){u(!1),e.setProfile(a.data.user),e.setAuth(!0)}),(function(a){u(!1),e.setAuth(!1),a.response.status>400&&a.response.status<500?$.a.warning(a.response.data,"Erreur "+a.response.status):$.a.error(a.response.data,"Erreur "+a.response.status)}))):u(!1)}},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(M.a,{error:v,autoComplete:"Pr\xe9nom",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"Pr\xe9nom",value:f,onInput:function(e){E(e.target.value),e.target.value?y(!1):y(!0)},disabled:c})),r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(M.a,{error:O,variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Nom",value:k,onInput:function(e){j(e.target.value),e.target.value?N(!1):N(!0)},name:"lastName",autoComplete:"Nom de famille",disabled:c})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{error:R,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Adresse email",value:T,onInput:function(e){var a=e.target.value;z(a),/^[a-zA-Z0-9,.'-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(a)?G(!1):G(!0)},name:"email",autoComplete:"Adresse email",disabled:c})),r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(M.a,{error:J,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Mot de passe",value:F,onInput:function(e){U(e.target.value),e.target.value?K(!1):K(!0)},type:"password",id:"password",autoComplete:"Mot de passe",disabled:c}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},c?r.a.createElement(I.a,{color:"inherit"}):"S'enregistrer")))),r.a.createElement(B.a,{container:!0,spacing:4},r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(B.a,{container:!0,spacing:4,justify:"center",alignItems:"center",className:a.root},r.a.createElement(B.a,{item:!0},r.a.createElement(rt.a,{fontSize:"large"})),r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{variant:"h6"},"Cr\xe9er votre propre albums"),r.a.createElement(d.a,{variant:"body2"},"T\xe9l\xe9charger en quelques cliques vos photos, ajouter un titre et des tags afin que vos amis puissent les voirs."))),r.a.createElement(B.a,{container:!0,spacing:4,justify:"center",alignItems:"center",className:a.root},r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{variant:"h6"},"Invitez vos amis"),r.a.createElement(d.a,{variant:"body2"},"Rechercher vos amis par email, ou par leur pr\xe9nom.")),r.a.createElement(B.a,{item:!0},r.a.createElement(st.a,{fontSize:"large"}))),r.a.createElement(B.a,{container:!0,spacing:4,justify:"center",alignItems:"center",className:a.root},r.a.createElement(B.a,{item:!0},r.a.createElement(ot.a,{fontSize:"large"})),r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement(d.a,{variant:"h6"},"Limitez l'acces"),r.a.createElement(d.a,{variant:"body2"},"Vous pourriez ainsi restreindre l'acces de vos photos \xe0 cetains de vos amis seulement.")))),r.a.createElement(B.a,{item:!0,xs:12,sm:6},r.a.createElement("img",{src:"Accueil_2.png",alt:"Accueil",style:{width:"100%"}}))))},mt=t(356),pt=t(191),dt=t.n(pt),ft=t(190),Et=t.n(ft),gt=t(134),ht=t.n(gt),bt=t(189),vt=t.n(bt),yt=t(193),xt=t.n(yt),wt=t(194),kt=t.n(wt),jt=t(72);function Ct(e){var a=e.icon,t=e.primary,n=e.to,i=r.a.useMemo((function(){return r.a.forwardRef((function(e,a){return r.a.createElement(D.b,Object.assign({to:n,ref:a},e))}))}),[n]);return r.a.createElement("li",null,r.a.createElement(C.a,{button:!0,component:i},a?r.a.createElement(S.a,null,a):null,r.a.createElement(O.a,{primary:t})))}var St=Object(u.a)((function(e){return{root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},toolbar:{paddingRight:24},toolbarIcon:Object(c.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,height:"100vh"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(o.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),dNone:{display:"none"},orange:{color:e.palette.getContrastText(Ee.a[500]),backgroundColor:Ee.a[500]},purple:{color:e.palette.getContrastText(ge.a[500]),backgroundColor:ge.a[500]},small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(7),height:e.spacing(7)}}}));var Ot=function(e){var a=St(),t=r.a.useState(!1),n=Object(l.a)(t,2),i=n[0],s=n[1],o=r.a.useState(null),c=Object(l.a)(o,2),u=c[0],y=c[1],N=r.a.useState(0),T=Object(l.a)(N,2),M=T[0],B=T[1];r.a.useEffect((function(){Z.isAuth().then((function(e){e?Z.getMe().then((function(e){y(e.data.user),B(e.data.user.friendRequests_receive.filter((function(e){return!e.vue})).length),s(!0),H(!1),L(!0)})):(s(e),H(!1),L(!0))}),(function(e){s(!1),H(!1),L(!0)}))}),[0]);var q=function(e){if(null===u||null===e||!u||!e)return!1;var a=u.friendRequests_send.map((function(e){return e.to._id})).indexOf(e._id);if(-1!==a){var t=u.friendRequests_send[a];return t.vue?t.accepted:t.vue}return!0},R=r.a.useState(!0),W=Object(l.a)(R,2),G=W[0],L=W[1],V=r.a.useState(!0),F=Object(l.a)(V,2),U=F[0],H=F[1],X=r.a.useState(null),J=Object(l.a)(X,2),Q=J[0],Y=J[1],ee=r.a.useState(!1),te=Object(l.a)(ee,2),ne=te[0],re=te[1],ie=r.a.useState(!1),se=Object(l.a)(ie,2),le=se[0],oe=se[1],ce=r.a.useState(!1),me=Object(l.a)(ce,2),pe=me[0],de=me[1],fe=Boolean(Q),Ee=function(){oe(!le)},ge=function(){de(!pe)},he=Object(P.f)();return r.a.createElement("div",null,r.a.createElement(mt.a,null),r.a.createElement(D.a,{onChange:function(e){console.log(e.currentTarget),H(e.currentTarget)}},r.a.createElement(m.a,{position:"static"},r.a.createElement(p.a,{className:a.toolbar},i&&r.a.createElement(f.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){e.preventDefault(),re(!ne)}},r.a.createElement(x.a,null)),r.a.createElement(D.b,{to:"/",style:{color:"inherit",textDecoration:"none"},className:a.title},r.a.createElement(d.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0},"\ud835\udc0f\ud835\udc1a\ud835\udc2b\ud835\udc2d\ud835\udc1a\ud835\udc20\ud835\udc1e \ud835\udc1d'\ud835\udc1a\ud835\udc25\ud835\udc1b\ud835\udc2e\ud835\udc26 \ud835\udc29\ud835\udc21\ud835\udc28\ud835\udc2d\ud835\udc28")),i?r.a.createElement("div",null,r.a.createElement("input",{accept:"image/*",className:a.dNone,id:"contained-button-file",type:"file",onChange:function(e){e.preventDefault(),Y(null);var a=e.target.files[0];H(!0),Z.upload(a).then((function(e){var a=e.data.path.split("/"),t=a[a.length-1];Z.updatePicture(t).then((function(e){window.location.reload()}),(function(e){H(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}),(function(e){H(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}}),r.a.createElement(f.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){e.preventDefault(),Y(e.currentTarget)},color:"inherit"},"false"!==u.picture?r.a.createElement(E.a,{alt:u.prenom+" "+u.nom,src:"/images/users/small/"+u.picture}):r.a.createElement(E.a,null,r.a.createElement(_.a,{fontSize:"large"}))),r.a.createElement(b.a,{id:"menu-appbar",anchorEl:Q,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:fe,onClose:function(){Y(null)}},r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(v.a,null,r.a.createElement(S.a,null,r.a.createElement(Za.a,{fontSize:"small"})),r.a.createElement(d.a,{variant:"inherit"},"Changer de photos"))),r.a.createElement(j.a,null),r.a.createElement(v.a,{onClick:function(e){e.preventDefault(),Y(null),H(!0),Z.logout().then((function(e){s(!1),y(null),H(!1),he.push("/")}),(function(e){H(!1),e.response.status>400&&e.response.status<500?$.a.warning(e.response.data,"Erreur "+e.response.status):$.a.error(e.response.data,"Erreur "+e.response.status)}))}},r.a.createElement(S.a,null,r.a.createElement(xt.a,{fontSize:"small"})),r.a.createElement(d.a,{variant:"inherit"},"D\xe9connexion")))):r.a.createElement(D.b,{to:"/SignIn"},r.a.createElement(g.a,{variant:"contained",color:"primary",size:"small",startIcon:r.a.createElement(kt.a,null)},"Connection")))),r.a.createElement("div",{className:a.root},i&&r.a.createElement(k.a,{variant:"permanent",classes:{paper:Object(w.default)(a.drawerPaper,!ne&&a.drawerPaperClose)},anchor:"left",open:ne},function(e){var t=e.friends,n=void 0===t?[]:t,i=e.albums,s=void 0===i?[]:i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct,{to:"/",primary:"Dashboard",icon:r.a.createElement(vt.a,null),key:"Dashboard"}),r.a.createElement(Ct,{to:"/Users/Friends",primary:"Mes Amis",icon:u.friendRequests_receive.length>0?r.a.createElement(h.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:u.friendRequests_receive.length,color:"secondary"},r.a.createElement(ht.a,null)):r.a.createElement(ht.a,null),key:"mesAmis"}),r.a.createElement(Ct,{to:"/Album/Me",primary:"Mes Albums",icon:r.a.createElement(Za.a,null),key:"mesAlbums"}),r.a.createElement(Ct,{to:"/Album/Find",primary:"Recherche d'albums",icon:r.a.createElement(z.a,null),key:"findAlbums"}),r.a.createElement(j.a,null),r.a.createElement(Ct,{to:"/Users/Add",primary:"Rechercher un amis",icon:r.a.createElement(E.a,{className:jt(a.purple,a.small)},r.a.createElement(Et.a,{fontSize:"small"})),key:"addUSer"}),n.length>5?r.a.createElement("div",null,n.slice(0,5).map((function(e){return r.a.createElement("div",null,e.validated?q(e)?r.a.createElement(Ct,{to:"/Users/"+e._id,primary:e.validated?e.prenom+" "+e.nom:e.email,key:e._id,icon:"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))}):r.a.createElement(Ct,{to:"/Users/"+e._id,primary:e.validated?e.prenom+" "+e.nom:e.email,key:e._id,icon:r.a.createElement(h.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ye.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.validated?e.prenom+" "+e.nom:e.email,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)))}):r.a.createElement("li",null,r.a.createElement(C.a,null,r.a.createElement(S.a,null,r.a.createElement(h.a,{overlap:"rectangle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ke.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)))),r.a.createElement(O.a,{primary:e.email}))))})),r.a.createElement(Ua.a,{in:le,timeout:"auto",unmountOnExit:!0},n.slice(5).map((function(e){return r.a.createElement("div",null,e.validated?q(e)?r.a.createElement(Ct,{to:"/Users/"+e._id,primary:e.validated?e.prenom+" "+e.nom:e.email,key:e._id,icon:"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))}):r.a.createElement(Ct,{to:"/Users/"+e._id,primary:e.validated?e.prenom+" "+e.nom:e.email,key:e._id,icon:r.a.createElement(h.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ye.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.validated?e.prenom+" "+e.nom:e.email,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)))}):r.a.createElement("li",null,r.a.createElement(C.a,null,r.a.createElement(S.a,null,r.a.createElement(h.a,{overlap:"rectangle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ke.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)))),r.a.createElement(O.a,{primary:e.email}))))}))),r.a.createElement(C.a,{button:!0,onClick:Ee},r.a.createElement(O.a,{primary:ne?le?"Voir moins":"Voir plus":le?"-":"+"}),le?r.a.createElement($a.a,null):r.a.createElement(Ka.a,null))):r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",null,e.validated?q(e)?r.a.createElement(Ct,{to:"/Users/"+e._id,primary:e.validated?e.prenom+" "+e.nom:e.email,key:e._id,icon:"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null))}):r.a.createElement(Ct,{to:"/Users/"+e._id,primary:e.validated?e.prenom+" "+e.nom:e.email,key:e._id,icon:r.a.createElement(h.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ye.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.validated?e.prenom+" "+e.nom:e.email,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)))}):r.a.createElement("li",null,r.a.createElement(C.a,null,r.a.createElement(S.a,null,r.a.createElement(h.a,{overlap:"rectangle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:r.a.createElement(Ke.a,{fontSize:"small",color:"inherit"})},"false"!==e.picture?r.a.createElement(E.a,{className:a.small,alt:e.prenom+" "+e.nom,src:"/images/user/small/"+e.picture}):r.a.createElement(E.a,{className:a.small},r.a.createElement(_.a,null)))),r.a.createElement(O.a,{primary:e.email}))))}))),r.a.createElement(j.a,null),r.a.createElement(Ct,{to:"/Album/Create",primary:"Cr\xe9er un nouvel album",icon:r.a.createElement(E.a,{className:jt(a.orange,a.small)},r.a.createElement(dt.a,{fontSize:"small"})),key:"addAlbum"}),s.length>5?r.a.createElement("div",null,s.slice(0,5).map((function(e){var t=e.photos[Math.floor(Math.random()*e.photos.length)];return r.a.createElement(Ct,{to:"/Album/"+e._id,primary:e.name,key:e._id,icon:r.a.createElement(E.a,{className:a.small,alt:e.name,src:"/images/photos/small/"+t.src})})})),r.a.createElement(Ua.a,{in:pe,timeout:"auto",unmountOnExit:!0},s.slice(5).map((function(e){var t=e.photos[Math.floor(Math.random()*e.photos.length)];return r.a.createElement(Ct,{to:"/Album/"+e._id,primary:e.name,key:e._id,icon:r.a.createElement(E.a,{className:a.small,alt:e.name,src:"/images/photos/small/"+t.src})})}))),r.a.createElement(C.a,{button:!0,onClick:ge},r.a.createElement(O.a,{primary:ne?pe?"Voir moins":"Voir plus":pe?"-":"+"}),pe?r.a.createElement($a.a,null):r.a.createElement(Ka.a,null))):r.a.createElement("div",null,s.map((function(e){var t=e.photos[Math.floor(Math.random()*e.photos.length)];return r.a.createElement(Ct,{to:"/Album/"+e._id,primary:e.name,key:e._id,icon:r.a.createElement(E.a,{className:a.small,alt:e.name,src:"/images/photos/small/"+t.src})})}))))}({friends:u.friends,albums:u.albums})),r.a.createElement("main",{className:a.content},U?r.a.createElement(A.a,{className:a.backdrop,open:G},r.a.createElement(I.a,{color:"inherit"})):r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/",component:i?function(){return r.a.createElement(tt,{profile:u})}:function(){return r.a.createElement(ut,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/invitation/:invitId",component:i?function(){return r.a.createElement(tt,{profile:u})}:function(){return r.a.createElement(ut,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/verification/:userId",component:i?function(){return r.a.createElement(tt,{profile:u})}:function(){return r.a.createElement(ut,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/SignIn",component:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/SignUp",component:function(){return r.a.createElement(ae,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Album/Create",component:i?function(){return r.a.createElement(Ge,{profile:u,setProfile:y})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Album/Me",component:i?function(){return r.a.createElement(ca,{auth:i,profile:u,setProfile:y})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y})}}),r.a.createElement(P.a,{exact:!0,path:"/Album/Find",component:i?function(){return r.a.createElement(Ne,{auth:i,profile:u})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y})}}),r.a.createElement(P.a,{exact:!0,path:"/Album/Tag/:tag",component:i?function(){return r.a.createElement(we,{auth:i,profile:u})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y})}}),r.a.createElement(P.a,{exact:!0,path:"/Album/:id",component:i?function(){return r.a.createElement(ue,null)}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Photos/:id",component:i?function(){return r.a.createElement(Fa,{profile:u})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Users/Add",component:i?function(){return r.a.createElement(ha,{profile:u,setProfile:y})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Users/Me",component:i?function(){return r.a.createElement(va,{profile:u,setProfile:y})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Users/Friends",component:i?function(){return r.a.createElement(za,{profile:u,setProfile:y,newRequest:M,setNewRequest:B})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}),r.a.createElement(P.a,{exact:!0,path:"/Users/:id",component:i?function(){return r.a.createElement(Na,{profile:u,setProfile:y})}:function(){return r.a.createElement(K,{setAuth:s,auth:i,setProfile:y,profile:u})}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.2932e8e2.chunk.js.map